var wi=Object.defineProperty;var yi=(r,e,n)=>e in r?wi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var oe=(r,e,n)=>(yi(r,typeof e!="symbol"?e+"":e,n),n);import{c as _i,d as Ht,w as j,P as Br,M as We,g as xr,p as Sr,I as bi,D as Ni,e as Mi,O as Ei,a as Je,f as ot,L as jt,V as ne,S as st,h as ut,T as Gt,i as Si,R as bt,F as Wt,j as Jt,k as Ai,l as Kt,m as Ti,n as Nt,C as Qt,o as kt}from"./game.6fe68dfe.js";import{G as ft}from"./script.2c8a546a.js";import Xr,{Death as ct}from"./health.e780e6ba.js";import{KeyboardControls as Mt}from"./keyboardControls.6f897e4d.js";import{Movement as Et}from"./movement.ada393bb.js";import{Score as Ee}from"./score.6776b201.js";import{shoot as rn}from"./shooting.4204f7df.js";import{UserInterface as Ke}from"./userInterface.661a8981.js";import{dealDamage as Se}from"./damage.system.a2c7a798.js";import{getEquippedItem as Oi}from"./inventory.24d76a8d.js";function Qe(){return Qe=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Qe.apply(this,arguments)}var en={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function lr(r){return typeof r=="number"}function Dr(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function lt(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function ht(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function pt(r){return r&&r.constructor.prototype.isUnit===!0||!1}function Yr(r){return typeof r=="string"}var ur=Array.isArray;function Ar(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function tn(r){return Array.isArray(r)||Ar(r)}function Ci(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Ii(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function nn(r){return r&&r.constructor.prototype.isRange===!0||!1}function ze(r){return r&&r.constructor.prototype.isIndex===!0||!1}function xi(r){return typeof r=="boolean"}function an(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function on(r){return r&&r.constructor.prototype.isHelp===!0||!1}function Pi(r){return typeof r=="function"}function Fi(r){return r instanceof Date}function Di(r){return r instanceof RegExp}function zi(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!lt(r)&&!ht(r))}function Bi(r){return r===null}function qi(r){return r===void 0}function Ri(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Li(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ui(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function $i(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function Zi(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Vi(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function Yi(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Xi(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function Hi(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function sn(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function ji(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function Gi(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Wi(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ji(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ki(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function un(r){return r&&r.constructor.prototype.isChain===!0||!1}function Jr(r){var e=typeof r;return e==="object"?r===null?"null":Array.isArray(r)?"Array":r instanceof Date?"Date":r instanceof RegExp?"RegExp":Dr(r)?"BigNumber":lt(r)?"Complex":ht(r)?"Fraction":Ar(r)?"Matrix":pt(r)?"Unit":ze(r)?"Index":nn(r)?"Range":an(r)?"ResultSet":sn(r)?r.type:un(r)?"Chain":on(r)?"Help":"Object":e==="function"?"Function":e}function yr(r){var e=typeof r;if(e==="number"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(n){return yr(n)});if(r instanceof Date)return new Date(r.valueOf());if(Dr(r))return r;if(r instanceof RegExp)throw new TypeError("Cannot clone "+r);return Qi(r,yr)}function Qi(r,e){var n={};for(var i in r)de(r,i)&&(n[i]=e(r[i]));return n}function ki(r,e){for(var n in e)de(e,n)&&(r[n]=e[n]);return r}function Ae(r,e){var n,i,t;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(i=0,t=r.length;i<t;i++)if(!Ae(r[i],e[i]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in r)if(!(n in e)||!Ae(r[n],e[n]))return!1;for(n in e)if(!(n in r))return!1;return!0}else return r===e}}function de(r,e){return r&&Object.hasOwnProperty.call(r,e)}function ra(r,e){for(var n={},i=0;i<e.length;i++){var t=e[i],a=r[t];a!==void 0&&(n[t]=a)}return n}var ea=["Matrix","Array"],ta=["number","BigNumber","Fraction"],we=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(en)};Qe(we,en,{MATRIX_OPTIONS:ea,NUMBER_OPTIONS:ta});var fn={exports:{}};(function(r,e){(function(n,i){r.exports=i()})(_i,function(){function n(){return!0}function i(){return!1}function t(){}function a(){var c=[{name:"number",test:function(A){return typeof A=="number"}},{name:"string",test:function(A){return typeof A=="string"}},{name:"boolean",test:function(A){return typeof A=="boolean"}},{name:"Function",test:function(A){return typeof A=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(A){return A instanceof Date}},{name:"RegExp",test:function(A){return A instanceof RegExp}},{name:"Object",test:function(A){return typeof A=="object"&&A!==null&&A.constructor===Object}},{name:"null",test:function(A){return A===null}},{name:"undefined",test:function(A){return A===void 0}}],h={name:"any",test:n},p=[],m=[],u={types:c,conversions:m,ignore:p};function o(A){var O=Or(u.types,function(T){return T.name===A});if(O)return O;if(A==="any")return h;var I=Or(u.types,function(T){return T.name.toLowerCase()===A.toLowerCase()});throw new TypeError('Unknown type "'+A+'"'+(I?'. Did you mean "'+I.name+'"?':""))}function f(A){return A===h?999:u.types.indexOf(A)}function l(A){var O=Or(u.types,function(I){return I.test(A)});if(O)return O.name;throw new TypeError("Value has unknown type. Value: "+A)}function v(A,O){if(!A.signatures)throw new TypeError("Function is no typed-function");var I;if(typeof O=="string"){I=O.split(",");for(var T=0;T<I.length;T++)I[T]=I[T].trim()}else if(Array.isArray(O))I=O;else throw new TypeError("String array or a comma separated string expected");var R=I.join(","),X=A.signatures[R];if(X)return X;throw new TypeError("Signature not found (signature: "+(A.name||"unnamed")+"("+I.join(", ")+"))")}function s(A,O){var I=l(A);if(O===I)return A;for(var T=0;T<u.conversions.length;T++){var R=u.conversions[T];if(R.from===I&&R.to===O)return R.convert(A)}throw new Error("Cannot convert from "+I+" to "+O)}function d(A){return A.map(function(O){var I=O.types.map(E);return(O.restParam?"...":"")+I.join("|")}).join(",")}function g(A,O){var I=A.indexOf("...")===0,T=I?A.length>3?A.slice(3):"any":A,R=T.split("|").map(vr).filter(sr).filter(pr),X=V(O,R),G=R.map(function(L){var K=o(L);return{name:L,typeIndex:f(K),test:K.test,conversion:null,conversionIndex:-1}}),$=X.map(function(L){var K=o(L.from);return{name:L.from,typeIndex:f(K),test:K.test,conversion:L,conversionIndex:O.indexOf(L)}});return{types:G.concat($),restParam:I}}function M(A,O,I){var T=[];return A.trim()!==""&&(T=A.split(",").map(vr).map(function(R,X,G){var $=g(R,I);if($.restParam&&X!==G.length-1)throw new SyntaxError('Unexpected rest parameter "'+R+'": only allowed for the last parameter');return $})),T.some(cr)?null:{params:T,fn:O}}function _(A){var O=Tr(A);return O?O.restParam:!1}function b(A){return A.types.some(function(O){return O.conversion!=null})}function w(A){if(!A||A.types.length===0)return n;if(A.types.length===1)return o(A.types[0].name).test;if(A.types.length===2){var O=o(A.types[0].name).test,I=o(A.types[1].name).test;return function(X){return O(X)||I(X)}}else{var T=A.types.map(function(R){return o(R.name).test});return function(X){for(var G=0;G<T.length;G++)if(T[G](X))return!0;return!1}}}function y(A){var O,I,T;if(_(A)){O=ar(A).map(w);var R=O.length,X=w(Tr(A)),G=function($){for(var L=R;L<$.length;L++)if(!X($[L]))return!1;return!0};return function(L){for(var K=0;K<O.length;K++)if(!O[K](L[K]))return!1;return G(L)&&L.length>=R+1}}else return A.length===0?function(L){return L.length===0}:A.length===1?(I=w(A[0]),function(L){return I(L[0])&&L.length===1}):A.length===2?(I=w(A[0]),T=w(A[1]),function(L){return I(L[0])&&T(L[1])&&L.length===2}):(O=A.map(w),function(L){for(var K=0;K<O.length;K++)if(!O[K](L[K]))return!1;return L.length===O.length})}function S(A,O){return O<A.params.length?A.params[O]:_(A.params)?Tr(A.params):null}function N(A,O,I){var T=S(A,O),R=T?I?T.types.filter(C):T.types:[];return R.map(E)}function E(A){return A.name}function C(A){return A.conversion===null||A.conversion===void 0}function x(A,O){var I=jr(Lr(A,function(T){return N(T,O,!1)}));return I.indexOf("any")!==-1?["any"]:I}function D(A,O,I){var T,R,X=A||"unnamed",G=I,$;for($=0;$<O.length;$++){var L=G.filter(function(Ur){var Ve=w(S(Ur,$));return($<Ur.params.length||_(Ur.params))&&Ve(O[$])});if(L.length===0){if(R=x(G,$),R.length>0){var K=l(O[$]);return T=new TypeError("Unexpected type of argument in function "+X+" (expected: "+R.join(" or ")+", actual: "+K+", index: "+$+")"),T.data={category:"wrongType",fn:X,index:$,actual:K,expected:R},T}}else G=L}var Fr=G.map(function(Ur){return _(Ur.params)?1/0:Ur.params.length});if(O.length<Math.min.apply(null,Fr))return R=x(G,$),T=new TypeError("Too few arguments in function "+X+" (expected: "+R.join(" or ")+", index: "+O.length+")"),T.data={category:"tooFewArgs",fn:X,index:O.length,expected:R},T;var zr=Math.max.apply(null,Fr);return O.length>zr?(T=new TypeError("Too many arguments in function "+X+" (expected: "+zr+", actual: "+O.length+")"),T.data={category:"tooManyArgs",fn:X,index:O.length,expectedLength:zr},T):(T=new TypeError('Arguments of type "'+O.join(", ")+'" do not match any of the defined signatures of function '+X+"."),T.data={category:"mismatch",actual:O.map(l)},T)}function B(A){for(var O=999,I=0;I<A.types.length;I++)C(A.types[I])&&(O=Math.min(O,A.types[I].typeIndex));return O}function z(A){for(var O=999,I=0;I<A.types.length;I++)C(A.types[I])||(O=Math.min(O,A.types[I].conversionIndex));return O}function q(A,O){var I;return I=A.restParam-O.restParam,I!==0||(I=b(A)-b(O),I!==0)||(I=B(A)-B(O),I!==0)?I:z(A)-z(O)}function F(A,O){var I=Math.min(A.params.length,O.params.length),T,R;if(R=A.params.some(b)-O.params.some(b),R!==0)return R;for(T=0;T<I;T++)if(R=b(A.params[T])-b(O.params[T]),R!==0)return R;for(T=0;T<I;T++)if(R=q(A.params[T],O.params[T]),R!==0)return R;return A.params.length-O.params.length}function V(A,O){var I={};return A.forEach(function(T){O.indexOf(T.from)===-1&&O.indexOf(T.to)!==-1&&!I[T.from]&&(I[T.from]=T)}),Object.keys(I).map(function(T){return I[T]})}function U(A,O){var I=O;if(A.some(b)){var T=_(A),R=A.map(Y);I=function(){for(var L=[],K=T?arguments.length-1:arguments.length,Fr=0;Fr<K;Fr++)L[Fr]=R[Fr](arguments[Fr]);return T&&(L[K]=arguments[K].map(R[K])),O.apply(this,L)}}var X=I;if(_(A)){var G=A.length-1;X=function(){return I.apply(this,mr(arguments,0,G).concat([mr(arguments,G)]))}}return X}function Y(A){var O,I,T,R,X=[],G=[];switch(A.types.forEach(function($){$.conversion&&(X.push(o($.conversion.from).test),G.push($.conversion.convert))}),G.length){case 0:return function(L){return L};case 1:return O=X[0],T=G[0],function(L){return O(L)?T(L):L};case 2:return O=X[0],I=X[1],T=G[0],R=G[1],function(L){return O(L)?T(L):I(L)?R(L):L};default:return function(L){for(var K=0;K<G.length;K++)if(X[K](L))return G[K](L);return L}}}function J(A){var O={};return A.forEach(function(I){I.params.some(b)||rr(I.params,!0).forEach(function(T){O[d(T)]=I.fn})}),O}function rr(A,O){function I(T,R,X){if(R<T.length){var G=T[R],$=O?G.types.filter(C):G.types,L;if(G.restParam){var K=$.filter(C);L=K.length<$.length?[K,$]:[$]}else L=$.map(function(zr){return[zr]});return Lr(L,function(zr){return I(T,R+1,X.concat([zr]))})}else{var Fr=X.map(function(zr,Ur){return{types:zr,restParam:Ur===T.length-1&&_(T)}});return[Fr]}}return I(A,0,[])}function er(A,O){for(var I=Math.max(A.params.length,O.params.length),T=0;T<I;T++){var R=N(A,T,!0),X=N(O,T,!0);if(!wr(R,X))return!1}var G=A.params.length,$=O.params.length,L=_(A.params),K=_(O.params);return L?K?G===$:$>=G:K?G>=$:G===$}function Q(A,O){if(Object.keys(O).length===0)throw new SyntaxError("No signatures provided");var I=[];Object.keys(O).map(function(or){return M(or,O[or],u.conversions)}).filter(Er).forEach(function(or){var Nr=Or(I,function($r){return er($r,or)});if(Nr)throw new TypeError('Conflicting signatures "'+d(Nr.params)+'" and "'+d(or.params)+'".');I.push(or)});var T=Lr(I,function(or){var Nr=or?rr(or.params,!1):[];return Nr.map(function($r){return{params:$r,fn:or.fn}})}).filter(Er);T.sort(F);var R=T[0]&&T[0].params.length<=2&&!_(T[0].params),X=T[1]&&T[1].params.length<=2&&!_(T[1].params),G=T[2]&&T[2].params.length<=2&&!_(T[2].params),$=T[3]&&T[3].params.length<=2&&!_(T[3].params),L=T[4]&&T[4].params.length<=2&&!_(T[4].params),K=T[5]&&T[5].params.length<=2&&!_(T[5].params),Fr=R&&X&&G&&$&&L&&K,zr=T.map(function(or){return y(or.params)}),Ur=R?w(T[0].params[0]):i,Ve=X?w(T[1].params[0]):i,jn=G?w(T[2].params[0]):i,Gn=$?w(T[3].params[0]):i,Wn=L?w(T[4].params[0]):i,Jn=K?w(T[5].params[0]):i,Kn=R?w(T[0].params[1]):i,Qn=X?w(T[1].params[1]):i,kn=G?w(T[2].params[1]):i,ri=$?w(T[3].params[1]):i,ei=L?w(T[4].params[1]):i,ti=K?w(T[5].params[1]):i,te=T.map(function(or){return U(or.params,or.fn)}),ni=R?te[0]:t,ii=X?te[1]:t,ai=G?te[2]:t,oi=$?te[3]:t,si=L?te[4]:t,ui=K?te[5]:t,fi=R?T[0].params.length:-1,ci=X?T[1].params.length:-1,li=G?T[2].params.length:-1,hi=$?T[3].params.length:-1,pi=L?T[4].params.length:-1,vi=K?T[5].params.length:-1,di=Fr?6:0,mi=T.length,gi=function(){for(var Nr=di;Nr<mi;Nr++)if(zr[Nr](arguments))return te[Nr].apply(this,arguments);return u.onMismatch(A,arguments,T)},Ye=function or(Nr,$r){return arguments.length===fi&&Ur(Nr)&&Kn($r)?ni.apply(or,arguments):arguments.length===ci&&Ve(Nr)&&Qn($r)?ii.apply(or,arguments):arguments.length===li&&jn(Nr)&&kn($r)?ai.apply(or,arguments):arguments.length===hi&&Gn(Nr)&&ri($r)?oi.apply(or,arguments):arguments.length===pi&&Wn(Nr)&&ei($r)?si.apply(or,arguments):arguments.length===vi&&Jn(Nr)&&ti($r)?ui.apply(or,arguments):gi.apply(or,arguments)};try{Object.defineProperty(Ye,"name",{value:A})}catch{}return Ye.signatures=J(T),Ye}function hr(A,O,I){throw D(A,O,I)}function pr(A){return u.ignore.indexOf(A)===-1}function vr(A){return A.trim()}function sr(A){return!!A}function Er(A){return A!==null}function cr(A){return A.types.length===0}function ar(A){return A.slice(0,A.length-1)}function Tr(A){return A[A.length-1]}function mr(A,O,I){return Array.prototype.slice.call(A,O,I)}function nr(A,O){return A.indexOf(O)!==-1}function wr(A,O){for(var I=0;I<A.length;I++)if(nr(O,A[I]))return!0;return!1}function Or(A,O){for(var I=0;I<A.length;I++)if(O(A[I]))return A[I]}function jr(A){for(var O={},I=0;I<A.length;I++)O[A[I]]=!0;return Object.keys(O)}function Lr(A,O){return Array.prototype.concat.apply([],A.map(O))}function ae(A){for(var O="",I=0;I<A.length;I++){var T=A[I];if((typeof T.signatures=="object"||typeof T.signature=="string")&&T.name!==""){if(O==="")O=T.name;else if(O!==T.name){var R=new Error("Function names do not match (expected: "+O+", actual: "+T.name+")");throw R.data={actual:T.name,expected:O},R}}}return O}function ee(A){var O,I={};function T($,L){if(I.hasOwnProperty($)&&L!==I[$])throw O=new Error('Signature "'+$+'" is defined twice'),O.data={signature:$},O}for(var R=0;R<A.length;R++){var X=A[R];if(typeof X.signatures=="object")for(var G in X.signatures)X.signatures.hasOwnProperty(G)&&(T(G,X.signatures[G]),I[G]=X.signatures[G]);else if(typeof X.signature=="string")T(X.signature,X),I[X.signature]=X;else throw O=new TypeError("Function is no typed-function (index: "+R+")"),O.data={index:R},O}return I}return u=Q("typed",{"string, Object":Q,Object:function(A){var O=[];for(var I in A)A.hasOwnProperty(I)&&O.push(A[I]);var T=ae(O);return Q(T,A)},"...Function":function(A){return Q(ae(A),ee(A))},"string, ...Function":function(A,O){return Q(A,ee(O))}}),u.create=a,u.types=c,u.conversions=m,u.ignore=p,u.onMismatch=hr,u.throwMismatchError=hr,u.createError=D,u.convert=s,u.find=v,u.addType=function(A,O){if(!A||typeof A.name!="string"||typeof A.test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");if(O!==!1){for(var I=0;I<u.types.length;I++)if(u.types[I].name==="Object"){u.types.splice(I,0,A);return}}u.types.push(A)},u.addConversion=function(A){if(!A||typeof A.from!="string"||typeof A.to!="string"||typeof A.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(A)},u}return a()})})(fn);var St=fn.exports;function _r(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}function Xe(r,e,n){var i={2:"0b",8:"0o",16:"0x"},t=i[e],a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!_r(n))throw new Error("size must be an integer");if(r>2**(n-1)-1||r<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!_r(r))throw new Error("Value must be an integer");r<0&&(r=r+2**n),a="i".concat(n)}var c="";return r<0&&(r=-r,c="-"),"".concat(c).concat(t).concat(r.toString(e)).concat(a)}function ke(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var n="auto",i,t;if(e&&(e.notation&&(n=e.notation),lr(e)?i=e:lr(e.precision)&&(i=e.precision),e.wordSize&&(t=e.wordSize,typeof t!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return ia(r,i);case"exponential":return cn(r,i);case"engineering":return na(r,i);case"bin":return Xe(r,2,t);case"oct":return Xe(r,8,t);case"hex":return Xe(r,16,t);case"auto":return aa(r,i,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],c=arguments[4];return a!=="."?a+c:c});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Be(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var n=e[1],i=e[2],t=parseFloat(e[4]||"0"),a=i.indexOf(".");t+=a!==-1?a-1:i.length-1;var c=i.replace(".","").replace(/^0*/,function(h){return t-=h.length,""}).replace(/0*$/,"").split("").map(function(h){return parseInt(h)});return c.length===0&&(c.push(0),t++),{sign:n,coefficients:c,exponent:t}}function na(r,e){if(isNaN(r)||!isFinite(r))return String(r);var n=Be(r),i=qe(n,e),t=i.exponent,a=i.coefficients,c=t%3===0?t:t<0?t-3-t%3:t-t%3;if(lr(e))for(;e>a.length||t-c+1>a.length;)a.push(0);else for(var h=Math.abs(t-c)-(a.length-1),p=0;p<h;p++)a.push(0);for(var m=Math.abs(t-c),u=1;m>0;)u++,m--;var o=a.slice(u).join(""),f=lr(e)&&o.length||o.match(/[1-9]/)?"."+o:"",l=a.slice(0,u).join("")+f+"e"+(t>=0?"+":"")+c.toString();return i.sign+l}function ia(r,e){if(isNaN(r)||!isFinite(r))return String(r);var n=Be(r),i=typeof e=="number"?qe(n,n.exponent+1+e):n,t=i.coefficients,a=i.exponent+1,c=a+(e||0);return t.length<c&&(t=t.concat(fe(c-t.length))),a<0&&(t=fe(-a+1).concat(t),a=1),a<t.length&&t.splice(a,0,a===0?"0.":"."),i.sign+t.join("")}function cn(r,e){if(isNaN(r)||!isFinite(r))return String(r);var n=Be(r),i=e?qe(n,e):n,t=i.coefficients,a=i.exponent;t.length<e&&(t=t.concat(fe(e-t.length)));var c=t.shift();return i.sign+c+(t.length>0?"."+t.join(""):"")+"e"+(a>=0?"+":"")+a}function aa(r,e,n){if(isNaN(r)||!isFinite(r))return String(r);var i=n&&n.lowerExp!==void 0?n.lowerExp:-3,t=n&&n.upperExp!==void 0?n.upperExp:5,a=Be(r),c=e?qe(a,e):a;if(c.exponent<i||c.exponent>=t)return cn(r,e);var h=c.coefficients,p=c.exponent;h.length<e&&(h=h.concat(fe(e-h.length))),h=h.concat(fe(p-h.length+1+(h.length<e?e-h.length:0))),h=fe(-p).concat(h);var m=p>0?p:0;return m<h.length-1&&h.splice(m+1,0,"."),c.sign+h.join("")}function qe(r,e){for(var n={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},i=n.coefficients;e<=0;)i.unshift(0),n.exponent++,e++;if(i.length>e){var t=i.splice(e,i.length-e);if(t[0]>=5){var a=e-1;for(i[a]++;i[a]===10;)i.pop(),a===0&&(i.unshift(0),n.exponent++,a++),a--,i[a]++}}return n}function fe(r){for(var e=[],n=0;n<r;n++)e.push(0);return e}function oa(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var sa=Number.EPSILON||2220446049250313e-31;function Te(r,e,n){if(n==null)return r===e;if(r===e)return!0;if(isNaN(r)||isNaN(e))return!1;if(isFinite(r)&&isFinite(e)){var i=Math.abs(r-e);return i<sa?!0:i<=Math.max(Math.abs(r),Math.abs(e))*n}return!1}function He(r,e,n){var i=r.constructor,t=new i(2),a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!_r(n))throw new Error("size must be an integer");if(r.greaterThan(t.pow(n-1).sub(1))||r.lessThan(t.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(t.pow(n))),a="i".concat(n)}switch(e){case 2:return"".concat(r.toBinary()).concat(a);case 8:return"".concat(r.toOctal()).concat(a);case 16:return"".concat(r.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function ua(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var n="auto",i,t;if(e!==void 0&&(e.notation&&(n=e.notation),typeof e=="number"?i=e:e.precision&&(i=e.precision),e.wordSize&&(t=e.wordSize,typeof t!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return ca(r,i);case"exponential":return At(r,i);case"engineering":return fa(r,i);case"bin":return He(r,2,t);case"oct":return He(r,8,t);case"hex":return He(r,16,t);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,c=e&&e.upperExp!==void 0?e.upperExp:5;if(r.isZero())return"0";var h,p=r.toSignificantDigits(i),m=p.e;return m>=a&&m<c?h=p.toFixed():h=At(r,i),h.replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],o=arguments[4];return u!=="."?u+o:o})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function fa(r,e){var n=r.e,i=n%3===0?n:n<0?n-3-n%3:n-n%3,t=r.mul(Math.pow(10,-i)),a=t.toPrecision(e);return a.indexOf("e")!==-1&&(a=t.toString()),a+"e"+(n>=0?"+":"")+i.toString()}function At(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function ca(r,e){return r.toFixed(e)}function Ir(r,e){var n=la(r,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function la(r,e){if(typeof r=="number")return ke(r,e);if(Dr(r))return ua(r,e);if(ha(r))return!e||e.fraction!=="decimal"?r.s*r.n+"/"+r.d:r.toString();if(Array.isArray(r))return ln(r,e);if(Yr(r))return'"'+r+'"';if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var n=Object.keys(r).map(i=>'"'+i+'": '+Ir(r[i],e));return"{"+n.join(", ")+"}"}return String(r)}function ln(r,e){if(Array.isArray(r)){for(var n="[",i=r.length,t=0;t<i;t++)t!==0&&(n+=", "),n+=ln(r[t],e);return n+="]",n}else return Ir(r,e)}function ha(r){return r&&typeof r=="object"&&typeof r.s=="number"&&typeof r.n=="number"&&typeof r.d=="number"||!1}function tr(r,e,n){if(!(this instanceof tr))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}tr.prototype=new RangeError;tr.prototype.constructor=RangeError;tr.prototype.name="DimensionError";tr.prototype.isDimensionError=!0;function he(r,e,n){if(!(this instanceof he))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}he.prototype=new RangeError;he.prototype.constructor=RangeError;he.prototype.name="IndexError";he.prototype.isIndexError=!0;function ie(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function hn(r,e,n){var i,t=r.length;if(t!==e[n])throw new tr(t,e[n]);if(n<e.length-1){var a=n+1;for(i=0;i<t;i++){var c=r[i];if(!Array.isArray(c))throw new tr(e.length-1,e.length,"<");hn(r[i],e,a)}}else for(i=0;i<t;i++)if(Array.isArray(r[i]))throw new tr(e.length+1,e.length,">")}function Tt(r,e){var n=e.length===0;if(n){if(Array.isArray(r))throw new tr(r.length,0)}else hn(r,e,0)}function fr(r,e){if(!lr(r)||!_r(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new he(r,e)}function Ot(r,e,n){if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(t){if(!lr(t)||!_r(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ir(e)+")")});var i=n!==void 0?n:0;return rt(r,e,0,i),r}function rt(r,e,n,i){var t,a,c=r.length,h=e[n],p=Math.min(c,h);if(r.length=h,n<e.length-1){var m=n+1;for(t=0;t<p;t++)a=r[t],Array.isArray(a)||(a=[a],r[t]=a),rt(a,e,m,i);for(t=p;t<h;t++)a=[],r[t]=a,rt(a,e,m,i)}else{for(t=0;t<p;t++)for(;Array.isArray(r[t]);)r[t]=r[t][0];for(t=p;t<h;t++)r[t]=i}}function pa(r,e){var n=da(r),i=n.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new tr(0,i,"!=");e=vt(e,i);var t=pn(e);if(i!==t)throw new tr(t,i,"!=");try{return va(n,e)}catch(a){throw a instanceof tr?new tr(t,i,"!="):a}}function vt(r,e){var n=pn(r),i=r.slice(),t=-1,a=r.indexOf(t),c=r.indexOf(t,a+1)>=0;if(c)throw new Error("More than one wildcard in sizes");var h=a>=0,p=e%n===0;if(h)if(p)i[a]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return i}function pn(r){return r.reduce((e,n)=>e*n,1)}function va(r,e){for(var n=r,i,t=e.length-1;t>0;t--){var a=e[t];i=[];for(var c=n.length/a,h=0;h<c;h++)i.push(n.slice(h*a,(h+1)*a));n=i}return n}function vn(r,e,n,i){var t=i||ie(r);if(n)for(var a=0;a<n;a++)r=[r],t.unshift(1);for(r=dn(r,e,0);t.length<e;)t.push(1);return r}function dn(r,e,n){var i,t;if(Array.isArray(r)){var a=n+1;for(i=0,t=r.length;i<t;i++)r[i]=dn(r[i],e,a)}else for(var c=n;c<e;c++)r=[r];return r}function da(r){if(!Array.isArray(r))return r;var e=[];return r.forEach(function n(i){Array.isArray(i)?i.forEach(n):e.push(i)}),e}function Oe(r,e){for(var n,i=0,t=0;t<r.length;t++){var a=r[t],c=Array.isArray(a);if(t===0&&c&&(i=a.length),c&&a.length!==i)return;var h=c?Oe(a,e):e(a);if(n===void 0)n=h;else if(n!==h)return"mixed"}return n}function k(r,e,n,i){function t(a){var c=ra(a,e.map(wa));return ma(r,e,a),n(c)}return t.isFactory=!0,t.fn=r,t.dependencies=e.slice().sort(),i&&(t.meta=i),t}function ma(r,e,n){var i=e.filter(a=>!ga(a)).every(a=>n[a]!==void 0);if(!i){var t=e.filter(a=>n[a]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(t.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function ga(r){return r&&r[0]==="?"}function wa(r){return r&&r[0]==="?"?r.slice(1):r}function ya(r,e){if(gn(r)&&mn(r,e))return r[e];throw typeof r[e]=="function"&&Na(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function _a(r,e,n){if(gn(r)&&mn(r,e))return r[e]=n,n;throw new Error('No access to property "'+e+'"')}function ba(r,e){return e in r}function mn(r,e){return!r||typeof r!="object"?!1:de(Ma,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Na(r,e){return r==null||typeof r[e]!="function"||de(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:de(Ea,e)?!0:!(e in Object.prototype||e in Function.prototype)}function gn(r){return typeof r=="object"&&r&&r.constructor===Object}var Ma={length:!0,name:!0},Ea={toString:!0,valueOf:!0,toLocaleString:!0};class Sa{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return ya(this.wrappedObject,e)}set(e,n){return _a(this.wrappedObject,e,n),this}has(e){return ba(this.wrappedObject,e)}}function Aa(r){return r?r instanceof Map||r instanceof Sa||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}var wn=function(){return wn=St.create,St},Ta=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Oa=k("typed",Ta,function(e){var{BigNumber:n,Complex:i,DenseMatrix:t,Fraction:a}=e,c=wn();return c.types=[{name:"number",test:lr},{name:"Complex",test:lt},{name:"BigNumber",test:Dr},{name:"Fraction",test:ht},{name:"Unit",test:pt},{name:"string",test:Yr},{name:"Chain",test:un},{name:"Array",test:ur},{name:"Matrix",test:Ar},{name:"DenseMatrix",test:Ci},{name:"SparseMatrix",test:Ii},{name:"Range",test:nn},{name:"Index",test:ze},{name:"boolean",test:xi},{name:"ResultSet",test:an},{name:"Help",test:on},{name:"function",test:Pi},{name:"Date",test:Fi},{name:"RegExp",test:Di},{name:"null",test:Bi},{name:"undefined",test:qi},{name:"AccessorNode",test:Ri},{name:"ArrayNode",test:Li},{name:"AssignmentNode",test:Ui},{name:"BlockNode",test:$i},{name:"ConditionalNode",test:Zi},{name:"ConstantNode",test:Vi},{name:"FunctionNode",test:Xi},{name:"FunctionAssignmentNode",test:Yi},{name:"IndexNode",test:Hi},{name:"Node",test:sn},{name:"ObjectNode",test:ji},{name:"OperatorNode",test:Gi},{name:"ParenthesisNode",test:Wi},{name:"RangeNode",test:Ji},{name:"SymbolNode",test:Ki},{name:"Map",test:Aa},{name:"Object",test:zi}],c.conversions=[{from:"number",to:"BigNumber",convert:function(p){if(n||je(p),oa(p)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+p+"). Use function bignumber(x) to convert to BigNumber.");return new n(p)}},{from:"number",to:"Complex",convert:function(p){return i||be(p),new i(p,0)}},{from:"number",to:"string",convert:function(p){return p+""}},{from:"BigNumber",to:"Complex",convert:function(p){return i||be(p),new i(p.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(p){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(p){return i||be(p),new i(p.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(p){a||Ge(p);var m=new a(p);if(m.valueOf()!==p)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+p+"). Use function fraction(x) to convert to Fraction.");return m}},{from:"string",to:"number",convert:function(p){var m=Number(p);if(isNaN(m))throw new Error('Cannot convert "'+p+'" to a number');return m}},{from:"string",to:"BigNumber",convert:function(p){n||je(p);try{return new n(p)}catch{throw new Error('Cannot convert "'+p+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(p){a||Ge(p);try{return new a(p)}catch{throw new Error('Cannot convert "'+p+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(p){i||be(p);try{return new i(p)}catch{throw new Error('Cannot convert "'+p+'" to Complex')}}},{from:"boolean",to:"number",convert:function(p){return+p}},{from:"boolean",to:"BigNumber",convert:function(p){return n||je(p),new n(+p)}},{from:"boolean",to:"Fraction",convert:function(p){return a||Ge(p),new a(+p)}},{from:"boolean",to:"string",convert:function(p){return String(p)}},{from:"Array",to:"Matrix",convert:function(p){return t||Ca(),new t(p)}},{from:"Matrix",to:"Array",convert:function(p){return p.valueOf()}}],c});function je(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function be(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function Ca(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Ge(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.2
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var ue=9e15,kr=1e9,et="0123456789abcdef",Ce="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ie="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",tt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ue,maxE:ue,crypto:!1},yn,Hr,W=!0,Re="[DecimalError] ",Qr=Re+"Invalid argument: ",_n=Re+"Precision limit exceeded",bn=Re+"crypto unavailable",Nn="[object Decimal]",Mr=Math.floor,dr=Math.pow,Ia=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,xa=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Pa=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Mn=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rr=1e7,H=7,Fa=9007199254740991,Da=Ce.length-1,nt=Ie.length-1,P={toStringTag:Nn};P.absoluteValue=P.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),Z(r)};P.ceil=function(){return Z(new this.constructor(this),this.e+1,2)};P.clampedTo=P.clamp=function(r,e){var n,i=this,t=i.constructor;if(r=new t(r),e=new t(e),!r.s||!e.s)return new t(NaN);if(r.gt(e))throw Error(Qr+e);return n=i.cmp(r),n<0?r:i.cmp(e)>0?e:new t(i)};P.comparedTo=P.cmp=function(r){var e,n,i,t,a=this,c=a.d,h=(r=new a.constructor(r)).d,p=a.s,m=r.s;if(!c||!h)return!p||!m?NaN:p!==m?p:c===h?0:!c^p<0?1:-1;if(!c[0]||!h[0])return c[0]?p:h[0]?-m:0;if(p!==m)return p;if(a.e!==r.e)return a.e>r.e^p<0?1:-1;for(i=c.length,t=h.length,e=0,n=i<t?i:t;e<n;++e)if(c[e]!==h[e])return c[e]>h[e]^p<0?1:-1;return i===t?0:i>t^p<0?1:-1};P.cosine=P.cos=function(){var r,e,n=this,i=n.constructor;return n.d?n.d[0]?(r=i.precision,e=i.rounding,i.precision=r+Math.max(n.e,n.sd())+H,i.rounding=1,n=za(i,On(i,n)),i.precision=r,i.rounding=e,Z(Hr==2||Hr==3?n.neg():n,r,e,!0)):new i(1):new i(NaN)};P.cubeRoot=P.cbrt=function(){var r,e,n,i,t,a,c,h,p,m,u=this,o=u.constructor;if(!u.isFinite()||u.isZero())return new o(u);for(W=!1,a=u.s*dr(u.s*u,1/3),!a||Math.abs(a)==1/0?(n=br(u.d),r=u.e,(a=(r-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=dr(n,1/3),r=Mr((r+1)/3)-(r%3==(r<0?-1:2)),a==1/0?n="5e"+r:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+r),i=new o(n),i.s=u.s):i=new o(a.toString()),c=(r=o.precision)+3;;)if(h=i,p=h.times(h).times(h),m=p.plus(u),i=ir(m.plus(u).times(h),m.plus(p),c+2,1),br(h.d).slice(0,c)===(n=br(i.d)).slice(0,c))if(n=n.slice(c-3,c+1),n=="9999"||!t&&n=="4999"){if(!t&&(Z(h,r+1,0),h.times(h).times(h).eq(u))){i=h;break}c+=4,t=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Z(i,r+1,1),e=!i.times(i).times(i).eq(u));break}return W=!0,Z(i,r,o.rounding,e)};P.decimalPlaces=P.dp=function(){var r,e=this.d,n=NaN;if(e){if(r=e.length-1,n=(r-Mr(this.e/H))*H,r=e[r],r)for(;r%10==0;r/=10)n--;n<0&&(n=0)}return n};P.dividedBy=P.div=function(r){return ir(this,new this.constructor(r))};P.dividedToIntegerBy=P.divToInt=function(r){var e=this,n=e.constructor;return Z(ir(e,new n(r),0,1,1),n.precision,n.rounding)};P.equals=P.eq=function(r){return this.cmp(r)===0};P.floor=function(){return Z(new this.constructor(this),this.e+1,3)};P.greaterThan=P.gt=function(r){return this.cmp(r)>0};P.greaterThanOrEqualTo=P.gte=function(r){var e=this.cmp(r);return e==1||e===0};P.hyperbolicCosine=P.cosh=function(){var r,e,n,i,t,a=this,c=a.constructor,h=new c(1);if(!a.isFinite())return new c(a.s?1/0:NaN);if(a.isZero())return h;n=c.precision,i=c.rounding,c.precision=n+Math.max(a.e,a.sd())+4,c.rounding=1,t=a.d.length,t<32?(r=Math.ceil(t/3),e=(1/Ue(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),a=ce(c,1,a.times(e),new c(1),!0);for(var p,m=r,u=new c(8);m--;)p=a.times(a),a=h.minus(p.times(u.minus(p.times(u))));return Z(a,c.precision=n,c.rounding=i,!0)};P.hyperbolicSine=P.sinh=function(){var r,e,n,i,t=this,a=t.constructor;if(!t.isFinite()||t.isZero())return new a(t);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(t.e,t.sd())+4,a.rounding=1,i=t.d.length,i<3)t=ce(a,2,t,t,!0);else{r=1.4*Math.sqrt(i),r=r>16?16:r|0,t=t.times(1/Ue(5,r)),t=ce(a,2,t,t,!0);for(var c,h=new a(5),p=new a(16),m=new a(20);r--;)c=t.times(t),t=t.times(h.plus(c.times(p.times(c).plus(m))))}return a.precision=e,a.rounding=n,Z(t,e,n,!0)};P.hyperbolicTangent=P.tanh=function(){var r,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(r=i.precision,e=i.rounding,i.precision=r+7,i.rounding=1,ir(n.sinh(),n.cosh(),i.precision=r,i.rounding=e)):new i(n.s)};P.inverseCosine=P.acos=function(){var r,e=this,n=e.constructor,i=e.abs().cmp(1),t=n.precision,a=n.rounding;return i!==-1?i===0?e.isNeg()?qr(n,t,a):new n(0):new n(NaN):e.isZero()?qr(n,t+4,a).times(.5):(n.precision=t+6,n.rounding=1,e=e.asin(),r=qr(n,t+4,a).times(.5),n.precision=t,n.rounding=a,r.minus(e))};P.inverseHyperbolicCosine=P.acosh=function(){var r,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(r=i.precision,e=i.rounding,i.precision=r+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,W=!1,n=n.times(n).minus(1).sqrt().plus(n),W=!0,i.precision=r,i.rounding=e,n.ln()):new i(n)};P.inverseHyperbolicSine=P.asinh=function(){var r,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(r=i.precision,e=i.rounding,i.precision=r+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,W=!1,n=n.times(n).plus(1).sqrt().plus(n),W=!0,i.precision=r,i.rounding=e,n.ln())};P.inverseHyperbolicTangent=P.atanh=function(){var r,e,n,i,t=this,a=t.constructor;return t.isFinite()?t.e>=0?new a(t.abs().eq(1)?t.s/0:t.isZero()?t:NaN):(r=a.precision,e=a.rounding,i=t.sd(),Math.max(i,r)<2*-t.e-1?Z(new a(t),r,e,!0):(a.precision=n=i-t.e,t=ir(t.plus(1),new a(1).minus(t),n+r,1),a.precision=r+4,a.rounding=1,t=t.ln(),a.precision=r,a.rounding=e,t.times(.5))):new a(NaN)};P.inverseSine=P.asin=function(){var r,e,n,i,t=this,a=t.constructor;return t.isZero()?new a(t):(e=t.abs().cmp(1),n=a.precision,i=a.rounding,e!==-1?e===0?(r=qr(a,n+4,i).times(.5),r.s=t.s,r):new a(NaN):(a.precision=n+6,a.rounding=1,t=t.div(new a(1).minus(t.times(t)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=i,t.times(2)))};P.inverseTangent=P.atan=function(){var r,e,n,i,t,a,c,h,p,m=this,u=m.constructor,o=u.precision,f=u.rounding;if(m.isFinite()){if(m.isZero())return new u(m);if(m.abs().eq(1)&&o+4<=nt)return c=qr(u,o+4,f).times(.25),c.s=m.s,c}else{if(!m.s)return new u(NaN);if(o+4<=nt)return c=qr(u,o+4,f).times(.5),c.s=m.s,c}for(u.precision=h=o+10,u.rounding=1,n=Math.min(28,h/H+2|0),r=n;r;--r)m=m.div(m.times(m).plus(1).sqrt().plus(1));for(W=!1,e=Math.ceil(h/H),i=1,p=m.times(m),c=new u(m),t=m;r!==-1;)if(t=t.times(p),a=c.minus(t.div(i+=2)),t=t.times(p),c=a.plus(t.div(i+=2)),c.d[e]!==void 0)for(r=e;c.d[r]===a.d[r]&&r--;);return n&&(c=c.times(2<<n-1)),W=!0,Z(c,u.precision=o,u.rounding=f,!0)};P.isFinite=function(){return!!this.d};P.isInteger=P.isInt=function(){return!!this.d&&Mr(this.e/H)>this.d.length-2};P.isNaN=function(){return!this.s};P.isNegative=P.isNeg=function(){return this.s<0};P.isPositive=P.isPos=function(){return this.s>0};P.isZero=function(){return!!this.d&&this.d[0]===0};P.lessThan=P.lt=function(r){return this.cmp(r)<0};P.lessThanOrEqualTo=P.lte=function(r){return this.cmp(r)<1};P.logarithm=P.log=function(r){var e,n,i,t,a,c,h,p,m=this,u=m.constructor,o=u.precision,f=u.rounding,l=5;if(r==null)r=new u(10),e=!0;else{if(r=new u(r),n=r.d,r.s<0||!n||!n[0]||r.eq(1))return new u(NaN);e=r.eq(10)}if(n=m.d,m.s<0||!n||!n[0]||m.eq(1))return new u(n&&!n[0]?-1/0:m.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(t=n[0];t%10===0;)t/=10;a=t!==1}if(W=!1,h=o+l,c=Wr(m,h),i=e?xe(u,h+10):Wr(r,h),p=ir(c,i,h,1),me(p.d,t=o,f))do if(h+=10,c=Wr(m,h),i=e?xe(u,h+10):Wr(r,h),p=ir(c,i,h,1),!a){+br(p.d).slice(t+1,t+15)+1==1e14&&(p=Z(p,o+1,0));break}while(me(p.d,t+=10,f));return W=!0,Z(p,o,f)};P.minus=P.sub=function(r){var e,n,i,t,a,c,h,p,m,u,o,f,l=this,v=l.constructor;if(r=new v(r),!l.d||!r.d)return!l.s||!r.s?r=new v(NaN):l.d?r.s=-r.s:r=new v(r.d||l.s!==r.s?l:NaN),r;if(l.s!=r.s)return r.s=-r.s,l.plus(r);if(m=l.d,f=r.d,h=v.precision,p=v.rounding,!m[0]||!f[0]){if(f[0])r.s=-r.s;else if(m[0])r=new v(l);else return new v(p===3?-0:0);return W?Z(r,h,p):r}if(n=Mr(r.e/H),u=Mr(l.e/H),m=m.slice(),a=u-n,a){for(o=a<0,o?(e=m,a=-a,c=f.length):(e=f,n=u,c=m.length),i=Math.max(Math.ceil(h/H),c)+2,a>i&&(a=i,e.length=1),e.reverse(),i=a;i--;)e.push(0);e.reverse()}else{for(i=m.length,c=f.length,o=i<c,o&&(c=i),i=0;i<c;i++)if(m[i]!=f[i]){o=m[i]<f[i];break}a=0}for(o&&(e=m,m=f,f=e,r.s=-r.s),c=m.length,i=f.length-c;i>0;--i)m[c++]=0;for(i=f.length;i>a;){if(m[--i]<f[i]){for(t=i;t&&m[--t]===0;)m[t]=Rr-1;--m[t],m[i]+=Rr}m[i]-=f[i]}for(;m[--c]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(r.d=m,r.e=Le(m,n),W?Z(r,h,p):r):new v(p===3?-0:0)};P.modulo=P.mod=function(r){var e,n=this,i=n.constructor;return r=new i(r),!n.d||!r.s||r.d&&!r.d[0]?new i(NaN):!r.d||n.d&&!n.d[0]?Z(new i(n),i.precision,i.rounding):(W=!1,i.modulo==9?(e=ir(n,r.abs(),0,3,1),e.s*=r.s):e=ir(n,r,0,i.modulo,1),e=e.times(r),W=!0,n.minus(e))};P.naturalExponential=P.exp=function(){return it(this)};P.naturalLogarithm=P.ln=function(){return Wr(this)};P.negated=P.neg=function(){var r=new this.constructor(this);return r.s=-r.s,Z(r)};P.plus=P.add=function(r){var e,n,i,t,a,c,h,p,m,u,o=this,f=o.constructor;if(r=new f(r),!o.d||!r.d)return!o.s||!r.s?r=new f(NaN):o.d||(r=new f(r.d||o.s===r.s?o:NaN)),r;if(o.s!=r.s)return r.s=-r.s,o.minus(r);if(m=o.d,u=r.d,h=f.precision,p=f.rounding,!m[0]||!u[0])return u[0]||(r=new f(o)),W?Z(r,h,p):r;if(a=Mr(o.e/H),i=Mr(r.e/H),m=m.slice(),t=a-i,t){for(t<0?(n=m,t=-t,c=u.length):(n=u,i=a,c=m.length),a=Math.ceil(h/H),c=a>c?a+1:c+1,t>c&&(t=c,n.length=1),n.reverse();t--;)n.push(0);n.reverse()}for(c=m.length,t=u.length,c-t<0&&(t=c,n=u,u=m,m=n),e=0;t;)e=(m[--t]=m[t]+u[t]+e)/Rr|0,m[t]%=Rr;for(e&&(m.unshift(e),++i),c=m.length;m[--c]==0;)m.pop();return r.d=m,r.e=Le(m,i),W?Z(r,h,p):r};P.precision=P.sd=function(r){var e,n=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Qr+r);return n.d?(e=En(n.d),r&&n.e+1>e&&(e=n.e+1)):e=NaN,e};P.round=function(){var r=this,e=r.constructor;return Z(new e(r),r.e+1,e.rounding)};P.sine=P.sin=function(){var r,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(r=i.precision,e=i.rounding,i.precision=r+Math.max(n.e,n.sd())+H,i.rounding=1,n=qa(i,On(i,n)),i.precision=r,i.rounding=e,Z(Hr>2?n.neg():n,r,e,!0)):new i(NaN)};P.squareRoot=P.sqrt=function(){var r,e,n,i,t,a,c=this,h=c.d,p=c.e,m=c.s,u=c.constructor;if(m!==1||!h||!h[0])return new u(!m||m<0&&(!h||h[0])?NaN:h?c:1/0);for(W=!1,m=Math.sqrt(+c),m==0||m==1/0?(e=br(h),(e.length+p)%2==0&&(e+="0"),m=Math.sqrt(e),p=Mr((p+1)/2)-(p<0||p%2),m==1/0?e="5e"+p:(e=m.toExponential(),e=e.slice(0,e.indexOf("e")+1)+p),i=new u(e)):i=new u(m.toString()),n=(p=u.precision)+3;;)if(a=i,i=a.plus(ir(c,a,n+2,1)).times(.5),br(a.d).slice(0,n)===(e=br(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!t&&e=="4999"){if(!t&&(Z(a,p+1,0),a.times(a).eq(c))){i=a;break}n+=4,t=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Z(i,p+1,1),r=!i.times(i).eq(c));break}return W=!0,Z(i,p,u.rounding,r)};P.tangent=P.tan=function(){var r,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(r=i.precision,e=i.rounding,i.precision=r+10,i.rounding=1,n=n.sin(),n.s=1,n=ir(n,new i(1).minus(n.times(n)).sqrt(),r+10,0),i.precision=r,i.rounding=e,Z(Hr==2||Hr==4?n.neg():n,r,e,!0)):new i(NaN)};P.times=P.mul=function(r){var e,n,i,t,a,c,h,p,m,u=this,o=u.constructor,f=u.d,l=(r=new o(r)).d;if(r.s*=u.s,!f||!f[0]||!l||!l[0])return new o(!r.s||f&&!f[0]&&!l||l&&!l[0]&&!f?NaN:!f||!l?r.s/0:r.s*0);for(n=Mr(u.e/H)+Mr(r.e/H),p=f.length,m=l.length,p<m&&(a=f,f=l,l=a,c=p,p=m,m=c),a=[],c=p+m,i=c;i--;)a.push(0);for(i=m;--i>=0;){for(e=0,t=p+i;t>i;)h=a[t]+l[i]*f[t-i-1]+e,a[t--]=h%Rr|0,e=h/Rr|0;a[t]=(a[t]+e)%Rr|0}for(;!a[--c];)a.pop();return e?++n:a.shift(),r.d=a,r.e=Le(a,n),W?Z(r,o.precision,o.rounding):r};P.toBinary=function(r,e){return dt(this,2,r,e)};P.toDecimalPlaces=P.toDP=function(r,e){var n=this,i=n.constructor;return n=new i(n),r===void 0?n:(Pr(r,0,kr),e===void 0?e=i.rounding:Pr(e,0,8),Z(n,r+n.e+1,e))};P.toExponential=function(r,e){var n,i=this,t=i.constructor;return r===void 0?n=Vr(i,!0):(Pr(r,0,kr),e===void 0?e=t.rounding:Pr(e,0,8),i=Z(new t(i),r+1,e),n=Vr(i,!0,r+1)),i.isNeg()&&!i.isZero()?"-"+n:n};P.toFixed=function(r,e){var n,i,t=this,a=t.constructor;return r===void 0?n=Vr(t):(Pr(r,0,kr),e===void 0?e=a.rounding:Pr(e,0,8),i=Z(new a(t),r+t.e+1,e),n=Vr(i,!1,r+i.e+1)),t.isNeg()&&!t.isZero()?"-"+n:n};P.toFraction=function(r){var e,n,i,t,a,c,h,p,m,u,o,f,l=this,v=l.d,s=l.constructor;if(!v)return new s(l);if(m=n=new s(1),i=p=new s(0),e=new s(i),a=e.e=En(v)-l.e-1,c=a%H,e.d[0]=dr(10,c<0?H+c:c),r==null)r=a>0?e:m;else{if(h=new s(r),!h.isInt()||h.lt(m))throw Error(Qr+h);r=h.gt(e)?a>0?e:m:h}for(W=!1,h=new s(br(v)),u=s.precision,s.precision=a=v.length*H*2;o=ir(h,e,0,1,1),t=n.plus(o.times(i)),t.cmp(r)!=1;)n=i,i=t,t=m,m=p.plus(o.times(t)),p=t,t=e,e=h.minus(o.times(t)),h=t;return t=ir(r.minus(n),i,0,1,1),p=p.plus(t.times(m)),n=n.plus(t.times(i)),p.s=m.s=l.s,f=ir(m,i,a,1).minus(l).abs().cmp(ir(p,n,a,1).minus(l).abs())<1?[m,i]:[p,n],s.precision=u,W=!0,f};P.toHexadecimal=P.toHex=function(r,e){return dt(this,16,r,e)};P.toNearest=function(r,e){var n=this,i=n.constructor;if(n=new i(n),r==null){if(!n.d)return n;r=new i(1),e=i.rounding}else{if(r=new i(r),e===void 0?e=i.rounding:Pr(e,0,8),!n.d)return r.s?n:r;if(!r.d)return r.s&&(r.s=n.s),r}return r.d[0]?(W=!1,n=ir(n,r,0,e,1).times(r),W=!0,Z(n)):(r.s=n.s,n=r),n};P.toNumber=function(){return+this};P.toOctal=function(r,e){return dt(this,8,r,e)};P.toPower=P.pow=function(r){var e,n,i,t,a,c,h=this,p=h.constructor,m=+(r=new p(r));if(!h.d||!r.d||!h.d[0]||!r.d[0])return new p(dr(+h,m));if(h=new p(h),h.eq(1))return h;if(i=p.precision,a=p.rounding,r.eq(1))return Z(h,i,a);if(e=Mr(r.e/H),e>=r.d.length-1&&(n=m<0?-m:m)<=Fa)return t=Sn(p,h,n,i),r.s<0?new p(1).div(t):Z(t,i,a);if(c=h.s,c<0){if(e<r.d.length-1)return new p(NaN);if((r.d[e]&1)==0&&(c=1),h.e==0&&h.d[0]==1&&h.d.length==1)return h.s=c,h}return n=dr(+h,m),e=n==0||!isFinite(n)?Mr(m*(Math.log("0."+br(h.d))/Math.LN10+h.e+1)):new p(n+"").e,e>p.maxE+1||e<p.minE-1?new p(e>0?c/0:0):(W=!1,p.rounding=h.s=1,n=Math.min(12,(e+"").length),t=it(r.times(Wr(h,i+n)),i),t.d&&(t=Z(t,i+5,1),me(t.d,i,a)&&(e=i+10,t=Z(it(r.times(Wr(h,e+n)),e),e+5,1),+br(t.d).slice(i+1,i+15)+1==1e14&&(t=Z(t,i+1,0)))),t.s=c,W=!0,p.rounding=a,Z(t,i,a))};P.toPrecision=function(r,e){var n,i=this,t=i.constructor;return r===void 0?n=Vr(i,i.e<=t.toExpNeg||i.e>=t.toExpPos):(Pr(r,1,kr),e===void 0?e=t.rounding:Pr(e,0,8),i=Z(new t(i),r,e),n=Vr(i,r<=i.e||i.e<=t.toExpNeg,r)),i.isNeg()&&!i.isZero()?"-"+n:n};P.toSignificantDigits=P.toSD=function(r,e){var n=this,i=n.constructor;return r===void 0?(r=i.precision,e=i.rounding):(Pr(r,1,kr),e===void 0?e=i.rounding:Pr(e,0,8)),Z(new i(n),r,e)};P.toString=function(){var r=this,e=r.constructor,n=Vr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+n:n};P.truncated=P.trunc=function(){return Z(new this.constructor(this),this.e+1,1)};P.valueOf=P.toJSON=function(){var r=this,e=r.constructor,n=Vr(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+n:n};function br(r){var e,n,i,t=r.length-1,a="",c=r[0];if(t>0){for(a+=c,e=1;e<t;e++)i=r[e]+"",n=H-i.length,n&&(a+=Gr(n)),a+=i;c=r[e],i=c+"",n=H-i.length,n&&(a+=Gr(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return a+c}function Pr(r,e,n){if(r!==~~r||r<e||r>n)throw Error(Qr+r)}function me(r,e,n,i){var t,a,c,h;for(a=r[0];a>=10;a/=10)--e;return--e<0?(e+=H,t=0):(t=Math.ceil((e+1)/H),e%=H),a=dr(10,H-e),h=r[t]%a|0,i==null?e<3?(e==0?h=h/100|0:e==1&&(h=h/10|0),c=n<4&&h==99999||n>3&&h==49999||h==5e4||h==0):c=(n<4&&h+1==a||n>3&&h+1==a/2)&&(r[t+1]/a/100|0)==dr(10,e-2)-1||(h==a/2||h==0)&&(r[t+1]/a/100|0)==0:e<4?(e==0?h=h/1e3|0:e==1?h=h/100|0:e==2&&(h=h/10|0),c=(i||n<4)&&h==9999||!i&&n>3&&h==4999):c=((i||n<4)&&h+1==a||!i&&n>3&&h+1==a/2)&&(r[t+1]/a/1e3|0)==dr(10,e-3)-1,c}function Me(r,e,n){for(var i,t=[0],a,c=0,h=r.length;c<h;){for(a=t.length;a--;)t[a]*=e;for(t[0]+=et.indexOf(r.charAt(c++)),i=0;i<t.length;i++)t[i]>n-1&&(t[i+1]===void 0&&(t[i+1]=0),t[i+1]+=t[i]/n|0,t[i]%=n)}return t.reverse()}function za(r,e){var n,i,t;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),t=(1/Ue(4,n)).toString()):(n=16,t="2.3283064365386962890625e-10"),r.precision+=n,e=ce(r,1,e.times(t),new r(1));for(var a=n;a--;){var c=e.times(e);e=c.times(c).minus(c).times(8).plus(1)}return r.precision-=n,e}var ir=function(){function r(i,t,a){var c,h=0,p=i.length;for(i=i.slice();p--;)c=i[p]*t+h,i[p]=c%a|0,h=c/a|0;return h&&i.unshift(h),i}function e(i,t,a,c){var h,p;if(a!=c)p=a>c?1:-1;else for(h=p=0;h<a;h++)if(i[h]!=t[h]){p=i[h]>t[h]?1:-1;break}return p}function n(i,t,a,c){for(var h=0;a--;)i[a]-=h,h=i[a]<t[a]?1:0,i[a]=h*c+i[a]-t[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,t,a,c,h,p){var m,u,o,f,l,v,s,d,g,M,_,b,w,y,S,N,E,C,x,D,B=i.constructor,z=i.s==t.s?1:-1,q=i.d,F=t.d;if(!q||!q[0]||!F||!F[0])return new B(!i.s||!t.s||(q?F&&q[0]==F[0]:!F)?NaN:q&&q[0]==0||!F?z*0:z/0);for(p?(l=1,u=i.e-t.e):(p=Rr,l=H,u=Mr(i.e/l)-Mr(t.e/l)),x=F.length,E=q.length,g=new B(z),M=g.d=[],o=0;F[o]==(q[o]||0);o++);if(F[o]>(q[o]||0)&&u--,a==null?(y=a=B.precision,c=B.rounding):h?y=a+(i.e-t.e)+1:y=a,y<0)M.push(1),v=!0;else{if(y=y/l+2|0,o=0,x==1){for(f=0,F=F[0],y++;(o<E||f)&&y--;o++)S=f*p+(q[o]||0),M[o]=S/F|0,f=S%F|0;v=f||o<E}else{for(f=p/(F[0]+1)|0,f>1&&(F=r(F,f,p),q=r(q,f,p),x=F.length,E=q.length),N=x,_=q.slice(0,x),b=_.length;b<x;)_[b++]=0;D=F.slice(),D.unshift(0),C=F[0],F[1]>=p/2&&++C;do f=0,m=e(F,_,x,b),m<0?(w=_[0],x!=b&&(w=w*p+(_[1]||0)),f=w/C|0,f>1?(f>=p&&(f=p-1),s=r(F,f,p),d=s.length,b=_.length,m=e(s,_,d,b),m==1&&(f--,n(s,x<d?D:F,d,p))):(f==0&&(m=f=1),s=F.slice()),d=s.length,d<b&&s.unshift(0),n(_,s,b,p),m==-1&&(b=_.length,m=e(F,_,x,b),m<1&&(f++,n(_,x<b?D:F,b,p))),b=_.length):m===0&&(f++,_=[0]),M[o++]=f,m&&_[0]?_[b++]=q[N]||0:(_=[q[N]],b=1);while((N++<E||_[0]!==void 0)&&y--);v=_[0]!==void 0}M[0]||M.shift()}if(l==1)g.e=u,yn=v;else{for(o=1,f=M[0];f>=10;f/=10)o++;g.e=o+u*l-1,Z(g,h?a+g.e+1:a,c,v)}return g}}();function Z(r,e,n,i){var t,a,c,h,p,m,u,o,f,l=r.constructor;r:if(e!=null){if(o=r.d,!o)return r;for(t=1,h=o[0];h>=10;h/=10)t++;if(a=e-t,a<0)a+=H,c=e,u=o[f=0],p=u/dr(10,t-c-1)%10|0;else if(f=Math.ceil((a+1)/H),h=o.length,f>=h)if(i){for(;h++<=f;)o.push(0);u=p=0,t=1,a%=H,c=a-H+1}else break r;else{for(u=h=o[f],t=1;h>=10;h/=10)t++;a%=H,c=a-H+t,p=c<0?0:u/dr(10,t-c-1)%10|0}if(i=i||e<0||o[f+1]!==void 0||(c<0?u:u%dr(10,t-c-1)),m=n<4?(p||i)&&(n==0||n==(r.s<0?3:2)):p>5||p==5&&(n==4||i||n==6&&(a>0?c>0?u/dr(10,t-c):0:o[f-1])%10&1||n==(r.s<0?8:7)),e<1||!o[0])return o.length=0,m?(e-=r.e+1,o[0]=dr(10,(H-e%H)%H),r.e=-e||0):o[0]=r.e=0,r;if(a==0?(o.length=f,h=1,f--):(o.length=f+1,h=dr(10,H-a),o[f]=c>0?(u/dr(10,t-c)%dr(10,c)|0)*h:0),m)for(;;)if(f==0){for(a=1,c=o[0];c>=10;c/=10)a++;for(c=o[0]+=h,h=1;c>=10;c/=10)h++;a!=h&&(r.e++,o[0]==Rr&&(o[0]=1));break}else{if(o[f]+=h,o[f]!=Rr)break;o[f--]=0,h=1}for(a=o.length;o[--a]===0;)o.pop()}return W&&(r.e>l.maxE?(r.d=null,r.e=NaN):r.e<l.minE&&(r.e=0,r.d=[0])),r}function Vr(r,e,n){if(!r.isFinite())return Tn(r);var i,t=r.e,a=br(r.d),c=a.length;return e?(n&&(i=n-c)>0?a=a.charAt(0)+"."+a.slice(1)+Gr(i):c>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r.e<0?"e":"e+")+r.e):t<0?(a="0."+Gr(-t-1)+a,n&&(i=n-c)>0&&(a+=Gr(i))):t>=c?(a+=Gr(t+1-c),n&&(i=n-t-1)>0&&(a=a+"."+Gr(i))):((i=t+1)<c&&(a=a.slice(0,i)+"."+a.slice(i)),n&&(i=n-c)>0&&(t+1===c&&(a+="."),a+=Gr(i))),a}function Le(r,e){var n=r[0];for(e*=H;n>=10;n/=10)e++;return e}function xe(r,e,n){if(e>Da)throw W=!0,n&&(r.precision=n),Error(_n);return Z(new r(Ce),e,1,!0)}function qr(r,e,n){if(e>nt)throw Error(_n);return Z(new r(Ie),e,n,!0)}function En(r){var e=r.length-1,n=e*H+1;if(e=r[e],e){for(;e%10==0;e/=10)n--;for(e=r[0];e>=10;e/=10)n++}return n}function Gr(r){for(var e="";r--;)e+="0";return e}function Sn(r,e,n,i){var t,a=new r(1),c=Math.ceil(i/H+4);for(W=!1;;){if(n%2&&(a=a.times(e),It(a.d,c)&&(t=!0)),n=Mr(n/2),n===0){n=a.d.length-1,t&&a.d[n]===0&&++a.d[n];break}e=e.times(e),It(e.d,c)}return W=!0,a}function Ct(r){return r.d[r.d.length-1]&1}function An(r,e,n){for(var i,t=new r(e[0]),a=0;++a<e.length;)if(i=new r(e[a]),i.s)t[n](i)&&(t=i);else{t=i;break}return t}function it(r,e){var n,i,t,a,c,h,p,m=0,u=0,o=0,f=r.constructor,l=f.rounding,v=f.precision;if(!r.d||!r.d[0]||r.e>17)return new f(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:0/0);for(e==null?(W=!1,p=v):p=e,h=new f(.03125);r.e>-2;)r=r.times(h),o+=5;for(i=Math.log(dr(2,o))/Math.LN10*2+5|0,p+=i,n=a=c=new f(1),f.precision=p;;){if(a=Z(a.times(r),p,1),n=n.times(++u),h=c.plus(ir(a,n,p,1)),br(h.d).slice(0,p)===br(c.d).slice(0,p)){for(t=o;t--;)c=Z(c.times(c),p,1);if(e==null)if(m<3&&me(c.d,p-i,l,m))f.precision=p+=10,n=a=h=new f(1),u=0,m++;else return Z(c,f.precision=v,l,W=!0);else return f.precision=v,c}c=h}}function Wr(r,e){var n,i,t,a,c,h,p,m,u,o,f,l=1,v=10,s=r,d=s.d,g=s.constructor,M=g.rounding,_=g.precision;if(s.s<0||!d||!d[0]||!s.e&&d[0]==1&&d.length==1)return new g(d&&!d[0]?-1/0:s.s!=1?NaN:d?0:s);if(e==null?(W=!1,u=_):u=e,g.precision=u+=v,n=br(d),i=n.charAt(0),Math.abs(a=s.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)s=s.times(r),n=br(s.d),i=n.charAt(0),l++;a=s.e,i>1?(s=new g("0."+n),a++):s=new g(i+"."+n.slice(1))}else return m=xe(g,u+2,_).times(a+""),s=Wr(new g(i+"."+n.slice(1)),u-v).plus(m),g.precision=_,e==null?Z(s,_,M,W=!0):s;for(o=s,p=c=s=ir(s.minus(1),s.plus(1),u,1),f=Z(s.times(s),u,1),t=3;;){if(c=Z(c.times(f),u,1),m=p.plus(ir(c,new g(t),u,1)),br(m.d).slice(0,u)===br(p.d).slice(0,u))if(p=p.times(2),a!==0&&(p=p.plus(xe(g,u+2,_).times(a+""))),p=ir(p,new g(l),u,1),e==null)if(me(p.d,u-v,M,h))g.precision=u+=v,m=c=s=ir(o.minus(1),o.plus(1),u,1),f=Z(s.times(s),u,1),t=h=1;else return Z(p,g.precision=_,M,W=!0);else return g.precision=_,p;p=m,t+=2}}function Tn(r){return String(r.s*r.s/0)}function at(r,e){var n,i,t;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(t=e.length;e.charCodeAt(t-1)===48;--t);if(e=e.slice(i,t),e){if(t-=i,r.e=n=n-i-1,r.d=[],i=(n+1)%H,n<0&&(i+=H),i<t){for(i&&r.d.push(+e.slice(0,i)),t-=H;i<t;)r.d.push(+e.slice(i,i+=H));e=e.slice(i),i=H-e.length}else i-=t;for(;i--;)e+="0";r.d.push(+e),W&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function Ba(r,e){var n,i,t,a,c,h,p,m,u;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Mn.test(e))return at(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(xa.test(e))n=16,e=e.toLowerCase();else if(Ia.test(e))n=2;else if(Pa.test(e))n=8;else throw Error(Qr+e);for(a=e.search(/p/i),a>0?(p=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),c=a>=0,i=r.constructor,c&&(e=e.replace(".",""),h=e.length,a=h-a,t=Sn(i,new i(n),a,a*2)),m=Me(e,n,Rr),u=m.length-1,a=u;m[a]===0;--a)m.pop();return a<0?new i(r.s*0):(r.e=Le(m,u),r.d=m,W=!1,c&&(r=ir(r,t,h*4)),p&&(r=r.times(Math.abs(p)<54?dr(2,p):le.pow(2,p))),W=!0,r)}function qa(r,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:ce(r,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/Ue(5,n)),e=ce(r,2,e,e);for(var t,a=new r(5),c=new r(16),h=new r(20);n--;)t=e.times(e),e=e.times(a.plus(t.times(c.times(t).minus(h))));return e}function ce(r,e,n,i,t){var a,c,h,p,m=r.precision,u=Math.ceil(m/H);for(W=!1,p=n.times(n),h=new r(i);;){if(c=ir(h.times(p),new r(e++*e++),m,1),h=t?i.plus(c):i.minus(c),i=ir(c.times(p),new r(e++*e++),m,1),c=h.plus(i),c.d[u]!==void 0){for(a=u;c.d[a]===h.d[a]&&a--;);if(a==-1)break}a=h,h=i,i=c,c=a}return W=!0,c.d.length=u+1,c}function Ue(r,e){for(var n=r;--e;)n*=r;return n}function On(r,e){var n,i=e.s<0,t=qr(r,r.precision,1),a=t.times(.5);if(e=e.abs(),e.lte(a))return Hr=i?4:1,e;if(n=e.divToInt(t),n.isZero())Hr=i?3:2;else{if(e=e.minus(n.times(t)),e.lte(a))return Hr=Ct(n)?i?2:3:i?4:1,e;Hr=Ct(n)?i?1:4:i?3:2}return e.minus(t).abs()}function dt(r,e,n,i){var t,a,c,h,p,m,u,o,f,l=r.constructor,v=n!==void 0;if(v?(Pr(n,1,kr),i===void 0?i=l.rounding:Pr(i,0,8)):(n=l.precision,i=l.rounding),!r.isFinite())u=Tn(r);else{for(u=Vr(r),c=u.indexOf("."),v?(t=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):t=e,c>=0&&(u=u.replace(".",""),f=new l(1),f.e=u.length-c,f.d=Me(Vr(f),10,t),f.e=f.d.length),o=Me(u,10,t),a=p=o.length;o[--p]==0;)o.pop();if(!o[0])u=v?"0p+0":"0";else{if(c<0?a--:(r=new l(r),r.d=o,r.e=a,r=ir(r,f,n,i,0,t),o=r.d,a=r.e,m=yn),c=o[n],h=t/2,m=m||o[n+1]!==void 0,m=i<4?(c!==void 0||m)&&(i===0||i===(r.s<0?3:2)):c>h||c===h&&(i===4||m||i===6&&o[n-1]&1||i===(r.s<0?8:7)),o.length=n,m)for(;++o[--n]>t-1;)o[n]=0,n||(++a,o.unshift(1));for(p=o.length;!o[p-1];--p);for(c=0,u="";c<p;c++)u+=et.charAt(o[c]);if(v){if(p>1)if(e==16||e==8){for(c=e==16?4:3,--p;p%c;p++)u+="0";for(o=Me(u,t,e),p=o.length;!o[p-1];--p);for(c=1,u="1.";c<p;c++)u+=et.charAt(o[c])}else u=u.charAt(0)+"."+u.slice(1);u=u+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)u="0"+u;u="0."+u}else if(++a>p)for(a-=p;a--;)u+="0";else a<p&&(u=u.slice(0,a)+"."+u.slice(a))}u=(e==16?"0x":e==2?"0b":e==8?"0o":"")+u}return r.s<0?"-"+u:u}function It(r,e){if(r.length>e)return r.length=e,!0}function Ra(r){return new this(r).abs()}function La(r){return new this(r).acos()}function Ua(r){return new this(r).acosh()}function $a(r,e){return new this(r).plus(e)}function Za(r){return new this(r).asin()}function Va(r){return new this(r).asinh()}function Ya(r){return new this(r).atan()}function Xa(r){return new this(r).atanh()}function Ha(r,e){r=new this(r),e=new this(e);var n,i=this.precision,t=this.rounding,a=i+4;return!r.s||!e.s?n=new this(NaN):!r.d&&!e.d?(n=qr(this,a,1).times(e.s>0?.25:.75),n.s=r.s):!e.d||r.isZero()?(n=e.s<0?qr(this,i,t):new this(0),n.s=r.s):!r.d||e.isZero()?(n=qr(this,a,1).times(.5),n.s=r.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(ir(r,e,a,1)),e=qr(this,a,1),this.precision=i,this.rounding=t,n=r.s<0?n.minus(e):n.plus(e)):n=this.atan(ir(r,e,a,1)),n}function ja(r){return new this(r).cbrt()}function Ga(r){return Z(r=new this(r),r.e+1,2)}function Wa(r,e,n){return new this(r).clamp(e,n)}function Ja(r){if(!r||typeof r!="object")throw Error(Re+"Object expected");var e,n,i,t=r.defaults===!0,a=["precision",1,kr,"rounding",0,8,"toExpNeg",-ue,0,"toExpPos",0,ue,"maxE",0,ue,"minE",-ue,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],t&&(this[n]=tt[n]),(i=r[n])!==void 0)if(Mr(i)===i&&i>=a[e+1]&&i<=a[e+2])this[n]=i;else throw Error(Qr+n+": "+i);if(n="crypto",t&&(this[n]=tt[n]),(i=r[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(bn);else this[n]=!1;else throw Error(Qr+n+": "+i);return this}function Ka(r){return new this(r).cos()}function Qa(r){return new this(r).cosh()}function Cn(r){var e,n,i;function t(a){var c,h,p,m=this;if(!(m instanceof t))return new t(a);if(m.constructor=t,xt(a)){m.s=a.s,W?!a.d||a.e>t.maxE?(m.e=NaN,m.d=null):a.e<t.minE?(m.e=0,m.d=[0]):(m.e=a.e,m.d=a.d.slice()):(m.e=a.e,m.d=a.d?a.d.slice():a.d);return}if(p=typeof a,p==="number"){if(a===0){m.s=1/a<0?-1:1,m.e=0,m.d=[0];return}if(a<0?(a=-a,m.s=-1):m.s=1,a===~~a&&a<1e7){for(c=0,h=a;h>=10;h/=10)c++;W?c>t.maxE?(m.e=NaN,m.d=null):c<t.minE?(m.e=0,m.d=[0]):(m.e=c,m.d=[a]):(m.e=c,m.d=[a]);return}else if(a*0!==0){a||(m.s=NaN),m.e=NaN,m.d=null;return}return at(m,a.toString())}else if(p!=="string")throw Error(Qr+a);return(h=a.charCodeAt(0))===45?(a=a.slice(1),m.s=-1):(h===43&&(a=a.slice(1)),m.s=1),Mn.test(a)?at(m,a):Ba(m,a)}if(t.prototype=P,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=t.set=Ja,t.clone=Cn,t.isDecimal=xt,t.abs=Ra,t.acos=La,t.acosh=Ua,t.add=$a,t.asin=Za,t.asinh=Va,t.atan=Ya,t.atanh=Xa,t.atan2=Ha,t.cbrt=ja,t.ceil=Ga,t.clamp=Wa,t.cos=Ka,t.cosh=Qa,t.div=ka,t.exp=ro,t.floor=eo,t.hypot=to,t.ln=no,t.log=io,t.log10=oo,t.log2=ao,t.max=so,t.min=uo,t.mod=fo,t.mul=co,t.pow=lo,t.random=ho,t.round=po,t.sign=vo,t.sin=mo,t.sinh=go,t.sqrt=wo,t.sub=yo,t.sum=_o,t.tan=bo,t.tanh=No,t.trunc=Mo,r===void 0&&(r={}),r&&r.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)r.hasOwnProperty(n=i[e++])||(r[n]=this[n]);return t.config(r),t}function ka(r,e){return new this(r).div(e)}function ro(r){return new this(r).exp()}function eo(r){return Z(r=new this(r),r.e+1,3)}function to(){var r,e,n=new this(0);for(W=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return W=!0,new this(1/0);n=e}return W=!0,n.sqrt()}function xt(r){return r instanceof le||r&&r.toStringTag===Nn||!1}function no(r){return new this(r).ln()}function io(r,e){return new this(r).log(e)}function ao(r){return new this(r).log(2)}function oo(r){return new this(r).log(10)}function so(){return An(this,arguments,"lt")}function uo(){return An(this,arguments,"gt")}function fo(r,e){return new this(r).mod(e)}function co(r,e){return new this(r).mul(e)}function lo(r,e){return new this(r).pow(e)}function ho(r){var e,n,i,t,a=0,c=new this(1),h=[];if(r===void 0?r=this.precision:Pr(r,1,kr),i=Math.ceil(r/H),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));a<i;)t=e[a],t>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:h[a++]=t%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);a<i;)t=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),t>=214e7?crypto.randomBytes(4).copy(e,a):(h.push(t%1e7),a+=4);a=i/4}else throw Error(bn);else for(;a<i;)h[a++]=Math.random()*1e7|0;for(i=h[--a],r%=H,i&&r&&(t=dr(10,H-r),h[a]=(i/t|0)*t);h[a]===0;a--)h.pop();if(a<0)n=0,h=[0];else{for(n=-1;h[0]===0;n-=H)h.shift();for(i=1,t=h[0];t>=10;t/=10)i++;i<H&&(n-=H-i)}return c.e=n,c.d=h,c}function po(r){return Z(r=new this(r),r.e+1,this.rounding)}function vo(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function mo(r){return new this(r).sin()}function go(r){return new this(r).sinh()}function wo(r){return new this(r).sqrt()}function yo(r,e){return new this(r).sub(e)}function _o(){var r=0,e=arguments,n=new this(e[r]);for(W=!1;n.s&&++r<e.length;)n=n.plus(e[r]);return W=!0,Z(n,this.precision,this.rounding)}function bo(r){return new this(r).tan()}function No(r){return new this(r).tanh()}function Mo(r){return Z(r=new this(r),r.e+1,1)}P[Symbol.for("nodejs.util.inspect.custom")]=P.toString;P[Symbol.toStringTag]="Decimal";var le=P.constructor=Cn(tt);Ce=new le(Ce);Ie=new le(Ie);var Eo="BigNumber",So=["?on","config"],Ao=k(Eo,So,r=>{var{on:e,config:n}=r,i=le.clone({precision:n.precision,modulo:le.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(t){return new i(t.value)},e&&e("config",function(t,a){t.precision!==a.precision&&i.config({precision:t.precision})}),i},{isClass:!0}),In={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(n){var i=Math.cosh||function(o){return Math.abs(o)<1e-9?1-o:(Math.exp(o)+Math.exp(-o))*.5},t=Math.sinh||function(o){return Math.abs(o)<1e-9?o:(Math.exp(o)-Math.exp(-o))*.5},a=function(o){var f=Math.PI/4;if(-f>o||o>f)return Math.cos(o)-1;var l=o*o;return l*(l*(l*(l*(l*(l*(l*(l/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},c=function(o,f){var l=Math.abs(o),v=Math.abs(f);return l<3e3&&v<3e3?Math.sqrt(l*l+v*v):(l<v?(l=v,v=o/f):v=f/o,l*Math.sqrt(1+v*v))},h=function(){throw SyntaxError("Invalid Param")};function p(o,f){var l=Math.abs(o),v=Math.abs(f);return o===0?Math.log(v):f===0?Math.log(l):l<3e3&&v<3e3?Math.log(o*o+f*f)*.5:(o=o/2,f=f/2,.5*Math.log(o*o+f*f)+Math.LN2)}var m=function(o,f){var l={re:0,im:0};if(o==null)l.re=l.im=0;else if(f!==void 0)l.re=o,l.im=f;else switch(typeof o){case"object":if("im"in o&&"re"in o)l.re=o.re,l.im=o.im;else if("abs"in o&&"arg"in o){if(!Number.isFinite(o.abs)&&Number.isFinite(o.arg))return u.INFINITY;l.re=o.abs*Math.cos(o.arg),l.im=o.abs*Math.sin(o.arg)}else if("r"in o&&"phi"in o){if(!Number.isFinite(o.r)&&Number.isFinite(o.phi))return u.INFINITY;l.re=o.r*Math.cos(o.phi),l.im=o.r*Math.sin(o.phi)}else o.length===2?(l.re=o[0],l.im=o[1]):h();break;case"string":l.im=l.re=0;var v=o.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),s=1,d=0;v===null&&h();for(var g=0;g<v.length;g++){var M=v[g];M===" "||M==="	"||M===`
`||(M==="+"?s++:M==="-"?d++:M==="i"||M==="I"?(s+d===0&&h(),v[g+1]!==" "&&!isNaN(v[g+1])?(l.im+=parseFloat((d%2?"-":"")+v[g+1]),g++):l.im+=parseFloat((d%2?"-":"")+"1"),s=d=0):((s+d===0||isNaN(M))&&h(),v[g+1]==="i"||v[g+1]==="I"?(l.im+=parseFloat((d%2?"-":"")+M),g++):l.re+=parseFloat((d%2?"-":"")+M),s=d=0))}s+d>0&&h();break;case"number":l.im=0,l.re=o;break;default:h()}return isNaN(l.re)||isNaN(l.im),l};function u(o,f){if(!(this instanceof u))return new u(o,f);var l=m(o,f);this.re=l.re,this.im=l.im}u.prototype={re:0,im:0,sign:function(){var o=this.abs();return new u(this.re/o,this.im/o)},add:function(o,f){var l=new u(o,f);return this.isInfinite()&&l.isInfinite()?u.NAN:this.isInfinite()||l.isInfinite()?u.INFINITY:new u(this.re+l.re,this.im+l.im)},sub:function(o,f){var l=new u(o,f);return this.isInfinite()&&l.isInfinite()?u.NAN:this.isInfinite()||l.isInfinite()?u.INFINITY:new u(this.re-l.re,this.im-l.im)},mul:function(o,f){var l=new u(o,f);return this.isInfinite()&&l.isZero()||this.isZero()&&l.isInfinite()?u.NAN:this.isInfinite()||l.isInfinite()?u.INFINITY:l.im===0&&this.im===0?new u(this.re*l.re,0):new u(this.re*l.re-this.im*l.im,this.re*l.im+this.im*l.re)},div:function(o,f){var l=new u(o,f);if(this.isZero()&&l.isZero()||this.isInfinite()&&l.isInfinite())return u.NAN;if(this.isInfinite()||l.isZero())return u.INFINITY;if(this.isZero()||l.isInfinite())return u.ZERO;o=this.re,f=this.im;var v=l.re,s=l.im,d,g;return s===0?new u(o/v,f/v):Math.abs(v)<Math.abs(s)?(g=v/s,d=v*g+s,new u((o*g+f)/d,(f*g-o)/d)):(g=s/v,d=s*g+v,new u((o+f*g)/d,(f-o*g)/d))},pow:function(o,f){var l=new u(o,f);if(o=this.re,f=this.im,l.isZero())return u.ONE;if(l.im===0){if(f===0&&o>0)return new u(Math.pow(o,l.re),0);if(o===0)switch((l.re%4+4)%4){case 0:return new u(Math.pow(f,l.re),0);case 1:return new u(0,Math.pow(f,l.re));case 2:return new u(-Math.pow(f,l.re),0);case 3:return new u(0,-Math.pow(f,l.re))}}if(o===0&&f===0&&l.re>0&&l.im>=0)return u.ZERO;var v=Math.atan2(f,o),s=p(o,f);return o=Math.exp(l.re*s-l.im*v),f=l.im*s+l.re*v,new u(o*Math.cos(f),o*Math.sin(f))},sqrt:function(){var o=this.re,f=this.im,l=this.abs(),v,s;if(o>=0){if(f===0)return new u(Math.sqrt(o),0);v=.5*Math.sqrt(2*(l+o))}else v=Math.abs(f)/Math.sqrt(2*(l-o));return o<=0?s=.5*Math.sqrt(2*(l-o)):s=Math.abs(f)/Math.sqrt(2*(l+o)),new u(v,f<0?-s:s)},exp:function(){var o=Math.exp(this.re);return this.im,new u(o*Math.cos(this.im),o*Math.sin(this.im))},expm1:function(){var o=this.re,f=this.im;return new u(Math.expm1(o)*Math.cos(f)+a(f),Math.exp(o)*Math.sin(f))},log:function(){var o=this.re,f=this.im;return new u(p(o,f),Math.atan2(f,o))},abs:function(){return c(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var o=this.re,f=this.im;return new u(Math.sin(o)*i(f),Math.cos(o)*t(f))},cos:function(){var o=this.re,f=this.im;return new u(Math.cos(o)*i(f),-Math.sin(o)*t(f))},tan:function(){var o=2*this.re,f=2*this.im,l=Math.cos(o)+i(f);return new u(Math.sin(o)/l,t(f)/l)},cot:function(){var o=2*this.re,f=2*this.im,l=Math.cos(o)-i(f);return new u(-Math.sin(o)/l,t(f)/l)},sec:function(){var o=this.re,f=this.im,l=.5*i(2*f)+.5*Math.cos(2*o);return new u(Math.cos(o)*i(f)/l,Math.sin(o)*t(f)/l)},csc:function(){var o=this.re,f=this.im,l=.5*i(2*f)-.5*Math.cos(2*o);return new u(Math.sin(o)*i(f)/l,-Math.cos(o)*t(f)/l)},asin:function(){var o=this.re,f=this.im,l=new u(f*f-o*o+1,-2*o*f).sqrt(),v=new u(l.re-f,l.im+o).log();return new u(v.im,-v.re)},acos:function(){var o=this.re,f=this.im,l=new u(f*f-o*o+1,-2*o*f).sqrt(),v=new u(l.re-f,l.im+o).log();return new u(Math.PI/2-v.im,v.re)},atan:function(){var o=this.re,f=this.im;if(o===0){if(f===1)return new u(0,1/0);if(f===-1)return new u(0,-1/0)}var l=o*o+(1-f)*(1-f),v=new u((1-f*f-o*o)/l,-2*o/l).log();return new u(-.5*v.im,.5*v.re)},acot:function(){var o=this.re,f=this.im;if(f===0)return new u(Math.atan2(1,o),0);var l=o*o+f*f;return l!==0?new u(o/l,-f/l).atan():new u(o!==0?o/0:0,f!==0?-f/0:0).atan()},asec:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new u(0,1/0);var l=o*o+f*f;return l!==0?new u(o/l,-f/l).acos():new u(o!==0?o/0:0,f!==0?-f/0:0).acos()},acsc:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new u(Math.PI/2,1/0);var l=o*o+f*f;return l!==0?new u(o/l,-f/l).asin():new u(o!==0?o/0:0,f!==0?-f/0:0).asin()},sinh:function(){var o=this.re,f=this.im;return new u(t(o)*Math.cos(f),i(o)*Math.sin(f))},cosh:function(){var o=this.re,f=this.im;return new u(i(o)*Math.cos(f),t(o)*Math.sin(f))},tanh:function(){var o=2*this.re,f=2*this.im,l=i(o)+Math.cos(f);return new u(t(o)/l,Math.sin(f)/l)},coth:function(){var o=2*this.re,f=2*this.im,l=i(o)-Math.cos(f);return new u(t(o)/l,-Math.sin(f)/l)},csch:function(){var o=this.re,f=this.im,l=Math.cos(2*f)-i(2*o);return new u(-2*t(o)*Math.cos(f)/l,2*i(o)*Math.sin(f)/l)},sech:function(){var o=this.re,f=this.im,l=Math.cos(2*f)+i(2*o);return new u(2*i(o)*Math.cos(f)/l,-2*t(o)*Math.sin(f)/l)},asinh:function(){var o=this.im;this.im=-this.re,this.re=o;var f=this.asin();return this.re=-this.im,this.im=o,o=f.re,f.re=-f.im,f.im=o,f},acosh:function(){var o=this.acos();if(o.im<=0){var f=o.re;o.re=-o.im,o.im=f}else{var f=o.im;o.im=-o.re,o.re=f}return o},atanh:function(){var o=this.re,f=this.im,l=o>1&&f===0,v=1-o,s=1+o,d=v*v+f*f,g=d!==0?new u((s*v-f*f)/d,(f*v+s*f)/d):new u(o!==-1?o/0:0,f!==0?f/0:0),M=g.re;return g.re=p(g.re,g.im)/2,g.im=Math.atan2(g.im,M)/2,l&&(g.im=-g.im),g},acoth:function(){var o=this.re,f=this.im;if(o===0&&f===0)return new u(0,Math.PI/2);var l=o*o+f*f;return l!==0?new u(o/l,-f/l).atanh():new u(o!==0?o/0:0,f!==0?-f/0:0).atanh()},acsch:function(){var o=this.re,f=this.im;if(f===0)return new u(o!==0?Math.log(o+Math.sqrt(o*o+1)):1/0,0);var l=o*o+f*f;return l!==0?new u(o/l,-f/l).asinh():new u(o!==0?o/0:0,f!==0?-f/0:0).asinh()},asech:function(){var o=this.re,f=this.im;if(this.isZero())return u.INFINITY;var l=o*o+f*f;return l!==0?new u(o/l,-f/l).acosh():new u(o!==0?o/0:0,f!==0?-f/0:0).acosh()},inverse:function(){if(this.isZero())return u.INFINITY;if(this.isInfinite())return u.ZERO;var o=this.re,f=this.im,l=o*o+f*f;return new u(o/l,-f/l)},conjugate:function(){return new u(this.re,-this.im)},neg:function(){return new u(-this.re,-this.im)},ceil:function(o){return o=Math.pow(10,o||0),new u(Math.ceil(this.re*o)/o,Math.ceil(this.im*o)/o)},floor:function(o){return o=Math.pow(10,o||0),new u(Math.floor(this.re*o)/o,Math.floor(this.im*o)/o)},round:function(o){return o=Math.pow(10,o||0),new u(Math.round(this.re*o)/o,Math.round(this.im*o)/o)},equals:function(o,f){var l=new u(o,f);return Math.abs(l.re-this.re)<=u.EPSILON&&Math.abs(l.im-this.im)<=u.EPSILON},clone:function(){return new u(this.re,this.im)},toString:function(){var o=this.re,f=this.im,l="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(o)<u.EPSILON&&(o=0),Math.abs(f)<u.EPSILON&&(f=0),f===0?l+o:(o!==0?(l+=o,l+=" ",f<0?(f=-f,l+="-"):l+="+",l+=" "):f<0&&(f=-f,l+="-"),f!==1&&(l+=f),l+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},u.ZERO=new u(0,0),u.ONE=new u(1,0),u.I=new u(0,1),u.PI=new u(Math.PI,0),u.E=new u(Math.E,0),u.INFINITY=new u(1/0,1/0),u.NAN=new u(NaN,NaN),u.EPSILON=1e-15,Object.defineProperty(u,"__esModule",{value:!0}),u.default=u,u.Complex=u,r.exports=u})()})(In);var Cr=Ht(In.exports),To="Complex",Oo=[],Co=k(To,Oo,()=>(Cr.prototype.type="Complex",Cr.prototype.isComplex=!0,Cr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Cr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Cr.prototype.format=function(r){var e="",n=this.im,i=this.re,t=ke(this.re,r),a=ke(this.im,r),c=lr(r)?r:r?r.precision:null;if(c!==null){var h=Math.pow(10,-c);Math.abs(i/n)<h&&(i=0),Math.abs(n/i)<h&&(n=0)}return n===0?e=t:i===0?n===1?e="i":n===-1?e="-i":e=a+"i":n<0?n===-1?e=t+" - i":e=t+" - "+a.substring(1)+"i":n===1?e=t+" + i":e=t+" + "+a+"i",e},Cr.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Cr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],i=arguments[1];if(lr(n)){if(pt(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),lr(i))return new Cr({r:n,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Cr.prototype.valueOf=Cr.prototype.toString,Cr.fromJSON=function(r){return new Cr(r)},Cr.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},Cr),{isClass:!0}),xn={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(r,e){(function(n){var i=2e3,t={s:1,n:0,d:1};function a(v,s){if(isNaN(v=parseInt(v,10)))throw l.InvalidParameter;return v*s}function c(v,s){if(s===0)throw l.DivisionByZero;var d=Object.create(l.prototype);d.s=v<0?-1:1,v=v<0?-v:v;var g=f(v,s);return d.n=v/g,d.d=s/g,d}function h(v){for(var s={},d=v,g=2,M=4;M<=d;){for(;d%g===0;)d/=g,s[g]=(s[g]||0)+1;M+=1+2*g++}return d!==v?d>1&&(s[d]=(s[d]||0)+1):s[v]=(s[v]||0)+1,s}var p=function(v,s){var d=0,g=1,M=1,_=0,b=0,w=0,y=1,S=1,N=0,E=1,C=1,x=1,D=1e7,B;if(v!=null)if(s!==void 0){if(d=v,g=s,M=d*g,d%1!==0||g%1!==0)throw l.NonIntegerParameter}else switch(typeof v){case"object":{if("d"in v&&"n"in v)d=v.n,g=v.d,"s"in v&&(d*=v.s);else if(0 in v)d=v[0],1 in v&&(g=v[1]);else throw l.InvalidParameter;M=d*g;break}case"number":{if(v<0&&(M=v,v=-v),v%1===0)d=v;else if(v>0){for(v>=1&&(S=Math.pow(10,Math.floor(1+Math.log(v)/Math.LN10)),v/=S);E<=D&&x<=D;)if(B=(N+C)/(E+x),v===B){E+x<=D?(d=N+C,g=E+x):x>E?(d=C,g=x):(d=N,g=E);break}else v>B?(N+=C,E+=x):(C+=N,x+=E),E>D?(d=C,g=x):(d=N,g=E);d*=S}else(isNaN(v)||isNaN(s))&&(g=d=NaN);break}case"string":{if(E=v.match(/\d+|./g),E===null)throw l.InvalidParameter;if(E[N]==="-"?(M=-1,N++):E[N]==="+"&&N++,E.length===N+1?b=a(E[N++],M):E[N+1]==="."||E[N]==="."?(E[N]!=="."&&(_=a(E[N++],M)),N++,(N+1===E.length||E[N+1]==="("&&E[N+3]===")"||E[N+1]==="'"&&E[N+3]==="'")&&(b=a(E[N],M),y=Math.pow(10,E[N].length),N++),(E[N]==="("&&E[N+2]===")"||E[N]==="'"&&E[N+2]==="'")&&(w=a(E[N+1],M),S=Math.pow(10,E[N+1].length)-1,N+=3)):E[N+1]==="/"||E[N+1]===":"?(b=a(E[N],M),y=a(E[N+2],1),N+=3):E[N+3]==="/"&&E[N+1]===" "&&(_=a(E[N],M),b=a(E[N+2],M),y=a(E[N+4],1),N+=5),E.length<=N){g=y*S,M=d=w+g*_+S*b;break}}default:throw l.InvalidParameter}if(g===0)throw l.DivisionByZero;t.s=M<0?-1:1,t.n=Math.abs(d),t.d=Math.abs(g)};function m(v,s,d){for(var g=1;s>0;v=v*v%d,s>>=1)s&1&&(g=g*v%d);return g}function u(v,s){for(;s%2===0;s/=2);for(;s%5===0;s/=5);if(s===1)return 0;for(var d=10%s,g=1;d!==1;g++)if(d=d*10%s,g>i)return 0;return g}function o(v,s,d){for(var g=1,M=m(10,d,s),_=0;_<300;_++){if(g===M)return _;g=g*10%s,M=M*10%s}return 0}function f(v,s){if(!v)return s;if(!s)return v;for(;;){if(v%=s,!v)return s;if(s%=v,!s)return v}}function l(v,s){if(p(v,s),this instanceof l)v=f(t.d,t.n),this.s=t.s,this.n=t.n/v,this.d=t.d/v;else return c(t.s*t.n,t.d)}l.DivisionByZero=new Error("Division by Zero"),l.InvalidParameter=new Error("Invalid argument"),l.NonIntegerParameter=new Error("Parameters must be integer"),l.prototype={s:1,n:0,d:1,abs:function(){return c(this.n,this.d)},neg:function(){return c(-this.s*this.n,this.d)},add:function(v,s){return p(v,s),c(this.s*this.n*t.d+t.s*this.d*t.n,this.d*t.d)},sub:function(v,s){return p(v,s),c(this.s*this.n*t.d-t.s*this.d*t.n,this.d*t.d)},mul:function(v,s){return p(v,s),c(this.s*t.s*this.n*t.n,this.d*t.d)},div:function(v,s){return p(v,s),c(this.s*t.s*this.n*t.d,this.d*t.n)},clone:function(){return c(this.s*this.n,this.d)},mod:function(v,s){if(isNaN(this.n)||isNaN(this.d))return new l(NaN);if(v===void 0)return c(this.s*this.n%this.d,1);if(p(v,s),t.n===0&&this.d===0)throw l.DivisionByZero;return c(this.s*(t.d*this.n)%(t.n*this.d),t.d*this.d)},gcd:function(v,s){return p(v,s),c(f(t.n,this.n)*f(t.d,this.d),t.d*this.d)},lcm:function(v,s){return p(v,s),t.n===0&&this.n===0?c(0,1):c(t.n*this.n,f(t.n,this.n)*f(t.d,this.d))},ceil:function(v){return v=Math.pow(10,v||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):c(Math.ceil(v*this.s*this.n/this.d),v)},floor:function(v){return v=Math.pow(10,v||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):c(Math.floor(v*this.s*this.n/this.d),v)},round:function(v){return v=Math.pow(10,v||0),isNaN(this.n)||isNaN(this.d)?new l(NaN):c(Math.round(v*this.s*this.n/this.d),v)},inverse:function(){return c(this.s*this.d,this.n)},pow:function(v,s){if(p(v,s),t.d===1)return t.s<0?c(Math.pow(this.s*this.d,t.n),Math.pow(this.n,t.n)):c(Math.pow(this.s*this.n,t.n),Math.pow(this.d,t.n));if(this.s<0)return null;var d=h(this.n),g=h(this.d),M=1,_=1;for(var b in d)if(b!=="1"){if(b==="0"){M=0;break}if(d[b]*=t.n,d[b]%t.d===0)d[b]/=t.d;else return null;M*=Math.pow(b,d[b])}for(var b in g)if(b!=="1"){if(g[b]*=t.n,g[b]%t.d===0)g[b]/=t.d;else return null;_*=Math.pow(b,g[b])}return t.s<0?c(_,M):c(M,_)},equals:function(v,s){return p(v,s),this.s*this.n*t.d===t.s*t.n*this.d},compare:function(v,s){p(v,s);var d=this.s*this.n*t.d-t.s*t.n*this.d;return(0<d)-(d<0)},simplify:function(v){if(isNaN(this.n)||isNaN(this.d))return this;v=v||.001;for(var s=this.abs(),d=s.toContinued(),g=1;g<d.length;g++){for(var M=c(d[g-1],1),_=g-2;_>=0;_--)M=M.inverse().add(d[_]);if(M.sub(s).abs().valueOf()<v)return M.mul(this.s)}return this},divisible:function(v,s){return p(v,s),!(!(t.n*this.d)||this.n*t.d%(t.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(v){var s,d="",g=this.n,M=this.d;return this.s<0&&(d+="-"),M===1?d+=g:(v&&(s=Math.floor(g/M))>0&&(d+=s,d+=" ",g%=M),d+=g,d+="/",d+=M),d},toLatex:function(v){var s,d="",g=this.n,M=this.d;return this.s<0&&(d+="-"),M===1?d+=g:(v&&(s=Math.floor(g/M))>0&&(d+=s,g%=M),d+="\\frac{",d+=g,d+="}{",d+=M,d+="}"),d},toContinued:function(){var v,s=this.n,d=this.d,g=[];if(isNaN(s)||isNaN(d))return g;do g.push(Math.floor(s/d)),v=s%d,s=d,d=v;while(s!==1);return g},toString:function(v){var s=this.n,d=this.d;if(isNaN(s)||isNaN(d))return"NaN";v=v||15;var g=u(s,d),M=o(s,d,g),_=this.s<0?"-":"";if(_+=s/d|0,s%=d,s*=10,s&&(_+="."),g){for(var b=M;b--;)_+=s/d|0,s%=d,s*=10;_+="(";for(var b=g;b--;)_+=s/d|0,s%=d,s*=10;_+=")"}else for(var b=v;s&&b--;)_+=s/d|0,s%=d,s*=10;return _}},Object.defineProperty(l,"__esModule",{value:!0}),l.default=l,l.Fraction=l,r.exports=l})()})(xn);var se=Ht(xn.exports),Io="Fraction",xo=[],Po=k(Io,xo,()=>(se.prototype.type="Fraction",se.prototype.isFraction=!0,se.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},se.fromJSON=function(r){return new se(r)},se),{isClass:!0}),Fo="Matrix",Do=[],zo=k(Fo,Do,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,n,i){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,n,i){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0}),Bo="DenseMatrix",qo=["Matrix"],Ro=k(Bo,qo,r=>{var{Matrix:e}=r;function n(u,o){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(o&&!Yr(o))throw new Error("Invalid datatype: "+o);if(Ar(u))u.type==="DenseMatrix"?(this._data=yr(u._data),this._size=yr(u._size),this._datatype=o||u._datatype):(this._data=u.toArray(),this._size=u.size(),this._datatype=o||u._datatype);else if(u&&ur(u.data)&&ur(u.size))this._data=u.data,this._size=u.size,Tt(this._data,this._size),this._datatype=o||u.datatype;else if(ur(u))this._data=m(u),this._size=ie(this._data),Tt(this._data,this._size),this._datatype=o;else{if(u)throw new TypeError("Unsupported type of data ("+Jr(u)+")");this._data=[],this._size=[0],this._datatype=o}}n.prototype=new e,n.prototype.createDenseMatrix=function(u,o){return new n(u,o)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Oe(this._data,Jr)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(u,o){return new n(u,o)},n.prototype.subset=function(u,o,f){switch(arguments.length){case 1:return i(this,u);case 2:case 3:return a(this,u,o,f);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(u){if(!ur(u))throw new TypeError("Array expected");if(u.length!==this._size.length)throw new tr(u.length,this._size.length);for(var o=0;o<u.length;o++)fr(u[o],this._size[o]);for(var f=this._data,l=0,v=u.length;l<v;l++){var s=u[l];fr(s,f.length),f=f[s]}return f},n.prototype.set=function(u,o,f){if(!ur(u))throw new TypeError("Array expected");if(u.length<this._size.length)throw new tr(u.length,this._size.length,"<");var l,v,s,d=u.map(function(M){return M+1});p(this,d,f);var g=this._data;for(l=0,v=u.length-1;l<v;l++)s=u[l],fr(s,g.length),g=g[s];return s=u[u.length-1],fr(s,g.length),g[s]=o,this};function i(u,o){if(!ze(o))throw new TypeError("Invalid index");var f=o.isScalar();if(f)return u.get(o.min());var l=o.size();if(l.length!==u._size.length)throw new tr(l.length,u._size.length);for(var v=o.min(),s=o.max(),d=0,g=u._size.length;d<g;d++)fr(v[d],u._size[d]),fr(s[d],u._size[d]);return new n(t(u._data,o,l.length,0),u._datatype)}function t(u,o,f,l){var v=l===f-1,s=o.dimension(l);return v?s.map(function(d){return fr(d,u.length),u[d]}).valueOf():s.map(function(d){fr(d,u.length);var g=u[d];return t(g,o,f,l+1)}).valueOf()}function a(u,o,f,l){if(!o||o.isIndex!==!0)throw new TypeError("Invalid index");var v=o.size(),s=o.isScalar(),d;if(Ar(f)?(d=f.size(),f=f.valueOf()):d=ie(f),s){if(d.length!==0)throw new TypeError("Scalar expected");u.set(o.min(),f,l)}else{if(v.length<u._size.length)throw new tr(v.length,u._size.length,"<");if(d.length<v.length){for(var g=0,M=0;v[g]===1&&d[g]===1;)g++;for(;v[g]===1;)M++,g++;f=vn(f,v.length,M,d)}if(!Ae(v,d))throw new tr(v,d,">");var _=o.max().map(function(y){return y+1});p(u,_,l);var b=v.length,w=0;c(u._data,o,f,b,w)}return u}function c(u,o,f,l,v){var s=v===l-1,d=o.dimension(v);s?d.forEach(function(g,M){fr(g),u[g]=f[M[0]]}):d.forEach(function(g,M){fr(g),c(u[g],o,f[M[0]],l,v+1)})}n.prototype.resize=function(u,o,f){if(!tn(u))throw new TypeError("Array or Matrix expected");var l=u.valueOf().map(s=>Array.isArray(s)&&s.length===1?s[0]:s),v=f?this.clone():this;return h(v,l,o)};function h(u,o,f){if(o.length===0){for(var l=u._data;ur(l);)l=l[0];return l}return u._size=o.slice(0),u._data=Ot(u._data,u._size,f),u}n.prototype.reshape=function(u,o){var f=o?this.clone():this;f._data=pa(f._data,u);var l=f._size.reduce((v,s)=>v*s);return f._size=vt(u,l),f};function p(u,o,f){for(var l=u._size.slice(0),v=!1;l.length<o.length;)l.push(0),v=!0;for(var s=0,d=o.length;s<d;s++)o[s]>l[s]&&(l[s]=o[s],v=!0);v&&h(u,l,f)}n.prototype.clone=function(){var u=new n({data:yr(this._data),size:yr(this._size),datatype:this._datatype});return u},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(u){var o=this,f=function s(d,g){return ur(d)?d.map(function(M,_){return s(M,g.concat(_))}):u(d,g,o)},l=f(this._data,[]),v=this._datatype!==void 0?Oe(l,Jr):void 0;return new n(l,v)},n.prototype.forEach=function(u){var o=this,f=function l(v,s){ur(v)?v.forEach(function(d,g){l(d,s.concat(g))}):u(v,s,o)};f(this._data,[])},n.prototype[Symbol.iterator]=function*(){var u=function*o(f,l){if(ur(f))for(var v=0;v<f.length;v++)yield*o(f[v],l.concat(v));else yield{value:f,index:l}};yield*u(this._data,[])},n.prototype.rows=function(){var u=[],o=this.size();if(o.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var l of f)u.push(new n([l],this._datatype));return u},n.prototype.columns=function(){var u=this,o=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var l=this._data,v=function(g){var M=l.map(_=>[_[g]]);o.push(new n(M,u._datatype))},s=0;s<f[1];s++)v(s);return o},n.prototype.toArray=function(){return yr(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(u){return Ir(this._data,u)},n.prototype.toString=function(){return Ir(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(u){if(u){if(Dr(u)&&(u=u.toNumber()),!lr(u)||!_r(u))throw new TypeError("The parameter k must be an integer number")}else u=0;for(var o=u>0?u:0,f=u<0?-u:0,l=this._size[0],v=this._size[1],s=Math.min(l-f,v-o),d=[],g=0;g<s;g++)d[g]=this._data[g+f][g+o];return new n({data:d,size:[s],datatype:this._datatype})},n.diagonal=function(u,o,f,l){if(!ur(u))throw new TypeError("Array expected, size parameter");if(u.length!==2)throw new Error("Only two dimensions matrix are supported");if(u=u.map(function(S){if(Dr(S)&&(S=S.toNumber()),!lr(S)||!_r(S)||S<1)throw new Error("Size values must be positive integers");return S}),f){if(Dr(f)&&(f=f.toNumber()),!lr(f)||!_r(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var v=f>0?f:0,s=f<0?-f:0,d=u[0],g=u[1],M=Math.min(d-s,g-v),_;if(ur(o)){if(o.length!==M)throw new Error("Invalid value array length");_=function(N){return o[N]}}else if(Ar(o)){var b=o.size();if(b.length!==1||b[0]!==M)throw new Error("Invalid matrix length");_=function(N){return o.get([N])}}else _=function(){return o};l||(l=Dr(_(0))?_(0).mul(0):0);var w=[];if(u.length>0){w=Ot(w,u,l);for(var y=0;y<M;y++)w[y+s][y+v]=_(y)}return new n({data:w,size:[d,g]})},n.fromJSON=function(u){return new n(u)},n.prototype.swapRows=function(u,o){if(!lr(u)||!_r(u)||!lr(o)||!_r(o))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return fr(u,this._size[0]),fr(o,this._size[0]),n._swapRows(u,o,this._data),this},n._swapRows=function(u,o,f){var l=f[u];f[u]=f[o],f[o]=l};function m(u){for(var o=0,f=u.length;o<f;o++){var l=u[o];ur(l)?u[o]=m(l):l&&l.isMatrix===!0&&(u[o]=m(l.valueOf()))}return u}return n},{isClass:!0});function re(r,e,n){return r&&typeof r.map=="function"?r.map(function(i){return re(i,e)}):e(r)}var Pn="number",Fn="number, number";function Dn(r){return Math.abs(r)}Dn.signature=Pn;function zn(r,e){return r+e}zn.signature=Fn;function Bn(r,e){return r*e}Bn.signature=Fn;function qn(r){return-r}qn.signature=Pn;function Lo(r,e,n){if(n==null)return r.eq(e);if(r.eq(e))return!0;if(r.isNaN()||e.isNaN())return!1;if(r.isFinite()&&e.isFinite()){var i=r.minus(e).abs();if(i.isZero())return!0;var t=r.constructor.max(r.abs(),e.abs());return i.lte(t.times(n))}return!1}function Uo(r,e,n){return Te(r.re,e.re,n)&&Te(r.im,e.im,n)}var Pe="equalScalar",$o=["typed","config"],Zo=k(Pe,$o,r=>{var{typed:e,config:n}=r;return e(Pe,{"boolean, boolean":function(t,a){return t===a},"number, number":function(t,a){return Te(t,a,n.epsilon)},"BigNumber, BigNumber":function(t,a){return t.eq(a)||Lo(t,a,n.epsilon)},"Fraction, Fraction":function(t,a){return t.equals(a)},"Complex, Complex":function(t,a){return Uo(t,a,n.epsilon)},"Unit, Unit":function(t,a){if(!t.equalBase(a))throw new Error("Cannot compare units with different base");return this(t.value,a.value)}})});k(Pe,["typed","config"],r=>{var{typed:e,config:n}=r;return e(Pe,{"number, number":function(t,a){return Te(t,a,n.epsilon)}})});var Vo="SparseMatrix",Yo=["typed","equalScalar","Matrix"],Xo=k(Vo,Yo,r=>{var{typed:e,equalScalar:n,Matrix:i}=r;function t(s,d){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!Yr(d))throw new Error("Invalid datatype: "+d);if(Ar(s))a(this,s,d);else if(s&&ur(s.index)&&ur(s.ptr)&&ur(s.size))this._values=s.values,this._index=s.index,this._ptr=s.ptr,this._size=s.size,this._datatype=d||s.datatype;else if(ur(s))c(this,s,d);else{if(s)throw new TypeError("Unsupported type of data ("+Jr(s)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=d}}function a(s,d,g){d.type==="SparseMatrix"?(s._values=d._values?yr(d._values):void 0,s._index=yr(d._index),s._ptr=yr(d._ptr),s._size=yr(d._size),s._datatype=g||d._datatype):c(s,d.valueOf(),g||d._datatype)}function c(s,d,g){s._values=[],s._index=[],s._ptr=[],s._datatype=g;var M=d.length,_=0,b=n,w=0;if(Yr(g)&&(b=e.find(n,[g,g])||n,w=e.convert(0,g)),M>0){var y=0;do{s._ptr.push(s._index.length);for(var S=0;S<M;S++){var N=d[S];if(ur(N)){if(y===0&&_<N.length&&(_=N.length),y<N.length){var E=N[y];b(E,w)||(s._values.push(E),s._index.push(S))}}else y===0&&_<1&&(_=1),b(N,w)||(s._values.push(N),s._index.push(S))}y++}while(y<_)}s._ptr.push(s._index.length),s._size=[M,_]}t.prototype=new i,t.prototype.createSparseMatrix=function(s,d){return new t(s,d)},t.prototype.type="SparseMatrix",t.prototype.isSparseMatrix=!0,t.prototype.getDataType=function(){return Oe(this._values,Jr)},t.prototype.storage=function(){return"sparse"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(s,d){return new t(s,d)},t.prototype.density=function(){var s=this._size[0],d=this._size[1];return s!==0&&d!==0?this._index.length/(s*d):0},t.prototype.subset=function(s,d,g){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return h(this,s);case 2:case 3:return p(this,s,d,g);default:throw new SyntaxError("Wrong number of arguments")}};function h(s,d){if(!ze(d))throw new TypeError("Invalid index");var g=d.isScalar();if(g)return s.get(d.min());var M=d.size();if(M.length!==s._size.length)throw new tr(M.length,s._size.length);var _,b,w,y,S=d.min(),N=d.max();for(_=0,b=s._size.length;_<b;_++)fr(S[_],s._size[_]),fr(N[_],s._size[_]);var E=s._values,C=s._index,x=s._ptr,D=d.dimension(0),B=d.dimension(1),z=[],q=[];D.forEach(function(Y,J){q[Y]=J[0],z[Y]=!0});var F=E?[]:void 0,V=[],U=[];return B.forEach(function(Y){for(U.push(V.length),w=x[Y],y=x[Y+1];w<y;w++)_=C[w],z[_]===!0&&(V.push(q[_]),F&&F.push(E[w]))}),U.push(V.length),new t({values:F,index:V,ptr:U,size:M,datatype:s._datatype})}function p(s,d,g,M){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var _=d.size(),b=d.isScalar(),w;if(Ar(g)?(w=g.size(),g=g.toArray()):w=ie(g),b){if(w.length!==0)throw new TypeError("Scalar expected");s.set(d.min(),g,M)}else{if(_.length!==1&&_.length!==2)throw new tr(_.length,s._size.length,"<");if(w.length<_.length){for(var y=0,S=0;_[y]===1&&w[y]===1;)y++;for(;_[y]===1;)S++,y++;g=vn(g,_.length,S,w)}if(!Ae(_,w))throw new tr(_,w,">");if(_.length===1){var N=d.dimension(0);N.forEach(function(x,D){fr(x),s.set([x,0],g[D[0]],M)})}else{var E=d.dimension(0),C=d.dimension(1);E.forEach(function(x,D){fr(x),C.forEach(function(B,z){fr(B),s.set([x,B],g[D[0]][z[0]],M)})})}}return s}t.prototype.get=function(s){if(!ur(s))throw new TypeError("Array expected");if(s.length!==this._size.length)throw new tr(s.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var d=s[0],g=s[1];fr(d,this._size[0]),fr(g,this._size[1]);var M=m(d,this._ptr[g],this._ptr[g+1],this._index);return M<this._ptr[g+1]&&this._index[M]===d?this._values[M]:0},t.prototype.set=function(s,d,g){if(!ur(s))throw new TypeError("Array expected");if(s.length!==this._size.length)throw new tr(s.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var M=s[0],_=s[1],b=this._size[0],w=this._size[1],y=n,S=0;Yr(this._datatype)&&(y=e.find(n,[this._datatype,this._datatype])||n,S=e.convert(0,this._datatype)),(M>b-1||_>w-1)&&(f(this,Math.max(M+1,b),Math.max(_+1,w),g),b=this._size[0],w=this._size[1]),fr(M,b),fr(_,w);var N=m(M,this._ptr[_],this._ptr[_+1],this._index);return N<this._ptr[_+1]&&this._index[N]===M?y(d,S)?u(N,_,this._values,this._index,this._ptr):this._values[N]=d:o(N,M,_,d,this._values,this._index,this._ptr),this};function m(s,d,g,M){if(g-d===0)return g;for(var _=d;_<g;_++)if(M[_]===s)return _;return d}function u(s,d,g,M,_){g.splice(s,1),M.splice(s,1);for(var b=d+1;b<_.length;b++)_[b]--}function o(s,d,g,M,_,b,w){_.splice(s,0,M),b.splice(s,0,d);for(var y=g+1;y<w.length;y++)w[y]++}t.prototype.resize=function(s,d,g){if(!tn(s))throw new TypeError("Array or Matrix expected");var M=s.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b);if(M.length!==2)throw new Error("Only two dimensions matrix are supported");M.forEach(function(b){if(!lr(b)||!_r(b)||b<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ir(M)+")")});var _=g?this.clone():this;return f(_,M[0],M[1],d)};function f(s,d,g,M){var _=M||0,b=n,w=0;Yr(s._datatype)&&(b=e.find(n,[s._datatype,s._datatype])||n,w=e.convert(0,s._datatype),_=e.convert(_,s._datatype));var y=!b(_,w),S=s._size[0],N=s._size[1],E,C,x;if(g>N){for(C=N;C<g;C++)if(s._ptr[C]=s._values.length,y)for(E=0;E<S;E++)s._values.push(_),s._index.push(E);s._ptr[g]=s._values.length}else g<N&&(s._ptr.splice(g+1,N-g),s._values.splice(s._ptr[g],s._values.length),s._index.splice(s._ptr[g],s._index.length));if(N=g,d>S){if(y){var D=0;for(C=0;C<N;C++){s._ptr[C]=s._ptr[C]+D,x=s._ptr[C+1]+D;var B=0;for(E=S;E<d;E++,B++)s._values.splice(x+B,0,_),s._index.splice(x+B,0,E),D++}s._ptr[N]=s._values.length}}else if(d<S){var z=0;for(C=0;C<N;C++){s._ptr[C]=s._ptr[C]-z;var q=s._ptr[C],F=s._ptr[C+1]-z;for(x=q;x<F;x++)E=s._index[x],E>d-1&&(s._values.splice(x,1),s._index.splice(x,1),z++)}s._ptr[C]=s._values.length}return s._size[0]=d,s._size[1]=g,s}t.prototype.reshape=function(s,d){if(!ur(s))throw new TypeError("Array expected");if(s.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");s.forEach(function(Y){if(!lr(Y)||!_r(Y)||Y<=-2||Y===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ir(s)+")")});var g=this._size[0]*this._size[1];s=vt(s,g);var M=s[0]*s[1];if(g!==M)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var _=d?this.clone():this;if(this._size[0]===s[0]&&this._size[1]===s[1])return _;for(var b=[],w=0;w<_._ptr.length;w++)for(var y=0;y<_._ptr[w+1]-_._ptr[w];y++)b.push(w);for(var S=_._values.slice(),N=_._index.slice(),E=0;E<_._index.length;E++){var C=N[E],x=b[E],D=C*_._size[1]+x;b[E]=D%s[1],N[E]=Math.floor(D/s[1])}_._values.length=0,_._index.length=0,_._ptr.length=s[1]+1,_._size=s.slice();for(var B=0;B<_._ptr.length;B++)_._ptr[B]=0;for(var z=0;z<S.length;z++){var q=N[z],F=b[z],V=S[z],U=m(q,_._ptr[F],_._ptr[F+1],_._index);o(U,q,F,V,_._values,_._index,_._ptr)}return _},t.prototype.clone=function(){var s=new t({values:this._values?yr(this._values):void 0,index:yr(this._index),ptr:yr(this._ptr),size:yr(this._size),datatype:this._datatype});return s},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(s,d){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var g=this,M=this._size[0],_=this._size[1],b=function(y,S,N){return s(y,[S,N],g)};return l(this,0,M-1,0,_-1,b,d)};function l(s,d,g,M,_,b,w){var y=[],S=[],N=[],E=n,C=0;Yr(s._datatype)&&(E=e.find(n,[s._datatype,s._datatype])||n,C=e.convert(0,s._datatype));for(var x=function(Q,hr,pr){Q=b(Q,hr,pr),E(Q,C)||(y.push(Q),S.push(hr))},D=M;D<=_;D++){N.push(y.length);var B=s._ptr[D],z=s._ptr[D+1];if(w)for(var q=B;q<z;q++){var F=s._index[q];F>=d&&F<=g&&x(s._values[q],F-d,D-M)}else{for(var V={},U=B;U<z;U++){var Y=s._index[U];V[Y]=s._values[U]}for(var J=d;J<=g;J++){var rr=J in V?V[J]:0;x(rr,J-d,D-M)}}}return N.push(y.length),new t({values:y,index:S,ptr:N,size:[g-d+1,_-M+1]})}t.prototype.forEach=function(s,d){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var g=this,M=this._size[0],_=this._size[1],b=0;b<_;b++){var w=this._ptr[b],y=this._ptr[b+1];if(d)for(var S=w;S<y;S++){var N=this._index[S];s(this._values[S],[N,b],g)}else{for(var E={},C=w;C<y;C++){var x=this._index[C];E[x]=this._values[C]}for(var D=0;D<M;D++){var B=D in E?E[D]:0;s(B,[D,b],g)}}}},t.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var s=this._size[1],d=0;d<s;d++)for(var g=this._ptr[d],M=this._ptr[d+1],_=g;_<M;_++){var b=this._index[_];yield{value:this._values[_],index:[b,d]}}},t.prototype.toArray=function(){return v(this._values,this._index,this._ptr,this._size,!0)},t.prototype.valueOf=function(){return v(this._values,this._index,this._ptr,this._size,!1)};function v(s,d,g,M,_){var b=M[0],w=M[1],y=[],S,N;for(S=0;S<b;S++)for(y[S]=[],N=0;N<w;N++)y[S][N]=0;for(N=0;N<w;N++)for(var E=g[N],C=g[N+1],x=E;x<C;x++)S=d[x],y[S][N]=s?_?yr(s[x]):s[x]:1;return y}return t.prototype.format=function(s){for(var d=this._size[0],g=this._size[1],M=this.density(),_="Sparse Matrix ["+Ir(d,s)+" x "+Ir(g,s)+"] density: "+Ir(M,s)+`
`,b=0;b<g;b++)for(var w=this._ptr[b],y=this._ptr[b+1],S=w;S<y;S++){var N=this._index[S];_+=`
    (`+Ir(N,s)+", "+Ir(b,s)+") ==> "+(this._values?Ir(this._values[S],s):"X")}return _},t.prototype.toString=function(){return Ir(this.toArray())},t.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(s){if(s){if(Dr(s)&&(s=s.toNumber()),!lr(s)||!_r(s))throw new TypeError("The parameter k must be an integer number")}else s=0;var d=s>0?s:0,g=s<0?-s:0,M=this._size[0],_=this._size[1],b=Math.min(M-g,_-d),w=[],y=[],S=[];S[0]=0;for(var N=d;N<_&&w.length<b;N++)for(var E=this._ptr[N],C=this._ptr[N+1],x=E;x<C;x++){var D=this._index[x];if(D===N-d+g){w.push(this._values[x]),y[w.length-1]=D-g;break}}return S.push(w.length),new t({values:w,index:y,ptr:S,size:[b,1]})},t.fromJSON=function(s){return new t(s)},t.diagonal=function(s,d,g,M,_){if(!ur(s))throw new TypeError("Array expected, size parameter");if(s.length!==2)throw new Error("Only two dimensions matrix are supported");if(s=s.map(function(Y){if(Dr(Y)&&(Y=Y.toNumber()),!lr(Y)||!_r(Y)||Y<1)throw new Error("Size values must be positive integers");return Y}),g){if(Dr(g)&&(g=g.toNumber()),!lr(g)||!_r(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var b=n,w=0;Yr(_)&&(b=e.find(n,[_,_])||n,w=e.convert(0,_));var y=g>0?g:0,S=g<0?-g:0,N=s[0],E=s[1],C=Math.min(N-S,E-y),x;if(ur(d)){if(d.length!==C)throw new Error("Invalid value array length");x=function(J){return d[J]}}else if(Ar(d)){var D=d.size();if(D.length!==1||D[0]!==C)throw new Error("Invalid matrix length");x=function(J){return d.get([J])}}else x=function(){return d};for(var B=[],z=[],q=[],F=0;F<E;F++){q.push(B.length);var V=F-y;if(V>=0&&V<C){var U=x(V);b(U,w)||(z.push(V+S),B.push(U))}}return q.push(B.length),new t({values:B,index:z,ptr:q,size:[N,E]})},t.prototype.swapRows=function(s,d){if(!lr(s)||!_r(s)||!lr(d)||!_r(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return fr(s,this._size[0]),fr(d,this._size[0]),t._swapRows(s,d,this._size[1],this._values,this._index,this._ptr),this},t._forEachRow=function(s,d,g,M,_){for(var b=M[s],w=M[s+1],y=b;y<w;y++)_(g[y],d[y])},t._swapRows=function(s,d,g,M,_,b){for(var w=0;w<g;w++){var y=b[w],S=b[w+1],N=m(s,y,S,_),E=m(d,y,S,_);if(N<S&&E<S&&_[N]===s&&_[E]===d){if(M){var C=M[N];M[N]=M[E],M[E]=C}continue}if(N<S&&_[N]===s&&(E>=S||_[E]!==d)){var x=M?M[N]:void 0;_.splice(E,0,d),M&&M.splice(E,0,x),_.splice(E<=N?N+1:N,1),M&&M.splice(E<=N?N+1:N,1);continue}if(E<S&&_[E]===d&&(N>=S||_[N]!==s)){var D=M?M[E]:void 0;_.splice(N,0,s),M&&M.splice(N,0,D),_.splice(N<=E?E+1:E,1),M&&M.splice(N<=E?E+1:E,1)}}},t},{isClass:!0}),Ho="number",jo=["typed"];function Go(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],i=e[2],t=e[3];return{input:r,radix:n,integerPart:i,fractionalPart:t}}else return null}function Wo(r){for(var e=parseInt(r.integerPart,r.radix),n=0,i=0;i<r.fractionalPart.length;i++){var t=parseInt(r.fractionalPart[i],r.radix);n+=t/Math.pow(r.radix,i+1)}var a=e+n;if(isNaN(a))throw new SyntaxError('String "'+r.input+'" is no valid number');return a}var Jo=k(Ho,jo,r=>{var{typed:e}=r,n=e("number",{"":function(){return 0},number:function(t){return t},string:function(t){if(t==="NaN")return NaN;var a=Go(t);if(a)return Wo(a);var c=0,h=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);h&&(c=Number(h[2]),t=h[1]);var p=Number(t);if(isNaN(p))throw new SyntaxError('String "'+t+'" is no valid number');if(h){if(p>2**c-1)throw new SyntaxError('String "'.concat(t,'" is out of range'));p>=2**(c-1)&&(p=p-2**c)}return p},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},null:function(t){return 0},"Unit, string | Unit":function(t,a){return t.toNumber(a)},"Array | Matrix":function(t){return re(t,this)}});return n.fromJSON=function(i){return parseFloat(i.value)},n}),Ko="bignumber",Qo=["typed","BigNumber"],ko=k(Ko,Qo,r=>{var{typed:e,BigNumber:n}=r;return e("bignumber",{"":function(){return new n(0)},number:function(t){return new n(t+"")},string:function(t){var a=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var c=a[2],h=n(a[1]),p=new n(2).pow(Number(c));if(h.gt(p.sub(1)))throw new SyntaxError('String "'.concat(t,'" is out of range'));var m=new n(2).pow(Number(c)-1);return h.gte(m)?h.sub(p):h}return new n(t)},BigNumber:function(t){return t},Fraction:function(t){return new n(t.n).div(t.d).times(t.s)},null:function(t){return new n(0)},"Array | Matrix":function(t){return re(t,this)}})}),rs="fraction",es=["typed","Fraction"],ts=k(rs,es,r=>{var{typed:e,Fraction:n}=r;return e("fraction",{number:function(t){if(!isFinite(t)||isNaN(t))throw new Error(t+" cannot be represented as a fraction");return new n(t)},string:function(t){return new n(t)},"number, number":function(t,a){return new n(t,a)},null:function(t){return new n(0)},BigNumber:function(t){return new n(t.toString())},Fraction:function(t){return t},Object:function(t){return new n(t)},"Array | Matrix":function(t){return re(t,this)}})}),Pt="matrix",ns=["typed","Matrix","DenseMatrix","SparseMatrix"],is=k(Pt,ns,r=>{var{typed:e,Matrix:n,DenseMatrix:i,SparseMatrix:t}=r;return e(Pt,{"":function(){return a([])},string:function(h){return a([],h)},"string, string":function(h,p){return a([],h,p)},Array:function(h){return a(h)},Matrix:function(h){return a(h,h.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(c,h,p){if(h==="dense"||h==="default"||h===void 0)return new i(c,p);if(h==="sparse")return new t(c,p);throw new TypeError("Unknown matrix type "+JSON.stringify(h)+".")}}),Ft="unaryMinus",as=["typed"],os=k(Ft,as,r=>{var{typed:e}=r;return e(Ft,{number:qn,Complex:function(i){return i.neg()},BigNumber:function(i){return i.neg()},Fraction:function(i){return i.neg()},Unit:function(i){var t=i.clone();return t.value=this(i.value),t},"Array | Matrix":function(i){return re(i,this)}})}),Dt="abs",ss=["typed"],us=k(Dt,ss,r=>{var{typed:e}=r;return e(Dt,{number:Dn,Complex:function(i){return i.abs()},BigNumber:function(i){return i.abs()},Fraction:function(i){return i.abs()},"Array | Matrix":function(i){return re(i,this)},Unit:function(i){return i.abs()}})}),zt="addScalar",fs=["typed"],cs=k(zt,fs,r=>{var{typed:e}=r;return e(zt,{"number, number":zn,"Complex, Complex":function(i,t){return i.add(t)},"BigNumber, BigNumber":function(i,t){return i.plus(t)},"Fraction, Fraction":function(i,t){return i.add(t)},"Unit, Unit":function(i,t){if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(t.value===null||t.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(t))throw new Error("Units do not match");var a=i.clone();return a.value=this(a.value,t.value),a.fixPrefix=!1,a}})}),ls="algorithm11",hs=["typed","equalScalar"],ps=k(ls,hs,r=>{var{typed:e,equalScalar:n}=r;return function(t,a,c,h){var p=t._values,m=t._index,u=t._ptr,o=t._size,f=t._datatype;if(!p)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l=o[0],v=o[1],s,d=n,g=0,M=c;typeof f=="string"&&(s=f,d=e.find(n,[s,s]),g=e.convert(0,s),a=e.convert(a,s),M=e.find(c,[s,s]));for(var _=[],b=[],w=[],y=0;y<v;y++){w[y]=b.length;for(var S=u[y],N=u[y+1],E=S;E<N;E++){var C=m[E],x=h?M(a,p[E]):M(p[E],a);d(x,g)||(b.push(C),_.push(x))}}return w[v]=b.length,t.createSparseMatrix({values:_,index:b,ptr:w,size:[l,v],datatype:s})}}),vs="algorithm14",ds=["typed"],Rn=k(vs,ds,r=>{var{typed:e}=r;return function(t,a,c,h){var p=t._data,m=t._size,u=t._datatype,o,f=c;typeof u=="string"&&(o=u,a=e.convert(a,o),f=e.find(c,[o,o]));var l=m.length>0?n(f,0,m,m[0],p,a,h):[];return t.createDenseMatrix({data:l,size:yr(m),datatype:o})};function n(i,t,a,c,h,p,m){var u=[];if(t===a.length-1)for(var o=0;o<c;o++)u[o]=m?i(p,h[o]):i(h[o],p);else for(var f=0;f<c;f++)u[f]=n(i,t+1,a,a[t+1],h[f],p,m);return u}}),ms="algorithm01",gs=["typed"],ws=k(ms,gs,r=>{var{typed:e}=r;return function(i,t,a,c){var h=i._data,p=i._size,m=i._datatype,u=t._values,o=t._index,f=t._ptr,l=t._size,v=t._datatype;if(p.length!==l.length)throw new tr(p.length,l.length);if(p[0]!==l[0]||p[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+l+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var s=p[0],d=p[1],g=typeof m=="string"&&m===v?m:void 0,M=g?e.find(a,[g,g]):a,_,b,w=[];for(_=0;_<s;_++)w[_]=[];var y=[],S=[];for(b=0;b<d;b++){for(var N=b+1,E=f[b],C=f[b+1],x=E;x<C;x++)_=o[x],y[_]=c?M(u[x],h[_][b]):M(h[_][b],u[x]),S[_]=N;for(_=0;_<s;_++)S[_]===N?w[_][b]=y[_]:w[_][b]=h[_][b]}return i.createDenseMatrix({data:w,size:[s,d],datatype:g})}}),ys="algorithm10",_s=["typed","DenseMatrix"],bs=k(ys,_s,r=>{var{typed:e,DenseMatrix:n}=r;return function(t,a,c,h){var p=t._values,m=t._index,u=t._ptr,o=t._size,f=t._datatype;if(!p)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l=o[0],v=o[1],s,d=c;typeof f=="string"&&(s=f,a=e.convert(a,s),d=e.find(c,[s,s]));for(var g=[],M=[],_=[],b=0;b<v;b++){for(var w=b+1,y=u[b],S=u[b+1],N=y;N<S;N++){var E=m[N];M[E]=p[N],_[E]=w}for(var C=0;C<l;C++)b===0&&(g[C]=[]),_[C]===w?g[C][b]=h?d(a,M[C]):d(M[C],a):g[C][b]=a}return new n({data:g,size:[l,v],datatype:s})}}),Ns="algorithm13",Ms=["typed"],Es=k(Ns,Ms,r=>{var{typed:e}=r;return function(t,a,c){var h=t._data,p=t._size,m=t._datatype,u=a._data,o=a._size,f=a._datatype,l=[];if(p.length!==o.length)throw new tr(p.length,o.length);for(var v=0;v<p.length;v++){if(p[v]!==o[v])throw new RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+o+")");l[v]=p[v]}var s,d=c;typeof m=="string"&&m===f&&(s=m,d=e.find(c,[s,s]));var g=l.length>0?n(d,0,l,l[0],h,u):[];return t.createDenseMatrix({data:g,size:l,datatype:s})};function n(i,t,a,c,h,p){var m=[];if(t===a.length-1)for(var u=0;u<c;u++)m[u]=i(h[u],p[u]);else for(var o=0;o<c;o++)m[o]=n(i,t+1,a,a[t+1],h[o],p[o]);return m}}),Ss="algorithm03",As=["typed"],Ts=k(Ss,As,r=>{var{typed:e}=r;return function(i,t,a,c){var h=i._data,p=i._size,m=i._datatype,u=t._values,o=t._index,f=t._ptr,l=t._size,v=t._datatype;if(p.length!==l.length)throw new tr(p.length,l.length);if(p[0]!==l[0]||p[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+p+") must match Matrix B ("+l+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var s=p[0],d=p[1],g,M=0,_=a;typeof m=="string"&&m===v&&(g=m,M=e.convert(0,g),_=e.find(a,[g,g]));for(var b=[],w=0;w<s;w++)b[w]=[];for(var y=[],S=[],N=0;N<d;N++){for(var E=N+1,C=f[N],x=f[N+1],D=C;D<x;D++){var B=o[D];y[B]=c?_(u[D],h[B][N]):_(h[B][N],u[D]),S[B]=E}for(var z=0;z<s;z++)S[z]===E?b[z][N]=y[z]:b[z][N]=c?_(M,h[z][N]):_(h[z][N],M)}return i.createDenseMatrix({data:b,size:[s,d],datatype:g})}}),Os="algorithm05",Cs=["typed","equalScalar"],Is=k(Os,Cs,r=>{var{typed:e,equalScalar:n}=r;return function(t,a,c){var h=t._values,p=t._index,m=t._ptr,u=t._size,o=t._datatype,f=a._values,l=a._index,v=a._ptr,s=a._size,d=a._datatype;if(u.length!==s.length)throw new tr(u.length,s.length);if(u[0]!==s[0]||u[1]!==s[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+s+")");var g=u[0],M=u[1],_,b=n,w=0,y=c;typeof o=="string"&&o===d&&(_=o,b=e.find(n,[_,_]),w=e.convert(0,_),y=e.find(c,[_,_]));var S=h&&f?[]:void 0,N=[],E=[],C=S?[]:void 0,x=S?[]:void 0,D=[],B=[],z,q,F,V;for(q=0;q<M;q++){E[q]=N.length;var U=q+1;for(F=m[q],V=m[q+1];F<V;F++)z=p[F],N.push(z),D[z]=U,C&&(C[z]=h[F]);for(F=v[q],V=v[q+1];F<V;F++)z=l[F],D[z]!==U&&N.push(z),B[z]=U,x&&(x[z]=f[F]);if(S)for(F=E[q];F<N.length;){z=N[F];var Y=D[z],J=B[z];if(Y===U||J===U){var rr=Y===U?C[z]:w,er=J===U?x[z]:w,Q=y(rr,er);b(Q,w)?N.splice(F,1):(S.push(Q),F++)}}}return E[M]=N.length,t.createSparseMatrix({values:S,index:N,ptr:E,size:[g,M],datatype:_})}}),xs="multiplyScalar",Ps=["typed"],Fs=k(xs,Ps,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":Bn,"Complex, Complex":function(i,t){return i.mul(t)},"BigNumber, BigNumber":function(i,t){return i.times(t)},"Fraction, Fraction":function(i,t){return i.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(i,t){var a=t.clone();return a.value=a.value===null?a._normalize(i):this(a.value,i),a},"Unit, number | Fraction | BigNumber | Complex":function(i,t){var a=i.clone();return a.value=a.value===null?a._normalize(t):this(a.value,t),a},"Unit, Unit":function(i,t){return i.multiply(t)}})}),Bt="multiply",Ds=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],zs=k(Bt,Ds,r=>{var{typed:e,matrix:n,addScalar:i,multiplyScalar:t,equalScalar:a,dot:c}=r,h=ps({typed:e,equalScalar:a}),p=Rn({typed:e});function m(w,y){switch(w.length){case 1:switch(y.length){case 1:if(w[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;case 2:switch(y.length){case 1:if(w[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+y[0]+")");break;case 2:if(w[1]!==y[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+y[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+y.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function u(w,y,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return c(w,y)}function o(w,y){if(y.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return f(w,y)}function f(w,y){var S=w._data,N=w._size,E=w._datatype,C=y._data,x=y._size,D=y._datatype,B=N[0],z=x[1],q,F=i,V=t;E&&D&&E===D&&typeof E=="string"&&(q=E,F=e.find(i,[q,q]),V=e.find(t,[q,q]));for(var U=[],Y=0;Y<z;Y++){for(var J=V(S[0],C[0][Y]),rr=1;rr<B;rr++)J=F(J,V(S[rr],C[rr][Y]));U[Y]=J}return w.createDenseMatrix({data:U,size:[z],datatype:q})}var l=e("_multiplyMatrixVector",{"DenseMatrix, any":s,"SparseMatrix, any":M}),v=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":d,"DenseMatrix, SparseMatrix":g,"SparseMatrix, DenseMatrix":_,"SparseMatrix, SparseMatrix":b});function s(w,y){var S=w._data,N=w._size,E=w._datatype,C=y._data,x=y._datatype,D=N[0],B=N[1],z,q=i,F=t;E&&x&&E===x&&typeof E=="string"&&(z=E,q=e.find(i,[z,z]),F=e.find(t,[z,z]));for(var V=[],U=0;U<D;U++){for(var Y=S[U],J=F(Y[0],C[0]),rr=1;rr<B;rr++)J=q(J,F(Y[rr],C[rr]));V[U]=J}return w.createDenseMatrix({data:V,size:[D],datatype:z})}function d(w,y){var S=w._data,N=w._size,E=w._datatype,C=y._data,x=y._size,D=y._datatype,B=N[0],z=N[1],q=x[1],F,V=i,U=t;E&&D&&E===D&&typeof E=="string"&&(F=E,V=e.find(i,[F,F]),U=e.find(t,[F,F]));for(var Y=[],J=0;J<B;J++){var rr=S[J];Y[J]=[];for(var er=0;er<q;er++){for(var Q=U(rr[0],C[0][er]),hr=1;hr<z;hr++)Q=V(Q,U(rr[hr],C[hr][er]));Y[J][er]=Q}}return w.createDenseMatrix({data:Y,size:[B,q],datatype:F})}function g(w,y){var S=w._data,N=w._size,E=w._datatype,C=y._values,x=y._index,D=y._ptr,B=y._size,z=y._datatype;if(!C)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var q=N[0],F=B[1],V,U=i,Y=t,J=a,rr=0;E&&z&&E===z&&typeof E=="string"&&(V=E,U=e.find(i,[V,V]),Y=e.find(t,[V,V]),J=e.find(a,[V,V]),rr=e.convert(0,V));for(var er=[],Q=[],hr=[],pr=y.createSparseMatrix({values:er,index:Q,ptr:hr,size:[q,F],datatype:V}),vr=0;vr<F;vr++){hr[vr]=Q.length;var sr=D[vr],Er=D[vr+1];if(Er>sr)for(var cr=0,ar=0;ar<q;ar++){for(var Tr=ar+1,mr=void 0,nr=sr;nr<Er;nr++){var wr=x[nr];cr!==Tr?(mr=Y(S[ar][wr],C[nr]),cr=Tr):mr=U(mr,Y(S[ar][wr],C[nr]))}cr===Tr&&!J(mr,rr)&&(Q.push(ar),er.push(mr))}}return hr[F]=Q.length,pr}function M(w,y){var S=w._values,N=w._index,E=w._ptr,C=w._datatype;if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var x=y._data,D=y._datatype,B=w._size[0],z=y._size[0],q=[],F=[],V=[],U,Y=i,J=t,rr=a,er=0;C&&D&&C===D&&typeof C=="string"&&(U=C,Y=e.find(i,[U,U]),J=e.find(t,[U,U]),rr=e.find(a,[U,U]),er=e.convert(0,U));var Q=[],hr=[];V[0]=0;for(var pr=0;pr<z;pr++){var vr=x[pr];if(!rr(vr,er))for(var sr=E[pr],Er=E[pr+1],cr=sr;cr<Er;cr++){var ar=N[cr];hr[ar]?Q[ar]=Y(Q[ar],J(vr,S[cr])):(hr[ar]=!0,F.push(ar),Q[ar]=J(vr,S[cr]))}}for(var Tr=F.length,mr=0;mr<Tr;mr++){var nr=F[mr];q[mr]=Q[nr]}return V[1]=F.length,w.createSparseMatrix({values:q,index:F,ptr:V,size:[B,1],datatype:U})}function _(w,y){var S=w._values,N=w._index,E=w._ptr,C=w._datatype;if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var x=y._data,D=y._datatype,B=w._size[0],z=y._size[0],q=y._size[1],F,V=i,U=t,Y=a,J=0;C&&D&&C===D&&typeof C=="string"&&(F=C,V=e.find(i,[F,F]),U=e.find(t,[F,F]),Y=e.find(a,[F,F]),J=e.convert(0,F));for(var rr=[],er=[],Q=[],hr=w.createSparseMatrix({values:rr,index:er,ptr:Q,size:[B,q],datatype:F}),pr=[],vr=[],sr=0;sr<q;sr++){Q[sr]=er.length;for(var Er=sr+1,cr=0;cr<z;cr++){var ar=x[cr][sr];if(!Y(ar,J))for(var Tr=E[cr],mr=E[cr+1],nr=Tr;nr<mr;nr++){var wr=N[nr];vr[wr]!==Er?(vr[wr]=Er,er.push(wr),pr[wr]=U(ar,S[nr])):pr[wr]=V(pr[wr],U(ar,S[nr]))}}for(var Or=Q[sr],jr=er.length,Lr=Or;Lr<jr;Lr++){var ae=er[Lr];rr[Lr]=pr[ae]}}return Q[q]=er.length,hr}function b(w,y){var S=w._values,N=w._index,E=w._ptr,C=w._datatype,x=y._values,D=y._index,B=y._ptr,z=y._datatype,q=w._size[0],F=y._size[1],V=S&&x,U,Y=i,J=t;C&&z&&C===z&&typeof C=="string"&&(U=C,Y=e.find(i,[U,U]),J=e.find(t,[U,U]));for(var rr=V?[]:void 0,er=[],Q=[],hr=w.createSparseMatrix({values:rr,index:er,ptr:Q,size:[q,F],datatype:U}),pr=V?[]:void 0,vr=[],sr,Er,cr,ar,Tr,mr,nr,wr,Or=0;Or<F;Or++){Q[Or]=er.length;var jr=Or+1;for(Tr=B[Or],mr=B[Or+1],ar=Tr;ar<mr;ar++)if(wr=D[ar],V)for(Er=E[wr],cr=E[wr+1],sr=Er;sr<cr;sr++)nr=N[sr],vr[nr]!==jr?(vr[nr]=jr,er.push(nr),pr[nr]=J(x[ar],S[sr])):pr[nr]=Y(pr[nr],J(x[ar],S[sr]));else for(Er=E[wr],cr=E[wr+1],sr=Er;sr<cr;sr++)nr=N[sr],vr[nr]!==jr&&(vr[nr]=jr,er.push(nr));if(V)for(var Lr=Q[Or],ae=er.length,ee=Lr;ee<ae;ee++){var A=er[ee];rr[ee]=pr[A]}}return Q[F]=er.length,hr}return e(Bt,ki({"Array, Array":function(y,S){m(ie(y),ie(S));var N=this(n(y),n(S));return Ar(N)?N.valueOf():N},"Matrix, Matrix":function(y,S){var N=y.size(),E=S.size();return m(N,E),N.length===1?E.length===1?u(y,S,N[0]):o(y,S):E.length===1?l(y,S):v(y,S)},"Matrix, Array":function(y,S){return this(y,n(S))},"Array, Matrix":function(y,S){return this(n(y,S.storage()),S)},"SparseMatrix, any":function(y,S){return h(y,S,t,!1)},"DenseMatrix, any":function(y,S){return p(y,S,t,!1)},"any, SparseMatrix":function(y,S){return h(S,y,t,!0)},"any, DenseMatrix":function(y,S){return p(S,y,t,!0)},"Array, any":function(y,S){return p(n(y),S,t,!1).valueOf()},"any, Array":function(y,S){return p(n(S),y,t,!0).valueOf()},"any, any":t,"any, any, ...any":function(y,S,N){for(var E=this(y,S),C=0;C<N.length;C++)E=this(E,N[C]);return E}},t.signatures))}),Bs="sqrt",qs=["config","typed","Complex"],Rs=k(Bs,qs,r=>{var{config:e,typed:n,Complex:i}=r;return n("sqrt",{number:t,Complex:function(c){return c.sqrt()},BigNumber:function(c){return!c.isNegative()||e.predictable?c.sqrt():t(c.toNumber())},"Array | Matrix":function(c){return re(c,this)},Unit:function(c){return c.pow(.5)}});function t(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new i(a,0).sqrt()}}),qt="subtract",Ls=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],Us=k(qt,Ls,r=>{var{typed:e,matrix:n,equalScalar:i,addScalar:t,unaryMinus:a,DenseMatrix:c}=r,h=ws({typed:e}),p=Ts({typed:e}),m=Is({typed:e,equalScalar:i}),u=bs({typed:e,DenseMatrix:c}),o=Es({typed:e}),f=Rn({typed:e});return e(qt,{"number, number":function(v,s){return v-s},"Complex, Complex":function(v,s){return v.sub(s)},"BigNumber, BigNumber":function(v,s){return v.minus(s)},"Fraction, Fraction":function(v,s){return v.sub(s)},"Unit, Unit":function(v,s){if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(s.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(s))throw new Error("Units do not match");var d=v.clone();return d.value=this(d.value,s.value),d.fixPrefix=!1,d},"SparseMatrix, SparseMatrix":function(v,s){return Ne(v,s),m(v,s,this)},"SparseMatrix, DenseMatrix":function(v,s){return Ne(v,s),p(s,v,this,!0)},"DenseMatrix, SparseMatrix":function(v,s){return Ne(v,s),h(v,s,this,!1)},"DenseMatrix, DenseMatrix":function(v,s){return Ne(v,s),o(v,s,this)},"Array, Array":function(v,s){return this(n(v),n(s)).valueOf()},"Array, Matrix":function(v,s){return this(n(v),s)},"Matrix, Array":function(v,s){return this(v,n(s))},"SparseMatrix, any":function(v,s){return u(v,a(s),t)},"DenseMatrix, any":function(v,s){return f(v,s,this)},"any, SparseMatrix":function(v,s){return u(s,v,this,!0)},"any, DenseMatrix":function(v,s){return f(s,v,this,!0)},"Array, any":function(v,s){return f(n(v),s,this,!1).valueOf()},"any, Array":function(v,s){return f(n(s),v,this,!0).valueOf()}})});function Ne(r,e){var n=r.size(),i=e.size();if(n.length!==i.length)throw new tr(n.length,i.length)}var Rt="conj",$s=["typed"],Zs=k(Rt,$s,r=>{var{typed:e}=r;return e(Rt,{number:function(i){return i},BigNumber:function(i){return i},Complex:function(i){return i.conjugate()},"Array | Matrix":function(i){return re(i,this)}})});function Vs(){throw new Error('No "bignumber" implementation available')}function Ys(){throw new Error('No "fraction" implementation available')}function Xs(){throw new Error('No "matrix" implementation available')}var Lt="size",Hs=["typed","config","?matrix"],js=k(Lt,Hs,r=>{var{typed:e,config:n,matrix:i}=r;return e(Lt,{Matrix:function(a){return a.create(a.size())},Array:ie,string:function(a){return n.matrix==="Array"?[a.length]:i([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return n.matrix==="Array"?[]:i?i([]):Xs()}})}),Gs="numeric",Ws=["number","?bignumber","?fraction"],Js=k(Gs,Ws,r=>{var{number:e,bignumber:n,fraction:i}=r,t={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:c=>e(c),BigNumber:n?c=>n(c):Vs,Fraction:i?c=>i(c):Ys};return function(h,p){var m=Jr(h);if(!(m in t))throw new TypeError("Cannot convert "+h+' of type "'+m+'"; valid input types are '+Object.keys(t).join(", "));if(!(p in a))throw new TypeError("Cannot convert "+h+' to type "'+p+'"; valid output types are '+Object.keys(a).join(", "));return p===m?h:a[p](h)}}),Ut="divideScalar",Ks=["typed","numeric"],Qs=k(Ut,Ks,r=>{var{typed:e,numeric:n}=r;return e(Ut,{"number, number":function(t,a){return t/a},"Complex, Complex":function(t,a){return t.div(a)},"BigNumber, BigNumber":function(t,a){return t.div(a)},"Fraction, Fraction":function(t,a){return t.div(a)},"Unit, number | Fraction | BigNumber":function(t,a){var c=t.clone(),h=n(1,Jr(a));return c.value=this(c.value===null?c._normalize(h):c.value,a),c},"number | Fraction | BigNumber, Unit":function(t,a){var c=a.clone();c=c.pow(-1);var h=n(1,Jr(t));return c.value=this(t,a.value===null?a._normalize(h):a.value),c},"Unit, Unit":function(t,a){return t.divide(a)}})}),$t="dot",ks=["typed","addScalar","multiplyScalar","conj","size"],ru=k($t,ks,r=>{var{typed:e,addScalar:n,multiplyScalar:i,conj:t,size:a}=r;return e($t,{"Array | DenseMatrix, Array | DenseMatrix":h,"SparseMatrix, SparseMatrix":p});function c(u,o){var f=m(u),l=m(o),v,s;if(f.length===1)v=f[0];else if(f.length===2&&f[1]===1)v=f[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+f.join(", ")+")");if(l.length===1)s=l[0];else if(l.length===2&&l[1]===1)s=l[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+l.join(", ")+")");if(v!==s)throw new RangeError("Vectors must have equal length ("+v+" != "+s+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function h(u,o){var f=c(u,o),l=Ar(u)?u._data:u,v=Ar(u)?u._datatype:void 0,s=Ar(o)?o._data:o,d=Ar(o)?o._datatype:void 0,g=m(u).length===2,M=m(o).length===2,_=n,b=i;if(v&&d&&v===d&&typeof v=="string"){var w=v;_=e.find(n,[w,w]),b=e.find(i,[w,w])}if(!g&&!M){for(var y=b(t(l[0]),s[0]),S=1;S<f;S++)y=_(y,b(t(l[S]),s[S]));return y}if(!g&&M){for(var N=b(t(l[0]),s[0][0]),E=1;E<f;E++)N=_(N,b(t(l[E]),s[E][0]));return N}if(g&&!M){for(var C=b(t(l[0][0]),s[0]),x=1;x<f;x++)C=_(C,b(t(l[x][0]),s[x]));return C}if(g&&M){for(var D=b(t(l[0][0]),s[0][0]),B=1;B<f;B++)D=_(D,b(t(l[B][0]),s[B][0]));return D}}function p(u,o){c(u,o);for(var f=u._index,l=u._values,v=o._index,s=o._values,d=0,g=n,M=i,_=0,b=0;_<f.length&&b<v.length;){var w=f[_],y=v[b];if(w<y){_++;continue}if(w>y){b++;continue}w===y&&(d=g(d,M(l[_],s[b])),_++,b++)}return d}function m(u){return Ar(u)?u.size():a(u)}}),Zt="distance",eu=["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],tu=k(Zt,eu,r=>{var{typed:e,addScalar:n,subtract:i,multiplyScalar:t,divideScalar:a,unaryMinus:c,sqrt:h,abs:p}=r;return e(Zt,{"Array, Array, Array":function(w,y,S){if(w.length===2&&y.length===2&&S.length===2){if(!u(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!u(y))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!u(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var N=a(i(S[1],S[0]),i(y[1],y[0])),E=t(t(N,N),y[0]),C=c(t(N,y[0])),x=w[1];return d(w[0],w[1],E,C,x)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(w,y,S){if(Object.keys(w).length===2&&Object.keys(y).length===2&&Object.keys(S).length===2){if(!u(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!u(y))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!u(S))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"lineOnePtX"in y&&"lineOnePtY"in y&&"lineTwoPtX"in S&&"lineTwoPtY"in S){var N=a(i(S.lineTwoPtY,S.lineTwoPtX),i(y.lineOnePtY,y.lineOnePtX)),E=t(t(N,N),y.lineOnePtX),C=c(t(N,y.lineOnePtX)),x=w.pointX;return d(w.pointX,w.pointY,E,C,x)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(w,y){if(w.length===2&&y.length===3){if(!u(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!o(y))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return d(w[0],w[1],y[0],y[1],y[2])}else if(w.length===3&&y.length===6){if(!o(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!l(y))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(w[0],w[1],w[2],y[0],y[1],y[2],y[3],y[4],y[5])}else if(w.length===y.length&&w.length>0){if(!f(w))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!f(y))throw new TypeError("All values of an array should be numbers or BigNumbers");return M(w,y)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(w,y){if(Object.keys(w).length===2&&Object.keys(y).length===3){if(!u(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!o(y))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"xCoeffLine"in y&&"yCoeffLine"in y&&"constant"in y)return d(w.pointX,w.pointY,y.xCoeffLine,y.yCoeffLine,y.constant);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(y).length===6){if(!o(w))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!l(y))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"x0"in y&&"y0"in y&&"z0"in y&&"a"in y&&"b"in y&&"c"in y)return g(w.pointX,w.pointY,w.pointZ,y.x0,y.y0,y.z0,y.a,y.b,y.c);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===2&&Object.keys(y).length===2){if(!u(w))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!u(y))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointTwoX"in y&&"pointTwoY"in y)return M([w.pointOneX,w.pointOneY],[y.pointTwoX,y.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(y).length===3){if(!o(w))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!o(y))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointOneZ"in w&&"pointTwoX"in y&&"pointTwoY"in y&&"pointTwoZ"in y)return M([w.pointOneX,w.pointOneY,w.pointOneZ],[y.pointTwoX,y.pointTwoY,y.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(w){if(!s(w))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return _(w)}});function m(b){return typeof b=="number"||Dr(b)}function u(b){return b.constructor!==Array&&(b=v(b)),m(b[0])&&m(b[1])}function o(b){return b.constructor!==Array&&(b=v(b)),m(b[0])&&m(b[1])&&m(b[2])}function f(b){return Array.isArray(b)||(b=v(b)),b.every(m)}function l(b){return b.constructor!==Array&&(b=v(b)),m(b[0])&&m(b[1])&&m(b[2])&&m(b[3])&&m(b[4])&&m(b[5])}function v(b){for(var w=Object.keys(b),y=[],S=0;S<w.length;S++)y.push(b[w[S]]);return y}function s(b){if(b[0].length===2&&m(b[0][0])&&m(b[0][1])){if(b.some(w=>w.length!==2||!m(w[0])||!m(w[1])))return!1}else if(b[0].length===3&&m(b[0][0])&&m(b[0][1])&&m(b[0][2])){if(b.some(w=>w.length!==3||!m(w[0])||!m(w[1])||!m(w[2])))return!1}else return!1;return!0}function d(b,w,y,S,N){var E=p(n(n(t(y,b),t(S,w)),N)),C=h(n(t(y,y),t(S,S)));return a(E,C)}function g(b,w,y,S,N,E,C,x,D){var B=[i(t(i(N,w),D),t(i(E,y),x)),i(t(i(E,y),C),t(i(S,b),D)),i(t(i(S,b),x),t(i(N,w),C))];B=h(n(n(t(B[0],B[0]),t(B[1],B[1])),t(B[2],B[2])));var z=h(n(n(t(C,C),t(x,x)),t(D,D)));return a(B,z)}function M(b,w){for(var y=b.length,S=0,N=0,E=0;E<y;E++)N=i(b[E],w[E]),S=n(t(N,N),S);return h(S)}function _(b){for(var w=[],y=[],S=[],N=0;N<b.length-1;N++)for(var E=N+1;E<b.length;E++)b[0].length===2?(y=[b[N][0],b[N][1]],S=[b[E][0],b[E][1]]):b[0].length===3&&(y=[b[N][0],b[N][1],b[N][2]],S=[b[E][0],b[E][1],b[E][2]]),w.push(M(y,S));return w}}),Ln=Ao({config:we}),Un=Co({}),$n=Po({}),mt=zo({}),gt=Ro({Matrix:mt}),gr=Oa({BigNumber:Ln,Complex:Un,DenseMatrix:gt,Fraction:$n}),nu=us({typed:gr}),$e=cs({typed:gr}),iu=ko({BigNumber:Ln,typed:gr}),au=Zs({typed:gr}),wt=Zo({config:we,typed:gr}),yt=Fs({typed:gr}),ou=Jo({typed:gr}),su=Xo({Matrix:mt,equalScalar:wt,typed:gr}),uu=Rs({Complex:Un,config:we,typed:gr}),Zn=os({typed:gr}),fu=ts({Fraction:$n,typed:gr}),_t=is({DenseMatrix:gt,Matrix:mt,SparseMatrix:su,typed:gr}),cu=Js({bignumber:iu,fraction:fu,number:ou}),lu=js({matrix:_t,config:we,typed:gr}),Fe=Us({DenseMatrix:gt,addScalar:$e,equalScalar:wt,matrix:_t,typed:gr,unaryMinus:Zn}),hu=Qs({numeric:cu,typed:gr}),pu=ru({addScalar:$e,conj:au,multiplyScalar:yt,size:lu,typed:gr}),Vt=zs({addScalar:$e,dot:pu,equalScalar:wt,matrix:_t,multiplyScalar:yt,typed:gr}),Yt=tu({abs:nu,addScalar:$e,divideScalar:hu,multiplyScalar:yt,sqrt:uu,subtract:Fe,typed:gr,unaryMinus:Zn});const[vu]=jt("slime");class pe{constructor(){oe(this,"speed",.75);oe(this,"lastHop",performance.now())}}class du extends ft{initialize(){window.webApi&&window.webApi.onmessage("slime",()=>{vu("spawn enemy");for(let e=0;e<20;e++)this.createSlime()}),setInterval(this.createSlime,5e3)}every_frame(){const e=j.getTag(Ze),[n]=j.get(e,[Br]);j.do_with([We,pe,ct],([t],a)=>{j.events.emit("enemyDied",a),xr.removeObjectFromScene(t),j.deleteEntity(a)});const i=j.submitQuery([Br,We,pe]);for(const[[t,a,c],h]of i){const p=Sr.getBodyPosition(n),m=Sr.getBodyPosition(t),u=Yt(p,m),o=Fe(p,m),{speed:f,lastHop:l}=c;let v=0,s=0;const d=new ne(0,0,0);if(u<20){const g=Vt(o,f);d.x+=g[0]*20,d.z+=g[2]*20,v+=20}if(Math.random()<=.02)for(const[g,M]of i){if(M===h)return;const[_]=j.get(M,[Br]),b=Sr.getBodyPosition(_),w=Yt(b,m),y=Fe(b,m);if(w<20){s+=1,v+=1;const S=Vt(y,f);d.x+=S[0],d.y+=S[1],d.z+=S[2]}}if(s>0){const g=Math.max(Math.min(s/12,1),.02738276869058609);a.children[0].material.color.b=g,xr.updateMaterial(a)}v&&performance.now()-l>1125&&(c.lastHop=performance.now(),d.x/=v,d.z/=v,Sr.addForceConditionalRaycast({force:{object:t,vector:[d.x,3,d.z]},raycast:{id:0,from:m,to:[m[0]+(Math.random()*3-1.5),m[1]-1.5,m[2]+(Math.random()*3-1.5)]}}))}}createInstancedSlime({geometries:e,materials:n,meshes:i}){const a=new SharedArrayBuffer(Float32Array.BYTES_PER_ELEMENT*16*400),c=new Float32Array(a),h=new bi(c,Float32Array.BYTES_PER_ELEMENT);h.setUsage(Ni);const p=i.map(({geometry:m,material:u,materialCount:o})=>{const f=m-1,l=u-1,v=e[f],s=n.slice(l,l+o),d=new Mi(v,s[0],400);d.instanceMatrix=h;for(let g=0;g<400;g++){const M=new Ei;M.position.set(Math.random()*60-30,g,Math.random()*60-30),M.updateMatrix(),d.setMatrixAt(g,M.matrix)}return d.instanceMatrix.needsUpdate=!0,d});return p.forEach(m=>{m.scale.set(.7,.7,.7),xr.addObjectToScene(m)}),p}async createSlime(){const e=j.createEntity(),n={speed:.75,lastHop:performance.now()},i=new Xr(5,5),t={uri:"./models/slime/slime.glb"},a={radius:1.39/2},c={mass:1,isGhost:!1,shouldRotate:!0},h=await Je.loadModel(t);await Je.loadModelData(t),h.traverse(u=>u.userData.entityId=e),h.children[1].material=h.children[1].material.clone(),h.scale.set(.7,.7,.7),h.name="Slime",xr.addObjectToScene(h);const p=()=>Math.random()*50-25,m=Sr.createSphere(c,{pos:[p(),60,p()],scale:[1,1,1],quat:[0,0,0,1]},a);j.put(e,[ot,Br,pe,Xr],[h,m,n,i]),Sr.registerCollisionCallback(m,Se(j)(3))}}var Bu=Object.freeze(Object.defineProperty({__proto__:null,Slime:pe,default:du},Symbol.toStringTag,{value:"Module"}));const ge=Symbol("Target"),mu="/img/icons.jpg",gu="/img/fire.png";function Vn(){const r=new st(new ut({color:16711680,transparent:!0,opacity:.3,visible:!0,map:new Gt().load(gu),depthTest:!1}));return r.position.set(0,30,0),r.scale.set(10,10,10),xr.addObjectToScene(r),{sprite:r,abilities:0}}function ye(r){r.abilities++;const e=new Gt().load(mu);e.offset=new Si(1/10,1-1/12),e.wrapS=bt,e.wrapT=bt;const n=new st(new ut({color:16777215,transparent:!0,visible:!0,map:e,alphaMap:e,depthTest:!1})),i=.1,t=.3,a=Math.PI/2*r.abilities,c=t*Math.sin(a),h=t*Math.cos(a);n.position.set(h,c,0),n.scale.set(i,i,i),r.sprite.add(n)}function Yn(r,e){const[n]=j.get(r,[Br]),[i,t,a]=Sr.getBodyPosition(n),c=new ne(i,t,a);function h(){const u=new Set;return xr.scene.traverseVisible(o=>{const f=o.userData.entityId;!f||!new Wt().setFromProjectionMatrix(new Jt().multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse)).containsPoint(o.position)||(j.has(f,pe)||j.has(f,De))&&u.add(f)}),u}const p=h();let m=999999999;for(const u of p){const[o]=j.get(u,[Br]),[f,l,v]=Sr.getBodyPosition(o),s=new ne(f,l,v),d=Math.abs(s.distanceTo(c));d<m&&(m=d,j.removeTag(ge),j.addTag(u,ge))}}function Xn({sprite:r}){if(j.hasTag(ge)){const e=j.getTag(ge),[n]=j.get(e,[Br]),[i,t,a]=Sr.getBodyPosition(n),c=new ne(i,t,a);r.visible=!0,r.position.copy(c),r.rotateX(.0333),r.rotateY(-.0333),r.rotateZ(.0333)}else r.visible=!1}var qu=Object.freeze(Object.defineProperty({__proto__:null,TARGET_TAG:ge,makeTargetIndicator:Vn,addAbilityToTargetIndicator:ye,updateTargetIndicator:Yn,syncTargetIndicator:Xn},Symbol.toStringTag,{value:"Module"}));const[wu]=jt("engine:todo"),Ze=Symbol("player"),yu=()=>{const[r]=j.get(j.getTag(Qt),[kt]);return new ne(0,0,-1).applyQuaternion(r.quaternion)},Kr=j.createEntity();j.addTag(Kr,Ze);const ve=new Ai(30,1,.1,100).rotateY(Math.PI).translateY(3).rotateX(-Math.PI/9).translateZ(1);let Hn=null;xr.loadModel().then(r=>{Hn=r;const e=r.mesh;console.log(r.animations),Kt(r,"Idle"),e.add(ve),xr.addObjectToScene(e);const n=800,i=10,t=new Audio("/audio/squelch.mp3");let a=0;document.addEventListener("mousedown",async s=>{if(s.button!==0||performance.now()-a<n)return;a=performance.now(),Zr("1H_Melee_Attack_Slice_Diagonal"),setTimeout(()=>Zr("Idle"),340);const d=new Wt().setFromProjectionMatrix(new Jt().multiplyMatrices(ve.projectionMatrix,ve.matrixWorldInverse));let g=!1;xr.scene.traverseVisible(M=>{g||M.isMesh&&(d.containsPoint(M.position)||d.intersectsObject(M))&&j.has(M.userData.entityId,Xr)&&(g=!0,setTimeout(()=>{var b,w;const _=(w=(b=Oi())==null?void 0:b.damage)!=null?w:i;Se(j)(_)(M.userData.entityId),t.currentTime=.5,t.play()},500))})});const c=new Xr(250,250),h={score:0},p=Sr.createSphere({mass:100,shouldRotate:!0,isGhost:!1},{pos:[0,20,0],scale:[1,1,1],quat:[0,0,0,1]},{radius:1}),m=new Et;m.jumpVelocity=5,m.walkVelocity=14;const u=new Mt({MoveForward:["w_down"],MoveBackward:["s_down"],MoveLeft:["a_down"],MoveRight:["d_down"],Idle:["w_up","a_up","s_up","d_up"]});u.addListener("Idle",()=>{Zr("Idle")}),u.addListener("MoveForward",()=>{Zr("Running_A")}),u.addListener("MoveBack",()=>{Zr("Running_A")}),u.addListener("MoveLeft",()=>{Zr("Running_A")}),u.addListener("MoveRight",()=>{Zr("Running_A")});const o=new Ke("50%","80%","52px Arial","red","[health goes here]");j.put(Kr,[ot,Br,Xr,Ee,Et,Mt,Ke],[e,p,c,h,m,u,o]);const f=j.createEntity();{const s=new st(new ut({color:"black"}));s.scale.set(10,10,1),s.position.set(0,0,-1),xr.addObjectToScene(s,!0),j.put(f,[Ti],[s])}const l=s=>{if(s.button!==2)return;Zr("1H_Ranged_Aiming"),setTimeout(()=>Zr("Idle"),2e3);const d=Se(j)(5),[{position:g}]=j.get(j.getTag(Qt),[kt]);rn(Sr,xr,g,yu(),d)};Nt.on("startLoop",()=>{document.addEventListener("mousedown",l)}),Nt.on("stopLoop",()=>{document.removeEventListener("mousedown",l)});const v=new Audio("/audio/boop.wav");v.volume=.5,j.events.on("enemyDied",async()=>{const[s]=j.get(Kr,[Ee]);s.score+=1,j.events.emit("updateScore",s),v.play()}),j.events.on("healPlayer",s=>{const[d]=j.get(Kr,[Xr]);d.hp+=s}),wu("imgui: display player position")});function _u(){const[r,e,n]=j.get(Kr,[Ee,Xr,Ke]);n.text=`${e.hp}/${e.max}HP
${r.score} points`}function Zr(r){Kt(Hn,r)}const _e=Vn();ye(_e);ye(_e);ye(_e);ye(_e);class bu extends ft{every_frame(){_u(),j.do_with([Ee,ct],([{score:e}])=>{var i;(i=document.querySelector("#blocker"))==null||i.setAttribute("style","display:block");const n=document.querySelector("#load");n.setAttribute("style","display:block"),n.innerHTML=`<h1>You Have Perished. Score... ${e}</h1>`,j.deleteEntity(Kr)}),Math.random()<.5&&Yn(Kr,ve),Xn(_e)}}var Ru=Object.freeze(Object.defineProperty({__proto__:null,PLAYER_TAG:Ze,player:Kr,frustumCamera:ve,animatePlayer:Zr,default:bu},Symbol.toStringTag,{value:"Module"}));const Nu=.5,Mu="/audio/hit.mp3";class Xt{constructor(e,n){oe(this,"timer");oe(this,"sound",new Audio(Mu));this.entity=e,this.target=n,this.sound.volume=Nu,this.target=n,this.timer=setInterval(()=>{const[i]=j.get(e,[Br]),[t]=j.get(this.target,[Br]),a=Sr.getBodyPosition(t),c=Sr.getBodyPosition(i),[h,p,m]=Fe(a,c),u=()=>Se(j)(5);rn(Sr,xr,new ne().fromArray(c),new ne(h,p,m),u)},1e3)}destroy(){clearInterval(this.timer)}}class De{}class Eu extends ft{constructor(){super(...arguments);oe(this,"shootTimer")}async initialize(){setInterval(this.createGoblin,15e3)}every_frame(){j.do_with([We,De,ct],([n],i)=>{j.events.emit("enemyDied",{entity_id:i}),xr.removeObjectFromScene(n),j.deleteEntity(i)})}async createGoblin(){const n=j.createEntity(),i={uri:"./models/villager-male/villager-male.glb"},t={mass:10,isGhost:!1,shouldRotate:!1},a={radius:.7,height:1.7},c=new Xr(3,3),h=new Xt(n,j.getTag(Ze)),p={},m=await Je.loadModel(i);m.traverse(o=>o.userData.entityId=n),xr.addObjectToScene(m);const u=Sr.createCapsule(t,{pos:[10,50,0],scale:[1,1,1],quat:[0,0,0,1]},a);j.put(n,[Br,ot,De,Xr,Xt],[u,m,p,c,h])}}var Lu=Object.freeze(Object.defineProperty({__proto__:null,Goblin:De,default:Eu},Symbol.toStringTag,{value:"Module"}));export{Ze as P,Ru as a,Lu as g,Kr as p,Bu as s,qu as t};
