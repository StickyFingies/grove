/*!
 * 
 * Made with <3 by the Grove team | Mon Mar 29 2021 20:52:14 GMT+0000 (Coordinated Universal Time)
 *
 */
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkthe_grove"] = self["webpackChunkthe_grove"] || []).push([["latest"],{

/***/ "./node_modules/css-loader/index.js?minimize=true!./node_modules/sass-loader/dist/cjs.js!./src/css/play.sass":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/css-loader/index.js?minimize=true!./node_modules/sass-loader/dist/cjs.js!./src/css/play.sass ***!
  \*******************************************************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"body,html{overflow:hidden;margin:0;width:100%;height:100%}.hotbar{border:1px solid #eee;margin-left:4px;margin-right:4px;text-align:center;line-height:50px;font-size:14px;color:#fff;padding:0}.hotbar.active{background:tomato}#blocker{font:100% Megrim,sans-serif;color:#fff;background-color:#000;z-index:5}#blocker,#underlay{position:absolute;width:100%;height:100%}#underlay{background-color:rgba(0,0,0,.8);z-index:1}#load{width:50%;height:50%;text-align:center}#load *{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#hud{position:fixed;left:5%;bottom:0;width:90%}#quest-alert{position:fixed;right:0;top:20%;width:280px;height:90px;padding-left:30px;padding-top:20px;background-image:url(/img/QuestBar.png);color:#fff}#quest-alert p{margin-bottom:-4px}#pause{width:60%;left:20%;font-family:Megrim,sans-serif}#gui,#pause{position:fixed;top:15%}#gui{z-index:4;width:70%;height:70%;left:15%;background-image:url(/img/gui.png);background-size:cover;padding-left:5%;padding-top:3%}#gui #gui-content{height:100%}#gui #gui-exit{position:fixed;bottom:22%;right:20%}#chat{position:fixed;bottom:0;left:0}#chat,#chat #chat-input{color:#fff}#crosshair{position:fixed;left:50%;top:50%}\", \"\"]);\n\n// exports\n\n\n//# sourceURL=webpack://the-grove/./src/css/play.sass?./node_modules/css-loader/index.js?minimize=true!./node_modules/sass-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/index.js?minimize=true!./node_modules/sass-loader/dist/cjs.js!./src/css/skill.sass":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/css-loader/index.js?minimize=true!./node_modules/sass-loader/dist/cjs.js!./src/css/skill.sass ***!
  \********************************************************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

eval("exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"*{margin:0;padding:0}.clear{clear:both}body{background:#444;background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACcklEQVR4nO3bSVJcQQwE0L4MBsLYpid6ZLBphvtfCHYO6i1+Rq+0QAstMvSrSyiUGqqK2fvb8eNuff1f5rcXA16vrge8ufs54Od/m8nv314PA364Xwx4v/s9qff3kv70vJ3UPz4sBzz7Cr6jtAOqDaiWmRw1B6h/fdkP+Hi4HbAc3W1/nbVeDv99Wg/4/jif3M8cZQ4w53QEVBtQLe0AOSTnD/s/A14uLge8Wl4NWI6/nHYDdj/rshw2J6WcoT2L+Y8B27d0BFQbUC3tAOusnJVzcky9dVbOyfHEefXu5/fONuYwc1RHQLUB1dIOsFeWY2meNifI2e3mZsBy1hzk9+YQ67rrU87Q3o6AagOqpR2QeunE6dTbi+0z3M+6nfoC677Yv8/f6wioNqBa2gFyTpx698Q5zxes49Zp676cfXpcTf6+Z4aeSdrXdARUG1At7QDrejofkIP2AXI29QWuT/O7nNYec0jqKzoCqg2olnZAuu+Xs9b9lEPkoHVfTnvv4P7WffsOsX+POacjoNqAamkHyFE5J8ety+e+6Uk5JK237pszXO95g/t3BFQbUC3tgHRmpj698UlnfPYJcjzd52uf+6l3lul3gkZAtQHV0g5I9/dyyvt/9alup9nBXt/90jtAOa6+zwOMgGoDqqUdICc8V7fX9vt0V+h6OW2f4PnAue8VEu63wkZAtQHV0g6wrlqXnZ/tvZ0VEudcb6+eZhFzguudJZxdzEkdAdUGVEs7QI7IUbGcTrOBfYWzh5yWw+l/ftLbZPXmjI6AagOqpR1gL+78bo5wXk93femNz7nzvvaI7WPMKeKOgGoDquXbO+ATIF9D9wrQ0EMAAAAASUVORK5CYII=\\\")}.wrap{width:320px;margin:auto}.skillpoints_content{background-color:#444;color:#fff;margin:10px;padding:10px}#skillpoints{color:#fff}.mainSkillTreeContener{display:block;margin:auto}.skill_group{float:left;width:350px}.skill{position:relative;text-align:center;user-select:none;cursor:default;margin:6px;display:inline-block;width:80px;height:80px;border-radius:5px;box-shadow:0 3px 6px 3px;background-image:url(\\\"/img/icons.jpg\\\");background-size:1000% auto}.skill.sm .abbr{font-size:28px}.skill.sm2 .abbr{font-size:20px}.skill.sm3 .abbr{font-size:14px}.skill .abbr{display:none;width:100%;height:100%;text-shadow:0 1px hsla(0,0%,100%,.8),0 -1px #000;overflow:hidden;font:700 48px Arial,Helvetica,sans-serif;text-align:center;line-height:80px;background:#888;color:#444}.skill.nosprite .abbr{display:block}.skill .status{font:700 8px Arial,Helvetica,sans-serif;display:block;position:absolute;color:#fff;bottom:3px;right:3px;background:rgba(0,0,0,.5);padding:.75px 1.5px;border-radius:3px;z-index:2;user-select:none}.skill div{display:none}.skill:after{background:rgba(0,0,0,.5);display:block;content:\\\"\\\";top:-3px;bottom:-3px;left:-3px;right:-3px;position:absolute;border-radius:5px;border:3px solid #888;box-shadow:inset 0 0 0 1px #fff,0 0 0 1px #fff,inset 0 0 12px rgba(0,0,0,.5),inset 0 0 3px,0 0 3px}.skill.available{cursor:pointer}.skill.available:after{border-color:#cc5;box-shadow:inset 0 0 0 1px #fff,0 0 0 1px #fff,inset 0 0 9px 0 #000,0 0 15px -3px #ff5,inset 0 0 3px 1.5px hsla(0,0%,100%,.5),inset 0 0 12px rgba(0,0,0,.5),inset 0 0 3px,0 0 3px}.skill.active:after{background:none}.skillHint{font:normal 12px Arial,Helvetica,sans-serif;pointer-events:none;position:absolute;z-index:30;border-radius:3px;padding:6px 12px 24px;background:rgba(0,0,0,.9);max-width:400px;color:#ccc;text-shadow:0 1px 1px #000;box-shadow:0 0 0 1px #000,0 0 0 2px hsla(0,0%,100%,.2)}.skillHint,.skillHint .alias{display:none}.skillHint h1,.skillHint h3,.skillHint h4{color:#fc0;margin-bottom:3px}.skillHint p,.skillHint ul{margin-bottom:9px}.skillHint p+h1,.skillHint p+h2,.skillHint p+h3,.skillHint p+h4,.skillHint ul+h1,.skillHint ul+h2,.skillHint ul+h3,.skillHint ul+h4{margin-top:9px}.skillHint i{color:#0a0}.skillHint b{color:#88f;font-weight:400}.skillHint li{list-style-type:none}.skillHint .commamenu li{float:left;list-style-type:none}.skillHint .commamenu li:before{content:\\\"\\\"}.skillHint .commamenu li+li:before{content:\\\", \\\"}.skillHint .commamenu:after{clear:both;display:block;content:\\\"\\\"}.skillHint .reqs{color:#a00}.skillHint .met{color:#0a0}\", \"\"]);\n\n// exports\n\n\n//# sourceURL=webpack://the-grove/./src/css/skill.sass?./node_modules/css-loader/index.js?minimize=true!./node_modules/sass-loader/dist/cjs.js");

/***/ }),

/***/ "./src/css/play.sass":
/*!***************************!*\
  !*** ./src/css/play.sass ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(/*! !!../../node_modules/css-loader/index.js?minimize=true!../../node_modules/sass-loader/dist/cjs.js!./play.sass */ \"./node_modules/css-loader/index.js?minimize=true!./node_modules/sass-loader/dist/cjs.js!./src/css/play.sass\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(/*! !../../node_modules/style-loader/addStyles.js */ \"./node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {}\n\n//# sourceURL=webpack://the-grove/./src/css/play.sass?");

/***/ }),

/***/ "./src/css/skill.sass":
/*!****************************!*\
  !*** ./src/css/skill.sass ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(/*! !!../../node_modules/css-loader/index.js?minimize=true!../../node_modules/sass-loader/dist/cjs.js!./skill.sass */ \"./node_modules/css-loader/index.js?minimize=true!./node_modules/sass-loader/dist/cjs.js!./src/css/skill.sass\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(/*! !../../node_modules/style-loader/addStyles.js */ \"./node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {}\n\n//# sourceURL=webpack://the-grove/./src/css/skill.sass?");

/***/ }),

/***/ "./src/js/AI.js":
/*!**********************!*\
  !*** ./src/js/AI.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _load__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./load */ \"./src/js/load.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"./src/node_modules/three/build/three.module.js\");\n\n\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((globals) => {\n\n    // Current Required AIs Include: Wicket, Ferdinand, Nicholas Czerwinski\n\n    class AI {\n        constructor(name = '{{ AI CONSTRUCTOR }}', hp = 10, dmg = 10) {\n            this.name = name;\n            this.hp = hp;\n            this.dmg = dmg;\n            globals.AIS.push(this);\n        }\n\n        update() {} // virtual\n    }\n\n    class Animal extends AI {\n\n        constructor(type = 'animal', hp = 3, dmg = 2, hostility = 0) {\n            // Hostility: -1 is run away, 0 = neutral, 1 is hostile\n            super(type, hp, dmg);\n            this.hostility = hostility;\n            this.id = Math.random();\n\n            let object = (0,_load__WEBPACK_IMPORTED_MODULE_1__.loadModel)(`/models/${type}/${type}.json`, object => {\n                if (type == 'chicken') object.scale.set(5, 5, 5);\n                let body = (0,_load__WEBPACK_IMPORTED_MODULE_1__.ball)({\n                    radius: 0.4,\n                    mass: 15,\n                    pos: new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(Math.random() * 50 - 25, 20, Math.random() * 50 - 25),\n                    mesh: object,\n                    norotate: true,\n                    cb(body) {\n                        body.mesh.name = type;\n                    }\n                }, globals);\n                this.body = body;\n                setInterval(() => this.update(this.body, this.hostility), 40);\n            });\n        }\n\n        update(body, hostility) {\n            const ppos = globals.BODIES['player'].body.position;\n            const bpos = body.body.position;\n            if (globals.BODIES['player'].mesh.position.distanceTo(body.mesh.position) < 20) {\n                let speed = 12.5;\n                if (hostility < 0) speed *= -1;\n                body.body.velocity.set(ppos.x < bpos.x ? -speed : speed, body.body.velocity.y, ppos.z < bpos.z ? -speed : speed);\n                body.mesh.lookAt(globals.BODIES['player'].mesh.position);\n            }\n            else this.body.body.velocity.set(0, body.body.velocity.y, 0);\n        }\n    }\n\n    // This should be good\n\n    new Animal('rabbit', 3, 0, 0);\n    new Animal('rabbit', 3, 0, 0);\n    new Animal('rabbit', 3, 0, 0);\n    new Animal('rabbit', 3, 0, 0);\n    new Animal('rabbit', 3, 0, -1);\n    new Animal('rabbit', 3, 0, -1);\n    new Animal('rabbit', 3, 0, -1);\n    new Animal('rabbit', 3, 0, -1);\n\n    new Animal('chicken', 1, 0, 1);\n    new Animal('chicken', 1, 0, 1);\n    new Animal('chicken', 1, 0, 15);\n    new Animal('chicken', 1, 0, 1);\n    new Animal('chicken', 1, 0, 1);\n    new Animal('chicken', 1, 0, 15);\n    new Animal('chicken', 1, 0, 1);\n    new Animal('chicken', 1, 0, 1);\n    new Animal('chicken', 1, 0, -0.5);\n    new Animal('chicken', 1, 0, -0.5);\n    new Animal('chicken', 1, 0, -0.5);\n});\n\n\n//# sourceURL=webpack://the-grove/./src/js/AI.js?");

/***/ }),

/***/ "./src/js/globals.js":
/*!***************************!*\
  !*** ./src/js/globals.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"./src/node_modules/three/build/three.module.js\");\n/* harmony import */ var cannon_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cannon-es */ \"./src/node_modules/cannon-es/dist/cannon-es.js\");\n\n\n\n\n\n\nlet G = {};\n\nG.scene = new three__WEBPACK_IMPORTED_MODULE_0__.Scene();\nG.renderer = new three__WEBPACK_IMPORTED_MODULE_0__.WebGLRenderer({\n    antialias: true,\n    preserveDrawingBuffer: true,\n    alpha: true\n});\nG.camera = new three__WEBPACK_IMPORTED_MODULE_0__.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 20000);\n\nG.world = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.World();\n\nG.socket = io();\n\nG.composers = [];\n\nG.BODIES = {\n    items: [],\n    projectiles: []\n};\nG.AIS = [];\nG.LABELS = [];\nG.PLAYERS = [];\nG.EMITTERS = [];\nG.TWEENS = [];\nG.remove = {\n    bodies: [],\n    meshes: [],\n    tweens: []\n};\n\nG.listener = new three__WEBPACK_IMPORTED_MODULE_0__.AudioListener(),\n\nG.delta = Date.now();\nG.clock = new three__WEBPACK_IMPORTED_MODULE_0__.Clock();\nG.frustum = new three__WEBPACK_IMPORTED_MODULE_0__.Frustum();\nG.cameraViewProjectionMatrix = new three__WEBPACK_IMPORTED_MODULE_0__.Matrix4();\n\nG.groundMaterial = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Material(\"groundMaterial\");\n\n\n// Adjust constraint equation parameters for ground/ground contact\nlet ground_ground_cm = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.ContactMaterial(G.groundMaterial, G.groundMaterial, {\n    friction: 50,\n    restitution: 0.3,\n});\n\n// Add contact material to the world\nG.world.addContactMaterial(ground_ground_cm);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (G);\n\n//# sourceURL=webpack://the-grove/./src/js/globals.js?");

/***/ }),

/***/ "./src/js/gui.js":
/*!***********************!*\
  !*** ./src/js/gui.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"init\": () => (/* binding */ init),\n/* harmony export */   \"quests\": () => (/* binding */ quests),\n/* harmony export */   \"stats\": () => (/* binding */ stats)\n/* harmony export */ });\n\n\nconst init = (globals, player) => {\n    $('#gui').toggle();\n    $('#underlay').toggle();\n    $('#load-play-btn').hide();\n    $('#gui-exit').click(() => {\n        $('#gui').toggle();\n        $('#underlay').toggle();\n    });\n    $(window).on(\"keydown\", e => {\n        if (String.fromCharCode(e.keyCode) == 'Q') {\n            stats(player, globals);\n        }\n    });\n\n    // draw the GUI\n    setInterval(() => draw(player), 100);\n};\n\nconst quests = () => {\n    $('#quest-alert > p').text('Getting Skills');\n    $('#quest-alert > small').text('Use the Alchemy Table to make a health potion.');\n    setTimeout(() => {\n        $('#quest-alert').animate({\n            'right': '-280px'\n        }, 1000);\n    }, 10000);\n};\n\nconst stats = (player, globals) => {\n    $('#gui').show();\n    $('#underlay').show();\n    $('#gui-title').text('');\n    $('#gui-content').html(`<h1 style=margin-top:21.5%;text-align:center;width:90%;color:white>\n    <span id=gui-q>quests</span> | <span id=gui-i>inventory</span> | <span id=gui-m>map</span> | <span id=gui-p>player</span>\n    </h1>`);\n\n    //\n\n    $('#gui-q').click(() => {\n        $('#gui-title').html('Quests');\n        $('#gui-content').html('questy stuff');\n    });\n    $('#gui-i').click(() => {\n        $('#gui-title').html('Inventory');\n        $('#gui-content').html('');\n        player.inventory.forEach(item => {\n            $(document.createElement('img'))\n                .attr('src', `/img/icons/${item.icon}`)\n                .attr('title', item.name)\n                .css('margin', '10px')\n                .width(50)\n                .height(50)\n                .click(function(e) {\n                    if (player.hotbar.list.indexOf(item) == -1) {\n                        player.hotbar.list.push(item);\n                        $(this).css('background-color', 'lightblue');\n                    }\n                    else {\n                        player.hotbar.list.splice(player.hotbar.list.indexOf(item), 1);\n                        $(this).css('background-color', 'transparent');\n                    }\n                })\n                .css('background-color', player.hotbar.list.indexOf(item) !== -1 ? 'lightblue' : 'transparent')\n                .appendTo($('#gui-content'));\n        });\n    });\n    $('#gui-m').click(() => {\n        $('#gui-title').html('Map');\n        const strMime = \"image/jpeg\";\n        const imgData = globals.renderer.domElement.toDataURL(strMime);\n        $('#gui-content').html(`<img src=${imgData} width=200>`);\n    });\n    $('#gui-p').click(() => {\n        $('#gui-title').html('Player');\n        $('#gui-content').html('<div id=st></div>');\n        skill('strength')\n            .current(1)\n            .max(3)\n            .pos(100, 150)\n            .sprite(8, 10)\n            .sprites({\n                2: [8, 10],\n                3: [8, 3]\n            })\n            .name('Strength')\n            .hint('This determines how much you can hold, etc.')\n            .hint('You are a weakling.', 1)\n            .hint('You can beat up your stepmother now.', 2)\n            .hint('Hercules is a mouse compared to you.', 3)\n            .$('#st');\n        skill('fury')\n            .current(1)\n            .max(3)\n            .pos(200, 150)\n            .sprite(2, 6)\n            .sprites({\n                2: [2, 6],\n                3: [2, 6]\n            })\n            .name('Internal Fury')\n            .hint('How much you are able to mash up enemies :)')\n            .hint('Not a man to be trifled with.', 1)\n            .hint('Everyone stops talking when you are around.', 2)\n            .hint('They say you can start fires with your eyes...', 3)\n            .$('#st');\n\n        skilltree.language.reqTitle = \"For level {0} you would need:\";\n        skilltree.language.req = '<h4>{1}</h4><ul class=\"reqs commamenu\">{0}</ul>',\n            skilltree.language.levelTitle = \"Level {1} {0}\";\n        skilltree.init($('#st'));\n    });\n    if ($('#gui-content').is(':visible')) document.exitPointerLock();\n\n};\n\n// HUD stuff\n\nconst canvas = document.getElementById('hp-bar');\ncanvas.setAttribute('width', window.innerWidth * 0.7);\nconst ctx = canvas.getContext('2d');\nconst centerX = canvas.width / 2;\nconst centerY = canvas.height / 2;\nconst radius = 40;\n\nfunction draw(player) {\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // XP BAR\n    let grd = ctx.createLinearGradient(0, 0, (player.xp.xp / player.xp.max) * canvas.width, 0);\n    grd.addColorStop(0, \"darkgreen\");\n    grd.addColorStop(0.75, \"darkgreen\");\n    grd.addColorStop(0.95, \"lime\");\n    grd.addColorStop(1, \"lime\");\n    ctx.fillStyle = grd;\n    ctx.fillRect(0, canvas.height - 10, (player.xp.xp / player.xp.max) * canvas.width, 10);\n\n    // HEALTH BAR\n    ctx.save();\n    ctx.beginPath();\n    ctx.arc(centerX, canvas.height - radius, radius, 0, 2 * Math.PI, false);\n    ctx.clip(); // Make a clipping region out of this path\n    // instead of filling the arc, we fill a variable-sized rectangle\n    // that is clipped to the arc\n    ctx.fillStyle = '#cc0000';\n    // We want the rectangle to get progressively taller starting from the bottom\n    // There are two ways to do this:\n    // 1. Change the Y value and height every time\n    // 2. Using a negative height\n    // I'm lazy, so we're going with 2\n    ctx.fillRect(centerX - radius, canvas.height, radius * 2, -(player.hp.val / player.hp.max) * radius * 2);\n    ctx.restore(); // reset clipping region\n\n    // HEALTH BAR BORDER\n    ctx.beginPath();\n    ctx.arc(centerX, canvas.height - radius, radius, 0, 2 * Math.PI, false);\n    ctx.lineWidth = 6;\n    grd = ctx.createLinearGradient(0, 0, 0, radius * 2);\n    grd.addColorStop(0, \"grey\");\n    grd.addColorStop(1, \"black\");\n    ctx.strokeStyle = grd;\n    ctx.stroke();\n\n    // HEALTH TEXT\n    ctx.fillStyle = 'black';\n    ctx.textAlign = 'center';\n    ctx.fillText(`${player.hp.val > 0 ? Math.floor(player.hp.val) : 0} HP`, centerX, canvas.height - radius);\n\n    // HOTBAR ITEMS\n    let xvals = [-100, -170, -240, -310, -380, 100, 170, 240, 310, 380];\n    let alias = [5, 4, 3, 2, 1, 6, 7, 8, 9];\n    for (let i = 0; i < xvals.length; i++) {\n        ctx.strokeStyle = '#000';\n        if (alias[player.hotbar.selected] == i && Math.abs(xvals[i]) !== 100) ctx.strokeStyle = '#ddd';\n        ctx.lineWidth = 3;\n        ctx.strokeRect(centerX + xvals[i] - 25, canvas.height - 70, 50, 50);\n        if (xvals[i] == 100) {\n            ctx.fillText('LH', centerX - 100, canvas.height - radius);\n            ctx.fillText('RH', centerX + 100, canvas.height - radius);\n        }\n    }\n    window.lee = player.hotbar.list.length; // for debugging purposes\n    for (let i = 0; i < player.hotbar.list.length; i++) {\n        if (/sword/gi.test(player.hotbar.list[i].name)) {\n            const img = new Image();\n            img.src = '/img/icons/two-handed-sword.svg';\n            ctx.drawImage(img, centerX + xvals[alias[i + 1]] - 25, canvas.height - 70, 50, 50);\n        }\n    }\n}\n\n// var pie = function(Flavour, Suuculence) {\n//     if (Flavour) {\n//         return \"I can taste the world\";\n//     }\n// };\n\n\n//# sourceURL=webpack://the-grove/./src/js/gui.js?");

/***/ }),

/***/ "./src/js/init/bodies.js":
/*!*******************************!*\
  !*** ./src/js/init/bodies.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _load__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../load */ \"./src/js/load.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"./src/node_modules/three/build/three.module.js\");\n\n\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((globals) => {\n    globals.scene.fog = new three__WEBPACK_IMPORTED_MODULE_0__.Fog(0xFFFFFF, 2);\n \n    let light = new three__WEBPACK_IMPORTED_MODULE_0__.DirectionalLight(0xffffff, 1);\n    light.position.set(50, 30, 40);\n    light.castShadow = true;\n    light.shadowMapBias = 0.0036;\n    light.shadowMapDarkness = 0.5;\n    let {shadow: {camera, mapSize}} = light;\n    camera.near = globals.camera.near;\n    camera.far = globals.camera.far;\n    camera.fov = 70;\n    camera.left = -400;\n    camera.right = 400;\n    camera.top = 100;\n    camera.bottom = -300;\n    mapSize.width = 4096;\n    mapSize.height = 4096;\n\n    globals.scene.add(light);\n\n    let spriteMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.SpriteMaterial({\n        map: new three__WEBPACK_IMPORTED_MODULE_0__.ImageUtils.loadTexture(\"/img/glow.png\"),\n        color: 0xffaaaa,\n        transparent: false,\n        blending: three__WEBPACK_IMPORTED_MODULE_0__.NormalBlending\n    });\n    let sprite = new three__WEBPACK_IMPORTED_MODULE_0__.Sprite(spriteMaterial);\n    sprite.scale.set(100, 100, 1.0);\n    light.add(sprite);\n\n    let uni = {\n        time: {\n            value: 1.0\n        },\n        resolution: {\n            value: new three__WEBPACK_IMPORTED_MODULE_0__.Vector2()\n        }\n    };\n\n    setInterval(() => {\n        uni.time.value += 0.1;\n        // let time = new Date().getTime() * 0.000015;\n        let time = 2.1;\n        const nsin = Math.sin(time);\n        const ncos = Math.cos(time);\n        \n        light.position.set(450 * nsin, 600 * nsin, 600 * ncos);\n\n    }, 40);\n\n    var hemiLight = new three__WEBPACK_IMPORTED_MODULE_0__.HemisphereLight(0xffffff, 0xffffff, 0.2);\n    hemiLight.color.setHSL(0.6, 1, 0.6);\n    hemiLight.groundColor.setHSL(0.095, 1, 0.75);\n    hemiLight.position.set(0, 500, 0);\n    globals.scene.add(hemiLight);\n\n    let imagePrefix = \"/img/skybox/\";\n    let directions = [\"px\", \"nx\", \"py\", \"ny\", \"pz\", \"nz\"];\n    let imageSuffix = \".jpg\";\n    let skyGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(2000, 2000, 2000);\n\n    let materialArray = [];\n    for (var i = 0; i < 6; i++) {\n        materialArray.push(new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n            map: three__WEBPACK_IMPORTED_MODULE_0__.ImageUtils.loadTexture(imagePrefix + directions[i] + imageSuffix),\n            side: three__WEBPACK_IMPORTED_MODULE_0__.BackSide,\n            fog: false\n        }));\n    }\n    var skyBox = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(skyGeometry, materialArray);\n    globals.BODIES[\"player\"].mesh.add(skyBox);\n\n    (0,_load__WEBPACK_IMPORTED_MODULE_1__.loadModel)(`/models/skjar-isles/skjar-isles.json`, object => {\n        globals.scene.add(object);\n        object.castShadow = true;\n        object.recieveShadow = true;\n        object.traverse(child => {\n            if (child instanceof three__WEBPACK_IMPORTED_MODULE_0__.Mesh) {\n                console.log(child.name);\n                child.castShadow = true;\n                child.recieveShadow = true;\n                (0,_load__WEBPACK_IMPORTED_MODULE_1__.load)(child, {\n                    mass: 0,\n                    material: globals.groundMaterial\n                }, globals);\n            }\n        });\n    });\n});\n\n\n//# sourceURL=webpack://the-grove/./src/js/init/bodies.js?");

/***/ }),

/***/ "./src/js/init/manager.js":
/*!********************************!*\
  !*** ./src/js/init/manager.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _world__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./world */ \"./src/js/init/world.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./player */ \"./src/js/init/player.js\");\n/* harmony import */ var _bodies__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bodies */ \"./src/js/init/bodies.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"./src/node_modules/three/build/three.module.js\");\n\n\n\n\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((globals, player) => {\n\n    (0,_world__WEBPACK_IMPORTED_MODULE_1__.default)(globals.world);\n    (0,_player__WEBPACK_IMPORTED_MODULE_2__.default)(globals, player);\n    (0,_bodies__WEBPACK_IMPORTED_MODULE_3__.default)(globals);\n\n    globals.renderer.shadowMap.enabled = true;\n    globals.renderer.shadowMapSoft = true;\n    globals.renderer.shadowMap.type = three__WEBPACK_IMPORTED_MODULE_0__.BasicShadowMap;\n\n    globals.renderer.shadowCameraNear = 3;\n    globals.renderer.shadowCameraFar = globals.camera.far;\n    globals.renderer.shadowCameraFov = 50;\n\n    globals.renderer.shadowMapBias = 0.0001;\n    globals.renderer.shadowMapDarkness = 0.5;\n    globals.renderer.shadowMapWidth = 1024;\n    globals.renderer.shadowMapHeight = 1024;\n    globals.renderer.setClearColor(globals.scene.fog.color, 1);\n    globals.renderer.setSize(window.innerWidth, window.innerHeight);\n\n    globals.camera.add(globals.listener);\n\n    document.body.appendChild(globals.renderer.domElement);\n\n});\n\n\n//# sourceURL=webpack://the-grove/./src/js/init/manager.js?");

/***/ }),

/***/ "./src/js/init/player.js":
/*!*******************************!*\
  !*** ./src/js/init/player.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _threex_PointerLockControls__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../threex/PointerLockControls */ \"./src/js/threex/PointerLockControls.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"./src/node_modules/three/build/three.module.js\");\n/* harmony import */ var cannon_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cannon-es */ \"./src/node_modules/cannon-es/dist/cannon-es.js\");\n\n\n\n\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((globals, player) => {\n    const mass = 100;\n    const radius = 1.7;\n\n    let sphereShape = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Sphere(radius);\n    let sphereBody = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Body({\n        mass,\n        material: globals.groundMaterial\n    });\n    sphereBody.addShape(sphereShape);\n    sphereBody.position.set(0, 30, 0);\n    // sphereBody.linearDamping = 0.9;\n    sphereBody.angularDamping = 0.9;\n\n    globals.world.addBody(sphereBody);\n\n    sphereBody.addEventListener('collide', (event) => {\n        const contact = event.contact;\n        const upAxis = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Vec3(0, 1, 0);\n\n        let contactNormal = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Vec3();\n\n        if (contact.bi.id == sphereBody.id)\n            contact.ni.negate(contactNormal);\n        else\n            contactNormal.copy(contact.ni);\n\n        if (contactNormal.dot(upAxis) > 0.5 && sphereBody.velocity.y <= -60)\n            player.hp.val -= Math.floor(Math.abs(sphereBody.velocity.y) / 10);\n    });\n\n    let mesh = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(\n        new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(1, 2, 1),\n        new three__WEBPACK_IMPORTED_MODULE_0__.MeshLambertMaterial()\n    );\n    mesh.castShadow = true;\n    globals.scene.add(mesh);\n    globals.BODIES['player'] = {\n        body: sphereBody, // HI!!!!!!!!!!!!!!!!!!!!\n        shape: sphereShape, // HYARHYARHYARHYARHYAR\n        mesh // HNORKHNORKHNORKHNORKHNORKHNORK\n    };\n\n    globals.controls = new _threex_PointerLockControls__WEBPACK_IMPORTED_MODULE_2__.default(globals.camera, globals.BODIES['player'].body);\n    globals.scene.add(globals.controls.getObject());\n});\n\n\n//# sourceURL=webpack://the-grove/./src/js/init/player.js?");

/***/ }),

/***/ "./src/js/init/world.js":
/*!******************************!*\
  !*** ./src/js/init/world.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var cannon_es__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cannon-es */ \"./src/node_modules/cannon-es/dist/cannon-es.js\");\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((world) => {\n    world.allowSleep = true;\n    world.defaultContactMaterial.contactEquationStiffness = 1e9;\n    world.defaultContactMaterial.contactEquationRelaxation = 4;\n    world.defaultContactMaterial.friction = 2;\n\n    let solver = new cannon_es__WEBPACK_IMPORTED_MODULE_0__.GSSolver();\n    solver.iterations = 7;\n    solver.tolerance = 0.1;\n\n    const split = false;\n    world.solver = split ? new cannon_es__WEBPACK_IMPORTED_MODULE_0__.SplitSolver(solver) : solver;\n\n    world.gravity.set(0, -25, 0);\n    world.broadphase = new cannon_es__WEBPACK_IMPORTED_MODULE_0__.NaiveBroadphase();\n});\n\n//# sourceURL=webpack://the-grove/./src/js/init/world.js?");

/***/ }),

/***/ "./src/js/items.js":
/*!*************************!*\
  !*** ./src/js/items.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var rpg_tools_lib_ProtoTree__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rpg-tools/lib/ProtoTree */ \"./src/node_modules/rpg-tools/lib/ProtoTree.js\");\n/* harmony import */ var rpg_tools_lib_ProtoTree__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(rpg_tools_lib_ProtoTree__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _json_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./json/base */ \"./src/js/json/base.json\");\n/* harmony import */ var _json_weapons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./json/weapons */ \"./src/js/json/weapons.json\");\n/* harmony import */ var _json_mats__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./json/mats */ \"./src/js/json/mats.json\");\n\n\n\n\n\n\n\n\nObject.assign(_json_base__WEBPACK_IMPORTED_MODULE_1__, _json_weapons__WEBPACK_IMPORTED_MODULE_2__, _json_mats__WEBPACK_IMPORTED_MODULE_3__);\nlet pt = new (rpg_tools_lib_ProtoTree__WEBPACK_IMPORTED_MODULE_0___default())(_json_base__WEBPACK_IMPORTED_MODULE_1__);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (callback => {\n    pt = new (rpg_tools_lib_ProtoTree__WEBPACK_IMPORTED_MODULE_0___default())(_json_base__WEBPACK_IMPORTED_MODULE_1__);\n    callback(pt, setUpSword);\n});\n\nfunction setUpComponent(comp, mat) {\n    let c = pt.get(comp),\n        m = pt.get(mat);\n    c.mat = m;\n    c.dmg = m.dmg;\n    c.spd = m.spd;\n    c.dur = m.dur;\n    c.name = 'test';\n    let clone = JSON.parse(JSON.stringify(c));\n    return clone;\n}\n\n\n// makes a sword and returns it; should be in JSON\n\nfunction setUpSword(type, mat1, mat2) {\n    let sword = pt.get(type ? 'longsword' : 'shortsword'),\n        blade = setUpComponent('@blade', mat1),\n        handle = setUpComponent('@handle', mat2);\n    sword.blade = blade;\n    sword.handle = handle;\n    sword.name = `${sword.blade.mat.name} ${sword.name}`;\n    sword.dmg = (blade.dmg + handle.dmg) / 2;\n    sword.spd = (blade.spd + handle.spd) / 2;\n    sword.slot = 'weapon';\n    sword.icon = 'two-handed-sword.svg';\n    sword.id = Math.random(); // for debugging purposes\n    let clone = JSON.parse(JSON.stringify(sword)); // EXTREME workaround but hey it works... :D\n    sword = null;\n    clone.id = Math.random();\n    return clone;\n}\n\n\n//# sourceURL=webpack://the-grove/./src/js/items.js?");

/***/ }),

/***/ "./src/js/json/base.json":
/*!*******************************!*\
  !*** ./src/js/json/base.json ***!
  \*******************************/
/***/ ((module) => {

"use strict";
eval("module.exports = JSON.parse('{\"@item\":{\"name\":\"-- Item --\",\"desc\":\"If you see this, please contact developers\",\"weight\":0,\"ench\":{}},\"@weapon\":{\"proto\":\"@item\",\"name\":\"-- Weapon --\",\"dmg\":0,\"spd\":0,\"knbk\":0,\"slot\":0,\"cost\":{}},\"@sword\":{\"proto\":\"@weapon\",\"name\":\"-- Sword --\",\"blade\":{},\"handle\":{}},\"@blade\":{\"proto\":\"@weapon\",\"name\":\"-- Blade --\",\"mat\":{}},\"@handle\":{\"proto\":\"@weapon\",\"name\":\"-- Handle --\",\"mat\":{}},\"@bow\":{\"proto\":\"@weapon\",\"name\":\"-- Bow --\",\"body\":{},\"string\":{}},\"@body\":{\"proto\":\"@weapon\",\"name\":\"-- Bow Body --\",\"mat\":{}},\"@string\":{\"proto\":\"@weapon\",\"name\":\"-- Bowstring --\",\"mat\":{}},\"@spell\":{\"proto\":\"@weapon\",\"name\":\"-- Spell --\",\"weight\":0},\"@material\":{\"proto\":\"@item\",\"dur\":0,\"spd\":0,\"dmg\":0}}');\n\n//# sourceURL=webpack://the-grove/./src/js/json/base.json?");

/***/ }),

/***/ "./src/js/json/mats.json":
/*!*******************************!*\
  !*** ./src/js/json/mats.json ***!
  \*******************************/
/***/ ((module) => {

"use strict";
eval("module.exports = JSON.parse('{\"wood\":{\"proto\":\"@material\",\"name\":\"Wood\",\"desc\":\"A block of wood.  Interesting.\",\"weight\":2,\"dmg\":3,\"dur\":1,\"spd\":4},\"iron\":{\"proto\":\"@material\",\"name\":\"Iron\",\"desc\":\"A bar of iron for all of your irony needs\",\"weight\":5,\"dmg\":7,\"dur\":3,\"spd\":3},\"steel\":{\"proto\":\"@material\",\"name\":\"Steel\",\"desc\":\"A rod of steel, a steel rod\",\"weight\":6,\"dmg\":12,\"dur\":5,\"spd\":3},\"ebony\":{\"proto\":\"@material\",\"name\":\"Ebony\",\"desc\":\"Like ebay, but ebony\",\"weight\":10,\"dmg\":16,\"dur\":8,\"spd\":2},\"ivory\":{\"proto\":\"@material\",\"name\":\"Ivory\",\"desc\":\"A fine, delicate material\",\"weight\":0.5,\"dmg\":2,\"dur\":1,\"spd\":15},\"dragonivory\":{\"proto\":\"ivory\",\"name\":\"Dragon Ivory\",\"desc\":\"Carved from the scales of the finest dragons in The Grove\",\"dmg\":4,\"dur\":2}}');\n\n//# sourceURL=webpack://the-grove/./src/js/json/mats.json?");

/***/ }),

/***/ "./src/js/json/weapons.json":
/*!**********************************!*\
  !*** ./src/js/json/weapons.json ***!
  \**********************************/
/***/ ((module) => {

"use strict";
eval("module.exports = JSON.parse('{\"shortsword\":{\"proto\":\"@sword\",\"name\":\"Shortsword\",\"desc\":\"A shortened sword\",\"slot\":1},\"longsword\":{\"proto\":\"@sword\",\"name\":\"Longsword\",\"desc\":\"Slonglord!  Wait a sec...\",\"slot\":2}}');\n\n//# sourceURL=webpack://the-grove/./src/js/json/weapons.json?");

/***/ }),

/***/ "./src/js/load.js":
/*!************************!*\
  !*** ./src/js/load.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"loadModel\": () => (/* binding */ loadModel),\n/* harmony export */   \"load\": () => (/* binding */ load),\n/* harmony export */   \"box\": () => (/* binding */ box),\n/* harmony export */   \"ball\": () => (/* binding */ ball),\n/* harmony export */   \"label\": () => (/* binding */ label)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"./src/node_modules/three/build/three.module.js\");\n/* harmony import */ var cannon_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cannon-es */ \"./src/node_modules/cannon-es/dist/cannon-es.js\");\n\n\n\n\n\n///\n\nlet models = {};\nlet accessCount = {};\nlet callbacks = {};\n\nconst loadModel = (uri, callback) => {\n    accessCount[uri] = accessCount[uri] || 0;\n    ++accessCount[uri];\n\n    callbacks[uri] = callbacks[uri] || [];\n    callbacks[uri].push(callback);\n\n    // if this is the first time this resource was requested, load it\n    if (accessCount[uri] === 1)\n    {\n        let loader = new three__WEBPACK_IMPORTED_MODULE_0__.ObjectLoader();\n        loader.load(uri, object => {\n            models[uri] = object;\n\n            // model may have been requested again since it started loading,\n            // serve asset to all cached requests\n            for (let cb of callbacks[uri]) {\n                cb(models[uri].clone());\n            }\n        });\n    }\n\n    // the model is cached\n    if (models[uri]) {\n        callback(models[uri].clone());\n    }\n};\n\nconst load = (mesh, opts, globals) => {\n    opts = opts ? opts : {};\n    mesh.castShadow = true;\n    mesh.recieveShadow = true;\n\n    let verts = [];\n    let faces = [];\n\n    for (var i = 0; i < mesh.geometry.vertices.length; i++) {\n        var v = mesh.geometry.vertices[i];\n        verts.push(v.x);\n        verts.push(v.y);\n        verts.push(v.z);\n    }\n    for (var i = 0; i < mesh.geometry.faces.length; i++) {\n        var f = mesh.geometry.faces[i];\n        faces.push(f.a);\n        faces.push(f.b);\n        faces.push(f.c);\n    }\n\n    var cvph = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Trimesh(verts, faces);\n    var Cbody = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Body({\n        mass: opts.mass || 0,\n        material: opts.material || undefined\n    });\n    Cbody.addShape(cvph);\n    Cbody.position.copy(mesh.position);\n    Cbody.quaternion.copy(mesh.quaternion);\n    globals.world.addBody(Cbody);\n    globals.BODIES['items'].push({\n        body: Cbody,\n        shape: cvph,\n        mesh: mesh\n    });\n    return {\n        body: Cbody,\n        shape: cvph,\n        mesh: mesh\n    };\n}\n\nconst box = (opts, globals) => {\n    opts = opts ? opts : {};\n\n    let halfExtents = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Vec3(opts.l || 1, opts.h || 1, opts.w || 1);\n    let boxShape = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Box(halfExtents);\n    let boxGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry(halfExtents.x * 2, halfExtents.y * 2, halfExtents.z * 2);\n    let boxBody = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Body({\n        mass: opts.mass || 0\n    });\n    boxBody.addShape(boxShape);\n    let boxMesh = opts.mesh || new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(boxGeometry, opts.mat || new three__WEBPACK_IMPORTED_MODULE_0__.MeshPhongMaterial({\n        color: 0xFF0000\n    }));\n    const index = globals.BODIES['items'].push({\n        body: boxBody,\n        shape: boxShape,\n        mesh: boxMesh\n    });\n\n    let body = globals.BODIES['items'][index];\n\n    globals.world.addBody(body.body);\n    globals.scene.add(body.mesh);\n    body.mesh.castShadow = true;\n    body.mesh.receiveShadow = true;\n    opts.pos ? body.mesh.position.set(opts.pos.x, opts.pos.y, opts.pos.z) : null;\n    body.norotete = opts.norotate || false;\n\n    return body;\n\n}\n\nconst ball = (opts, globals) => {\n    opts = opts ? opts : {};\n    let ballShape = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Sphere(opts.radius || 0.2);\n    let ballGeometry = new three__WEBPACK_IMPORTED_MODULE_0__.SphereGeometry(ballShape.radius, 32, 32);\n    let ballBody = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Body({\n        mass: opts.mass || 10\n    });\n\n    ballBody.addShape(ballShape);\n    let ballMesh = opts.mesh || new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(ballGeometry, opts.mat || new three__WEBPACK_IMPORTED_MODULE_0__.MeshPhongMaterial({\n        color: opts.c || 0x00CCFF\n    }));\n\n    const body = globals.BODIES[opts.array || 'items'].push({\n        body: ballBody,\n        shape: ballShape,\n        mesh: ballMesh,\n        norotate: opts.norotate || false\n    });\n\n    globals.world.addBody(body.body);\n    globals.scene.add(body.mesh);\n    body.mesh.castShadow = true;\n    body.mesh.receiveShadow = true;\n    \n    !opts.cb || opts.cb(body);\n\n    opts.pos ? body.body.position.set(opts.pos.x, opts.pos.y, opts.pos.z) : null;\n\n    return body;\n}\n\nconst label = (mesh, txt = '', icon = 'run') => {\n    const fontface = \"Arial\";\n    const fontsize = 18;\n    const borderThickness = 4;\n    const borderColor = {\n        r: 0,\n        g: 0,\n        b: 0,\n        a: 1.0\n    };\n    const backgroundColor = {\n        r: 255,\n        g: 255,\n        b: 255,\n        a: 1.0\n    };\n\n    let canvas = document.createElement('canvas');\n    let context = canvas.getContext('2d');\n    context.font = \"Bold \" + fontsize + \"px \" + fontface;\n\n    // get size data (height depends only on font size)\n    let metrics = context.measureText(txt);\n    let textWidth = metrics.width;\n\n    // background color\n    context.fillStyle = \"rgba(\" + backgroundColor.r + \",\" + backgroundColor.g + \",\" +\n        backgroundColor.b + \",\" + backgroundColor.a + \")\";\n    // border color\n    context.strokeStyle = \"rgba(\" + borderColor.r + \",\" + borderColor.g + \",\" +\n        borderColor.b + \",\" + borderColor.a + \")\";\n\n    context.lineWidth = borderThickness;\n    roundRect(context, borderThickness / 2, borderThickness / 2, textWidth + borderThickness, fontsize * 1.4 + borderThickness, 6);\n    // 1.4 is extra height factor for text below baseline: g,j,p,q.\n\n    // text color\n    context.fillStyle = \"rgba(0, 0, 0, 1.0)\";\n\n    context.fillText(txt, borderThickness, fontsize + borderThickness);\n\n    // canvas contents will be used for a texture\n    let texture = new three__WEBPACK_IMPORTED_MODULE_0__.Texture(canvas);\n    texture.needsUpdate = true;\n\n    let spriteMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.SpriteMaterial({\n        map: texture,\n        useScreenCoordinates: false\n    });\n    let sprite = new three__WEBPACK_IMPORTED_MODULE_0__.Sprite(spriteMaterial);\n    sprite.scale.set(5, 2.5, 1.0);\n    mesh.add(sprite);\n}\n\nconst roundRect = (ctx, x, y, w, h, r) => {\n    ctx.beginPath();\n    ctx.moveTo(x + r, y);\n    ctx.lineTo(x + w - r, y);\n    ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n    ctx.lineTo(x + w, y + h - r);\n    ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n    ctx.lineTo(x + r, y + h);\n    ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n    ctx.lineTo(x, y + r);\n    ctx.quadraticCurveTo(x, y, x + r, y);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n}\n\n//# sourceURL=webpack://the-grove/./src/js/load.js?");

/***/ }),

/***/ "./src/js/main.js":
/*!************************!*\
  !*** ./src/js/main.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _css_play__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../css/play */ \"./src/css/play.sass\");\n/* harmony import */ var _css_play__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_play__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _css_skill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../css/skill */ \"./src/css/skill.sass\");\n/* harmony import */ var _css_skill__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_skill__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _globals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./globals */ \"./src/js/globals.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./player */ \"./src/js/player.js\");\n/* harmony import */ var _pointerlock__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./pointerlock */ \"./src/js/pointerlock.js\");\n/* harmony import */ var _shooting__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./shooting */ \"./src/js/shooting.js\");\n/* harmony import */ var _init_manager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./init/manager */ \"./src/js/init/manager.js\");\n/* harmony import */ var _AI__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./AI */ \"./src/js/AI.js\");\n/* harmony import */ var _gui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./gui */ \"./src/js/gui.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"./src/node_modules/three/build/three.module.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"./src/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var cannon_es_debugger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! cannon-es-debugger */ \"./src/node_modules/cannon-es-debugger/dist/cannon-es-debugger.js\");\n\n\n\n\n\nconst debug = true;\n\n\n\n\n\n\n\n\n\n\n\n\n\nlet physicsDebugger = debug ? (0,cannon_es_debugger__WEBPACK_IMPORTED_MODULE_4__.default)(_globals__WEBPACK_IMPORTED_MODULE_5__.default.scene, _globals__WEBPACK_IMPORTED_MODULE_5__.default.world.bodies, {}) : null;\n\nconst dt = 1 / 60;\n\n(0,_gui__WEBPACK_IMPORTED_MODULE_6__.init)(_globals__WEBPACK_IMPORTED_MODULE_5__.default, _player__WEBPACK_IMPORTED_MODULE_7__.default);\n(0,_shooting__WEBPACK_IMPORTED_MODULE_8__.default)(_globals__WEBPACK_IMPORTED_MODULE_5__.default, _player__WEBPACK_IMPORTED_MODULE_7__.default);\n(0,_init_manager__WEBPACK_IMPORTED_MODULE_9__.default)(_globals__WEBPACK_IMPORTED_MODULE_5__.default, _player__WEBPACK_IMPORTED_MODULE_7__.default);\n(0,_AI__WEBPACK_IMPORTED_MODULE_10__.default)(_globals__WEBPACK_IMPORTED_MODULE_5__.default);\n(0,_pointerlock__WEBPACK_IMPORTED_MODULE_11__.default)(_globals__WEBPACK_IMPORTED_MODULE_5__.default);\n\nthree__WEBPACK_IMPORTED_MODULE_2__.DefaultLoadingManager.onProgress = (item, loaded, total) => {\n    console.log(`loading ${item} (${loaded}/${total})`);\n    if (loaded > 10 && loaded == total) {\n        $('#spinner').hide();\n        $('#load-play-btn, .play-btn').show();\n        lodash__WEBPACK_IMPORTED_MODULE_3___default().once(animate)();\n        (0,_gui__WEBPACK_IMPORTED_MODULE_6__.quests)();\n    }\n};\n\nfunction animate(delta) {\n    if (_globals__WEBPACK_IMPORTED_MODULE_5__.default.controls && _globals__WEBPACK_IMPORTED_MODULE_5__.default.controls.enabled) {\n        if (_globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.bodies.length && _globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.meshes.length) {\n            for (let key in _globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.bodies) {\n                _globals__WEBPACK_IMPORTED_MODULE_5__.default.world.removeBody(_globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.bodies[key]);\n                delete _globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.bodies[key];\n            }\n            for (let key in _globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.meshes) {\n                _globals__WEBPACK_IMPORTED_MODULE_5__.default.scene.remove(_globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.meshes[key]);\n                delete _globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.meshes[key];\n            }\n        }\n        else if (_globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.tweens.length) {\n            for (let key in _globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.tweens) {\n                _globals__WEBPACK_IMPORTED_MODULE_5__.default.TWEENS[_globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.bodies[key]].stop();\n                delete _globals__WEBPACK_IMPORTED_MODULE_5__.default.remove.tweens[key];\n            }\n        }\n\n        _globals__WEBPACK_IMPORTED_MODULE_5__.default.world.step(dt);\n        if (debug) physicsDebugger.update();\n\n        // Update bullets, etc.\n        for (let i = 0; i < _globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.projectiles.length; i++) {\n            _globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.projectiles[i].mesh.position.copy(_globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.projectiles[i].body.position);\n            _globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.projectiles[i].mesh.quaternion.copy(_globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.projectiles[i].body.quaternion);\n        }\n\n        // Update items\n        for (let i = 0; i < _globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.items.length; i++) {\n            _globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.items[i].mesh.position.copy(_globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.items[i].body.position);\n            if (!_globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.items[i].norotate) _globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.items[i].mesh.quaternion.copy(_globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.items[i].body.quaternion);\n        }\n\n        for (let key in _globals__WEBPACK_IMPORTED_MODULE_5__.default.TWEENS) {\n            _globals__WEBPACK_IMPORTED_MODULE_5__.default.TWEENS[key].update(delta);\n        }\n\n        _globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.player.mesh.position.copy(_globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.player.body.position);\n        if (_globals__WEBPACK_IMPORTED_MODULE_5__.default.BODIES.player.body.position.y < -400) _player__WEBPACK_IMPORTED_MODULE_7__.default.hp.val--;\n\n        $('#health-bar').val(_player__WEBPACK_IMPORTED_MODULE_7__.default.hp.val / _player__WEBPACK_IMPORTED_MODULE_7__.default.hp.max * 100 > 0 ? _player__WEBPACK_IMPORTED_MODULE_7__.default.hp.val / _player__WEBPACK_IMPORTED_MODULE_7__.default.hp.max * 100 : 0);\n        $('#health').text(`${_player__WEBPACK_IMPORTED_MODULE_7__.default.hp.val > 0 ? _player__WEBPACK_IMPORTED_MODULE_7__.default.hp.val : 0} HP`);\n        \n        if (_player__WEBPACK_IMPORTED_MODULE_7__.default.hp.val <= 0) {\n            _globals__WEBPACK_IMPORTED_MODULE_5__.default.socket.disconnect();\n            $('#blocker').fadeIn(5000);\n            $('#load').show().html('<h1>You Have Perished. Game Over...</h1>');\n            return;\n        }\n\n        // for (let key in globals.composers) globals.composers[key].render(delta);\n\n        _globals__WEBPACK_IMPORTED_MODULE_5__.default.controls.update(Date.now() - _globals__WEBPACK_IMPORTED_MODULE_5__.default.delta);\n        _globals__WEBPACK_IMPORTED_MODULE_5__.default.renderer.render(_globals__WEBPACK_IMPORTED_MODULE_5__.default.scene, _globals__WEBPACK_IMPORTED_MODULE_5__.default.camera);\n        _globals__WEBPACK_IMPORTED_MODULE_5__.default.delta = Date.now();\n\n        if (_player__WEBPACK_IMPORTED_MODULE_7__.default && _player__WEBPACK_IMPORTED_MODULE_7__.default.serverdata && _globals__WEBPACK_IMPORTED_MODULE_5__.default && _globals__WEBPACK_IMPORTED_MODULE_5__.default.updatePlayerData) {\n            _globals__WEBPACK_IMPORTED_MODULE_5__.default.updatePlayerData();\n            _globals__WEBPACK_IMPORTED_MODULE_5__.default.socket.emit('updatePosition', _player__WEBPACK_IMPORTED_MODULE_7__.default.serverdata);\n        }\n    }\n\n    requestAnimationFrame(animate);\n}\n\nwindow.addEventListener('resize', onWindowResize, false);\n\nfunction onWindowResize() {\n    _globals__WEBPACK_IMPORTED_MODULE_5__.default.camera.aspect = window.innerWidth / window.innerHeight;\n    _globals__WEBPACK_IMPORTED_MODULE_5__.default.camera.updateProjectionMatrix();\n    _globals__WEBPACK_IMPORTED_MODULE_5__.default.renderer.setSize(window.innerWidth, window.innerHeight);\n}\n\n//# sourceURL=webpack://the-grove/./src/js/main.js?");

/***/ }),

/***/ "./src/js/player.js":
/*!**************************!*\
  !*** ./src/js/player.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _items__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./items */ \"./src/js/items.js\");\n\n\n\n\nclass Player {\n    constructor() {\n        this.hp = {\n            val: 10, // current hp\n            max: 10 // max hp.  No min, cuz if it reaches 0, ur dead.  fun thoughts\n        };\n        this.mp = {\n            val: 5, // see hp\n            max: 5\n        };\n        this.xp = {\n            level: 0, // level\n            xp: 3, // current xp\n            max: 10 // xp needed till lvl up\n        };\n        this.equipped = {\n            weapon: null\n        };\n        this.inventory = [];\n        this.hotbar = {\n            list: [],\n            selected: 1,\n            active: null\n        };\n\n        (0,_items__WEBPACK_IMPORTED_MODULE_0__.default)((pt, sword) => {\n            this.inventory.push(sword(0, 'iron', 'wood'));\n            this.inventory.push(sword(0, 'ebony', 'iron'));\n        });\n\n    }\n}\n\nlet player = new Player();\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (player);\n\n\n//# sourceURL=webpack://the-grove/./src/js/player.js?");

/***/ }),

/***/ "./src/js/pointerlock.js":
/*!*******************************!*\
  !*** ./src/js/pointerlock.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((globals) => {\n    let blocker = document.getElementById('blocker');\n    let hud = document.getElementById('hud');\n\n    const havePointerLock = 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document;\n\n    if (havePointerLock) {\n\n        let element = document.body;\n\n        let pointerlockchange = () => {\n            if (document.pointerLockElement === element || document.mozPointerLockElement === element || document.webkitPointerLockElement === element) {\n                globals.controls.enabled = true;\n                blocker.style.display = 'none';\n                $('#pause').hide();\n                hud.style.display = '';\n            }\n            else {\n                globals.controls.enabled = false;\n                hud.style.display = 'none';\n                $('#pause').show();\n\n                // blocker.style.display = '-webkit-box';\n                // blocker.style.display = '-moz-box';\n                // blocker.style.display = 'box';\n\n                // instructions.style.display = '';\n            }\n        }\n\n        const pointerlockerror = () => {}\n\n        // Hook pointer lock state change events\n        document.addEventListener('pointerlockchange', pointerlockchange, false);\n        document.addEventListener('mozpointerlockchange', pointerlockchange, false);\n        document.addEventListener('webkitpointerlockchange', pointerlockchange, false);\n\n        document.addEventListener('pointerlockerror', pointerlockerror, false);\n        document.addEventListener('mozpointerlockerror', pointerlockerror, false);\n        document.addEventListener('webkitpointerlockerror', pointerlockerror, false);\n\n        function click() {\n            toggleFullScreen();\n\n            // Ask the browser to lock the pointer\n            element.requestPointerLock = element.requestPointerLock || element.mozRequestPointerLock || element.webkitRequestPointerLock;\n\n            if (/Firefox/i.test(navigator.userAgent)) {\n                const fullscreenchange = () => {\n                    if (document.fullscreenElement === element || document.mozFullscreenElement === element || document.mozFullScreenElement === element) {\n                        document.removeEventListener('fullscreenchange', fullscreenchange);\n                        document.removeEventListener('mozfullscreenchange', fullscreenchange);\n                        element.requestPointerLock();\n                    }\n                }\n\n                document.addEventListener('fullscreenchange', fullscreenchange, false);\n                document.addEventListener('mozfullscreenchange', fullscreenchange, false);\n\n                element.requestFullscreen = element.requestFullscreen || element.mozRequestFullscreen || element.mozRequestFullScreen || element.webkitRequestFullscreen;\n                element.requestFullscreen();\n            }\n            else {\n                element.requestPointerLock();\n                element.requestFullscreen = element.requestFullscreen || element.mozRequestFullscreen || element.mozRequestFullScreen || element.webkitRequestFullscreen;\n                element.requestFullscreen();\n            }\n\n        }\n\n        $('.play-btn').click(click);\n\n    }\n    else {\n        alert('Your browser doesn\\'t support the HTML5 PointerLock API!');\n    }\n\n    function toggleFullScreen() {\n        let i = document.body;\n        // go full-screen\n        if (i.requestFullscreen) {\n            i.requestFullscreen();\n        }\n        else if (i.webkitRequestFullscreen) {\n            i.webkitRequestFullscreen();\n        }\n        else if (i.mozRequestFullScreen) {\n            i.mozRequestFullScreen();\n        }\n        else if (i.msRequestFullscreen) {\n            i.msRequestFullscreen();\n        }\n    }\n});\n\n//# sourceURL=webpack://the-grove/./src/js/pointerlock.js?");

/***/ }),

/***/ "./src/js/shooting.js":
/*!****************************!*\
  !*** ./src/js/shooting.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _load__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./load */ \"./src/js/load.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"./src/node_modules/three/build/three.module.js\");\n\n\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((globals, player) => {\n    let sword;\n    let weapon;\n\n    (0,_load__WEBPACK_IMPORTED_MODULE_1__.loadModel)(\"/models/sword/sword.json\", object => {\n        sword = object;\n        sword.scale.set(0.1, 0.1, 0.1);\n        sword.castShadow = true;\n        sword.position.x++;\n        sword.position.y -= 1.2;\n        sword.position.z -= 1.25;\n    });\n\n    const addWeapon = () => {\n        if (player.hotbar.list[player.hotbar.selected - 1]) player.equipped.weapon = player.hotbar.list[player.hotbar.selected - 1];\n        if (player.equipped.weapon && /sword/gi.test(player.equipped.weapon.name) && !weapon) {\n            weapon = sword.clone();\n            globals.camera.add(weapon);\n            window.addEventListener('mousedown', () => {\n                if (weapon) {\n                    let tween = new TWEEN.Tween(weapon.rotation)\n                        .to({\n                            x: [-Math.PI / 2, 0]\n                        }, 1 / (player.equipped.weapon.spd * 3000))\n                        .onStart(() => {\n                            let a = new Audio('/audio/sword.mp3');\n                            a.play();\n                        })\n                        .start();\n\n                    globals.TWEENS.push(tween);\n\n                    let raycaster = new three__WEBPACK_IMPORTED_MODULE_0__.Raycaster();\n                    raycaster.set(globals.camera.getWorldPosition(), globals.camera.getWorldDirection(new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, -1)));\n                    let intersects = raycaster.intersectObjects(globals.scene.children, true);\n                    if (intersects.length && intersects[0].object.name == 'rabbit') Materialize.toast('Got one!', 750);\n                    else if (intersects.length && intersects[0].object.name == 'Rabbit') Materialize.toast('Still unchanged.  Solution coming!', 750);\n                }\n            });\n        }\n        else if (!player.equipped.weapon) {\n            globals.camera.remove(weapon);\n            weapon = null;\n        }\n    }\n\n    const getShootDir = (targetVec) => {\n        let vector = targetVec;\n        targetVec.set(0, 0, 1);\n        vector.unproject(globals.camera);\n        let ray = new three__WEBPACK_IMPORTED_MODULE_0__.Ray(globals.BODIES['player'].body.position, vector.sub(globals.BODIES['player'].body.position).normalize());\n        targetVec.copy(ray.direction);\n    }\n\n    const shoot = () => {\n        if (globals.controls.enabled == true && player.equipped) {\n\n            let shootDirection = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n            const shootVelo = 20;\n\n            let x = globals.BODIES['player'].body.position.x;\n            let y = globals.BODIES['player'].body.position.y;\n            let z = globals.BODIES['player'].body.position.z;\n\n            let b = (0,_load__WEBPACK_IMPORTED_MODULE_1__.ball)({\n                array: 'projectiles',\n                c: player.equipped == 'rock' ? 0xCCCCCC : 0xFF4500\n            }, globals);\n\n            getShootDir(shootDirection);\n            b.body.velocity.set(\n                shootDirection.x * shootVelo,\n                shootDirection.y * shootVelo,\n                shootDirection.z * shootVelo);\n\n            // Move the ball outside the player sphere\n            x += shootDirection.x * (globals.BODIES['player'].shape.radius * 1.02 + b.shape.radius);\n            y += shootDirection.y * (globals.BODIES['player'].shape.radius * 1.02 + b.shape.radius);\n            z += shootDirection.z * (globals.BODIES['player'].shape.radius * 1.02 + b.shape.radius);\n            b.body.position.set(x, y, z);\n            b.mesh.position.set(x, y, z);\n            b.id = Math.random();\n\n            b.body.addEventListener(\"collide\", (event) => {\n                const contact = event.contact;\n                if (contact.bj.id != b.body.id)\n                    for (let key in globals.PLAYERS) {\n                        if (contact.bj == globals.PLAYERS[key].body)\n                            globals.socket.emit('hit-player', globals.PLAYERS[key].id);\n                    }\n                setTimeout(() => {\n                    globals.remove.bodies.push(b.body);\n                    globals.remove.meshes.push(b.mesh);\n                }, 1500);\n\n            });\n\n            globals.socket.emit('bullet', {\n                pos: {x, y, z},\n                vel: {\n                    x: b.body.velocity.x,\n                    y: b.body.velocity.y,\n                    z: b.body.velocity.z\n                },\n            });\n        }\n    }\n\n    setInterval(addWeapon, 500);\n\n    $(document).on('mousedown', shoot);\n\n    $(window).on('keydown', event => {\n        if (String.fromCharCode(event.keyCode) == 'E') {\n            let raycaster = new three__WEBPACK_IMPORTED_MODULE_0__.Raycaster();\n            raycaster.set(globals.camera.getWorldPosition(), globals.camera.getWorldDirection(new three__WEBPACK_IMPORTED_MODULE_0__.Vector3(0, 0, -1)));\n            let intersects = raycaster.intersectObjects(globals.scene.children, true);\n            if (intersects.length > 0) {\n                if (/door/gi.test(intersects[0].object.name)) globals.socket.emit('map-update', {\n                    username: player.serverdata.acc.username,\n                    password: player.serverdata.acc.password,\n                    map: 'skjar-isles'\n                });\n            }\n        }\n        try {\n            let n = Number(String.fromCharCode(event.keyCode));\n            if (typeof n == 'number' && !isNaN(n) && n >= 1 && n <= 8) {\n                player.hotbar.selected = n;\n                if (player.hotbar.list[n - 1]) player.equipped.weapon = player.hotbar.list[n - 1];\n                else player.equipped.weapon = null;\n            }\n        }\n        catch (err) {}\n    });\n});\n\n\n//# sourceURL=webpack://the-grove/./src/js/shooting.js?");

/***/ }),

/***/ "./src/js/threex/PointerLockControls.js":
/*!**********************************************!*\
  !*** ./src/js/threex/PointerLockControls.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"./src/node_modules/three/build/three.module.js\");\n/* harmony import */ var cannon_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cannon-es */ \"./src/node_modules/cannon-es/dist/cannon-es.js\");\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author schteppe / https://github.com/schteppe\n */\n\n\n\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(camera, cannonBody) {\n\n    const eyeYPos = 2; // eyes are 2 meters above the ground\n    const velocityFactor = 0.3;\n    const jumpVelocity = 10;\n    let scope = this;\n\n    var pitchObject = new three__WEBPACK_IMPORTED_MODULE_0__.Object3D();\n    pitchObject.add(camera);\n\n    var yawObject = new three__WEBPACK_IMPORTED_MODULE_0__.Object3D();\n    yawObject.position.y = 2;\n    yawObject.add(pitchObject);\n\n    var quat = new three__WEBPACK_IMPORTED_MODULE_0__.Quaternion();\n\n    var moveForward = false;\n    var moveBackward = false;\n    var moveLeft = false;\n    var moveRight = false;\n\n    var canJump = false;\n\n    var contactNormal = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Vec3(); // Normal in the contact, pointing *out* of whatever the player touched\n    var upAxis = new cannon_es__WEBPACK_IMPORTED_MODULE_1__.Vec3(0, 1, 0);\n    cannonBody.addEventListener(\"collide\", function(e) {\n        var contact = e.contact;\n\n        // contact.bi and contact.bj are the colliding bodies, and contact.ni is the collision normal.\n        // We do not yet know which one is which! Let's check.\n        if (contact.bi.id == cannonBody.id) // bi is the player body, flip the contact normal\n            contact.ni.negate(contactNormal);\n        else\n            contactNormal.copy(contact.ni); // bi is something else. Keep the normal as it is\n\n        // If contactNormal.dot(upAxis) is between 0 and 1, we know that the contact normal is somewhat in the up direction.\n        if (contactNormal.dot(upAxis) > 0.5) // Use a \"good\" threshold value between 0 and 1 here!\n            canJump = true;\n    });\n\n    var velocity = cannonBody.velocity;\n\n    var PI_2 = Math.PI / 2;\n\n    var onMouseMove = function(event) {\n\n        if (scope.enabled === false) return;\n\n        var movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\n        var movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n\n        yawObject.rotation.y -= movementX * 0.002;\n        pitchObject.rotation.x -= movementY * 0.002;\n\n        pitchObject.rotation.x = Math.max(-PI_2, Math.min(PI_2, pitchObject.rotation.x));\n    };\n\n    var onKeyDown = function(event) {\n        if (!$('#chat-input').is(':focus')) {\n            switch (event.keyCode) {\n\n                case 38: // up\n                case 87: // w\n                    moveForward = true;\n                    break;\n\n                case 37: // left\n                case 65: // a\n                    moveLeft = true;\n                    break;\n\n                case 40: // down\n                case 83: // s\n                    moveBackward = true;\n                    break;\n\n                case 39: // right\n                case 68: // d\n                    moveRight = true;\n                    break;\n\n                case 32: // space\n                    if (canJump === true) {\n                        velocity.y = jumpVelocity;\n                    }\n                    canJump = false;\n                    break;\n            }\n        }\n    };\n\n    var onKeyUp = function(event) {\n        if (!$('#chat-input').is(':focus')) {\n            switch (event.keyCode) {\n\n                case 38: // up\n                case 87: // w\n                    moveForward = false;\n                    break;\n\n                case 37: // left\n                case 65: // a\n                    moveLeft = false;\n                    break;\n\n                case 40: // down\n                case 83: // a\n                    moveBackward = false;\n                    break;\n\n                case 39: // right\n                case 68: // d\n                    moveRight = false;\n                    break;\n\n            }\n        }\n    };\n\n    document.addEventListener('mousemove', onMouseMove, false);\n    document.addEventListener('keydown', onKeyDown, false);\n    document.addEventListener('keyup', onKeyUp, false);\n\n    this.enabled = false;\n\n    this.getObject = function() {\n        return yawObject;\n    };\n\n    this.getDirection = function(targetVec) {\n        targetVec.set(0, 0, -1);\n        quat.multiplyVector3(targetVec);\n    }\n\n    // Moves the camera to the Cannon.js object position and adds velocity to the object if the run key is down\n    var inputVelocity = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    var euler = new three__WEBPACK_IMPORTED_MODULE_0__.Euler();\n    this.update = function(delta) {\n\n        if (scope.enabled === true) {\n\n            delta *= 0.1;\n\n            inputVelocity.set(0, 0, 0);\n\n            if (moveForward) {\n                inputVelocity.z = -velocityFactor * delta;\n            }\n            if (moveBackward) {\n                inputVelocity.z = velocityFactor * delta;\n            }\n            if (moveLeft) {\n                inputVelocity.x = -velocityFactor * delta;\n            }\n            if (moveRight) {\n                inputVelocity.x = velocityFactor * delta;\n            }\n\n            if (canJump) {\n                inputVelocity.x *= 0.8;\n                inputVelocity.y *= 0.8;\n                inputVelocity.z *= 0.8;\n            }\n\n        }\n\n        if (canJump && !moveForward && !moveBackward && !moveLeft && !moveRight) {\n            if (cannonBody.velocity.x < 0)\n                cannonBody.velocity.x += 0.45;\n            else\n                cannonBody.velocity.x -= 0.46;\n\n            if (cannonBody.velocity.z < 0)\n                cannonBody.velocity.z += 0.45;\n            else\n                cannonBody.velocity.z -= 0.46;\n        }\n        if (cannonBody.velocity.x < -15)\n            cannonBody.velocity.x = -15;\n        else if (cannonBody.velocity.x > 15)\n            cannonBody.velocity.x = 15;\n        if (cannonBody.velocity.z < -15)\n            cannonBody.velocity.z = -15;\n        else if (cannonBody.velocity.z > 15)\n            cannonBody.velocity.z = 15;\n\n        // Convert velocity to world coordinates\n        // euler.x = pitchObject.rotation.x;\n        euler.y = yawObject.rotation.y;\n        euler.order = \"XYZ\";\n        quat.setFromEuler(euler);\n        inputVelocity.applyQuaternion(quat);\n\n        // Add to the object\n        velocity.x += inputVelocity.x;\n        velocity.z += inputVelocity.z;\n\n        yawObject.position.copy(cannonBody.position);\n    };\n};\n\n\n//# sourceURL=webpack://the-grove/./src/js/threex/PointerLockControls.js?");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ "use strict";
/******/ 
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendor"], () => (__webpack_exec__("./src/js/main.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);